{"version":3,"sources":["webpack:///./node_modules/echarts/lib/action/createDataSelectAction.js","webpack:///./node_modules/echarts/lib/action/geoRoam.js","webpack:///./node_modules/echarts/lib/action/roamHelper.js","webpack:///./node_modules/echarts/lib/chart/bar.js","webpack:///./node_modules/echarts/lib/chart/bar/BarSeries.js","webpack:///./node_modules/echarts/lib/chart/bar/BarView.js","webpack:///./node_modules/echarts/lib/chart/bar/BaseBarSeries.js","webpack:///./node_modules/echarts/lib/chart/bar/barItemStyle.js","webpack:///./node_modules/echarts/lib/chart/bar/helper.js","webpack:///./node_modules/echarts/lib/chart/effectScatter.js","webpack:///./node_modules/echarts/lib/chart/effectScatter/EffectScatterSeries.js","webpack:///./node_modules/echarts/lib/chart/effectScatter/EffectScatterView.js","webpack:///./node_modules/echarts/lib/chart/gauge.js","webpack:///./node_modules/echarts/lib/chart/gauge/GaugeSeries.js","webpack:///./node_modules/echarts/lib/chart/gauge/GaugeView.js","webpack:///./node_modules/echarts/lib/chart/gauge/PointerPath.js","webpack:///./node_modules/echarts/lib/chart/helper/EffectSymbol.js","webpack:///./node_modules/echarts/lib/chart/helper/LargeSymbolDraw.js","webpack:///./node_modules/echarts/lib/chart/helper/Symbol.js","webpack:///./node_modules/echarts/lib/chart/helper/SymbolDraw.js","webpack:///./node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","webpack:///./node_modules/echarts/lib/chart/helper/createListSimply.js","webpack:///./node_modules/echarts/lib/chart/helper/labelHelper.js","webpack:///./node_modules/echarts/lib/chart/line.js","webpack:///./node_modules/echarts/lib/chart/line/LineSeries.js","webpack:///./node_modules/echarts/lib/chart/line/LineView.js","webpack:///./node_modules/echarts/lib/chart/line/helper.js","webpack:///./node_modules/echarts/lib/chart/line/lineAnimationDiff.js","webpack:///./node_modules/echarts/lib/chart/line/poly.js","webpack:///./node_modules/echarts/lib/chart/map.js","webpack:///./node_modules/echarts/lib/chart/map/MapSeries.js","webpack:///./node_modules/echarts/lib/chart/map/MapView.js","webpack:///./node_modules/echarts/lib/chart/map/backwardCompat.js","webpack:///./node_modules/echarts/lib/chart/map/mapDataStatistic.js","webpack:///./node_modules/echarts/lib/chart/map/mapSymbolLayout.js","webpack:///./node_modules/echarts/lib/chart/map/mapVisual.js","webpack:///./node_modules/echarts/lib/chart/pie.js","webpack:///./node_modules/echarts/lib/chart/pie/PieSeries.js","webpack:///./node_modules/echarts/lib/chart/pie/PieView.js","webpack:///./node_modules/echarts/lib/chart/pie/labelLayout.js","webpack:///./node_modules/echarts/lib/chart/pie/pieLayout.js","webpack:///./node_modules/echarts/lib/chart/radar.js","webpack:///./node_modules/echarts/lib/chart/radar/RadarSeries.js","webpack:///./node_modules/echarts/lib/chart/radar/RadarView.js","webpack:///./node_modules/echarts/lib/chart/radar/backwardCompat.js","webpack:///./node_modules/echarts/lib/chart/radar/radarLayout.js","webpack:///./node_modules/echarts/lib/chart/scatter.js","webpack:///./node_modules/echarts/lib/chart/scatter/ScatterSeries.js","webpack:///./node_modules/echarts/lib/chart/scatter/ScatterView.js","webpack:///./node_modules/echarts/lib/component/axis.js","webpack:///./node_modules/echarts/lib/component/axis/AxisBuilder.js","webpack:///./node_modules/echarts/lib/component/axis/AxisView.js","webpack:///./node_modules/echarts/lib/component/axis/CartesianAxisView.js","webpack:///./node_modules/echarts/lib/component/axisPointer.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","webpack:///./node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","webpack:///./node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","webpack:///./node_modules/echarts/lib/component/axisPointer/axisTrigger.js","webpack:///./node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","webpack:///./node_modules/echarts/lib/component/axisPointer/globalListener.js","webpack:///./node_modules/echarts/lib/component/axisPointer/modelHelper.js","webpack:///./node_modules/echarts/lib/component/axisPointer/viewHelper.js","webpack:///./node_modules/echarts/lib/component/gridSimple.js","webpack:///./node_modules/echarts/lib/component/helper/MapDraw.js","webpack:///./node_modules/echarts/lib/component/helper/RoamController.js","webpack:///./node_modules/echarts/lib/component/helper/cursorHelper.js","webpack:///./node_modules/echarts/lib/component/helper/interactionMutex.js","webpack:///./node_modules/echarts/lib/component/helper/listComponent.js","webpack:///./node_modules/echarts/lib/component/helper/roamHelper.js","webpack:///./node_modules/echarts/lib/component/helper/selectableMixin.js","webpack:///./node_modules/echarts/lib/component/legend.js","webpack:///./node_modules/echarts/lib/component/legend/LegendModel.js","webpack:///./node_modules/echarts/lib/component/legend/LegendView.js","webpack:///./node_modules/echarts/lib/component/legend/legendAction.js","webpack:///./node_modules/echarts/lib/component/legend/legendFilter.js","webpack:///./node_modules/echarts/lib/component/radar.js","webpack:///./node_modules/echarts/lib/component/radar/RadarView.js","webpack:///./node_modules/echarts/lib/component/title.js","webpack:///./node_modules/echarts/lib/component/tooltip.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipContent.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipModel.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipView.js","webpack:///./node_modules/echarts/lib/coord/View.js","webpack:///./node_modules/echarts/lib/coord/axisDefault.js","webpack:///./node_modules/echarts/lib/coord/axisModelCreator.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Axis2D.js","webpack:///./node_modules/echarts/lib/coord/cartesian/AxisModel.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Grid.js","webpack:///./node_modules/echarts/lib/coord/cartesian/GridModel.js","webpack:///./node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","webpack:///./node_modules/echarts/lib/coord/geo/Geo.js","webpack:///./node_modules/echarts/lib/coord/geo/fix/diaoyuIsland.js","webpack:///./node_modules/echarts/lib/coord/geo/fix/geoCoord.js","webpack:///./node_modules/echarts/lib/coord/geo/fix/nanhai.js","webpack:///./node_modules/echarts/lib/coord/geo/fix/textCoord.js","webpack:///./node_modules/echarts/lib/coord/geo/geoCreator.js","webpack:///./node_modules/echarts/lib/coord/geo/geoJSONLoader.js","webpack:///./node_modules/echarts/lib/coord/geo/geoSVGLoader.js","webpack:///./node_modules/echarts/lib/coord/geo/geoSourceManager.js","webpack:///./node_modules/echarts/lib/coord/radar/IndicatorAxis.js","webpack:///./node_modules/echarts/lib/coord/radar/Radar.js","webpack:///./node_modules/echarts/lib/coord/radar/RadarModel.js","webpack:///./node_modules/echarts/lib/layout/points.js","webpack:///./node_modules/echarts/lib/processor/dataFilter.js","webpack:///./node_modules/echarts/lib/processor/dataSample.js","webpack:///./node_modules/echarts/lib/util/shape/sausage.js","webpack:///./node_modules/echarts/lib/visual/dataColor.js","webpack:///./node_modules/echarts/lib/visual/symbol.js"],"names":["echarts","zrUtil","module","exports","seriesType","actionInfos","each","actionInfo","update","registerAction","payload","ecModel","selected","eachComponent","mainType","subType","query","seriesModel","method","name","dataIndex","data","getData","idx","getName","isSelected","seriesId","updateCenterAndZoom","type","event","componentType","componentModel","geo","coordinateSystem","res","get","setCenter","center","setZoom","zoom","seriesGroup","view","zoomLimit","previousZoom","getZoom","getCenter","point","dataToPoint","dx","dy","pointToData","zoomMin","min","zoomMax","max","Infinity","Math","scale","position","fixX","originX","fixY","originY","updateTransform","_barGrid","layout","largeLayout","registerLayout","PRIORITY","VISUAL","LAYOUT","curry","PROGRESSIVE_LAYOUT","registerVisual","reset","setVisual","_default","extend","dependencies","brushSelector","getProgressive","this","getProgressiveThreshold","progressiveThreshold","largeThreshold","defaultOption","clip","roundCap","__DEV__","graphic","setLabel","Model","barItemStyle","Path","throttle","createClipPath","Sausage","BAR_BORDER_WIDTH_QUERY","_eventPos","prototype","extendChartView","render","api","_updateDrawMode","coordinateSystemType","_isLargeDraw","_renderLarge","_renderNormal","group","incrementalPrepareRender","_clear","incrementalRender","params","_incrementalRenderLarge","isLargeDraw","pipelineContext","large","isHorizontalOrRadial","oldData","_data","coord","baseAxis","getBaseAxis","isHorizontal","dim","animationModel","isAnimationEnabled","needsClip","coordSysClipArea","getArea","onBand","expandWidth","getLayout","x","width","y","height","getClipArea","removeClipPath","diff","add","hasValue","itemModel","getItemModel","remove","el","elementCreator","setItemGraphicEl","updateStyle","newIndex","oldIndex","getItemGraphicEl","updateProps","shape","removeRect","removeSector","execute","createLarge","clipPath","setClipPath","dispose","noop","eachItemGraphicEl","removeAll","mathMax","mathMin","cartesian2d","coordSysBoundingRect","signWidth","signHeight","x2","y2","clipped","polar","isUpdate","rect","Rect","animateProperty","animateTarget","isRadial","clockwise","startAngle","endAngle","sector","Sector","defaults","style","text","parent","r","r0","getItemLayout","fixedLineWidth","rawLayout","lineWidth","abs","getLineWidth","signX","signY","cx","cy","isPolar","color","getItemVisual","opacity","itemStyleModel","getModel","hoverStyle","getBarItemStyle","setShape","useStyle","fill","cursorStyle","getShallow","attr","labelPositionOutside","setHoverStyle","LargePath","points","buildPath","ctx","startPoint","__startPoint","baseDimIdx","__baseDimIdx","i","length","moveTo","lineTo","incremental","__largeDataIndices","__barWidth","borderColor","getVisual","itemStyle","getItemStyle","stroke","setLargeStyle","seriesIndex","on","largePathUpdateDataIndex","largePath","valueDimIdx","largeDataIndices","barWidthHalf","startValueVal","pointerBaseVal","pointerValueVal","baseLowerBound","baseUpperBound","len","ii","barBaseVal","barValueVal","largePathFindDataIndex","offsetX","offsetY","SeriesModel","createListFromArray","getInitialData","option","getSource","getMarkerPosition","value","coordSys","pt","clampData","offset","size","NaN","zlevel","z","legendHoverLink","barMinHeight","barMinAngle","progressive","progressiveChunkMode","emphasis","makeStyleMapper","excludes","getBorderLineDash","lineDash","getDefaultLabel","fixPosition","textPosition","normalStyle","labelModel","hoverLabelModel","setLabelStyle","labelFetcher","labelDataIndex","defaultText","isRectText","autoColor","visualSymbol","layoutPoints","effectType","showEffectOn","rippleEffect","period","brushType","symbolSize","SymbolDraw","EffectSymbol","matrix","pointsLayout","init","_symbolDraw","effectSymbolDraw","updateData","dirty","progress","start","end","count","updateLayout","_updateGroupTransform","getRoamTransform","transform","clone","decomposeTransform","createListSimply","radius","splitNumber","axisLine","show","lineStyle","splitLine","axisTick","axisLabel","distance","pointer","title","offsetCenter","fontSize","detail","backgroundColor","borderWidth","padding","PointerPath","ChartView","_number","parsePercent","round","linearMap","formatLabel","label","labelFormatter","replace","PI2","PI","colorList","posInfo","getWidth","getHeight","parsePosition","_renderMain","axisLineModel","lineStyleModel","angleRangeSpan","prevEndAngle","axisLineWidth","showAxis","silent","setStyle","getLineStyle","getColor","percent","tmp","_renderTicks","_renderPointer","_renderTitle","_renderDetail","minVal","maxVal","splitLineModel","tickModel","subSplitNumber","splitLineLen","tickLen","angle","step","subStep","splitLineStyle","tickLineStyle","unitX","cos","unitY","sin","Line","x1","y1","Text","setTextStyle","textVerticalAlign","textAlign","j","tickLine","valueExtent","angleExtent","valueDim","mapDimension","initProps","newIdx","oldIdx","pointerModel","titleModel","forceRich","detailModel","textWidth","isNaN","textHeight","mathCos","mathSin","createSymbol","Group","SymbolClz","updateRipplePath","rippleGroup","effectCfg","rippleEffectColor","eachChild","ripplePath","call","symbol","beforeUpdate","getScale","effectSymbolProto","stopEffectAnimation","childAt","startEffectAnimation","symbolType","strokeNoScale","z2","delay","effectOffset","animate","when","rippleScale","animateStyle","updateEffectAnimation","oldEffectCfg","_effectCfg","DIFFICULT_PROPS","propName","highlight","trigger","downplay","hostModel","isArray","normalizeSymbolSize","traverse","symbolOffset","pos","rotation","off","onEmphasis","onNormal","fadeOut","cb","inherits","IncrementalDisplayable","LargeSymbolPath","extendShape","symbolProxy","softClipShape","path","symbolProxyShape","getContext","contain","afterBrush","setTransform","fillRect","restoreTransform","findDataIndex","w","h","x0","y0","LargeSymbolDraw","largeSymbolProto","isPersistent","_incremental","opt","symbolEl","rectHover","cursor","_setCommon","child","startIndex","endIndex","byteOffset","Float32Array","buffer","incrementalPrepareUpdate","_clearIncremental","incrementalUpdate","taskParams","addDisplayable","isIncremental","Array","clipShape","setColor","extrudeShadow","visualColor","e","clearDisplaybles","seriesScope","symbolProto","getSymbolSize","slice","driftSymbol","drift","_createSymbol","keepAspect","symbolPath","culling","_symbolType","stopSymbolAnimation","toLastFrame","stopAnimation","getSymbolPath","setZ","setDraggable","draggable","isInit","_updateCommon","fadeIn","target","_seriesModel","normalStyleAccessPath","emphasisStyleAccessPath","normalLabelAccessPath","emphasisLabelAccessPath","highDownOnUpdate","fromState","toState","useHoverLayer","__symbolOriginalScale","ratio","emphasisOpt","animateTo","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","hoverItemStyle","symbolRotate","hoverAnimation","hasItemOption","elStyle","symbolInnerColor","liftZ","z2Origin","__z2Origin","useNameLabel","keepLabel","isObject","symbolCtor","_symbolCtor","symbolDrawProto","symbolNeedsDraw","isIgnore","normalizeUpdateOpt","makeSeriesScope","SymbolCtor","_seriesScope","updateIncrementalAndHover","isGroup","enableAnimation","createGridClipPath","cartesian","hasAnimation","createPolarClipPath","sectorArea","createDimensions","List","_util","nameList","coordDimensions","source","dimensionsInfo","list","initData","retrieveRawValue","labelDims","vals","val","push","join","dataSample","registerProcessor","PROCESSOR","STATISTIC","smooth","smoothMonotone","showSymbol","showAllSymbol","connectNulls","sampling","animationEasing","hoverLayerThreshold","lineAnimationDiff","modelUtil","_poly","Polyline","Polygon","_helper","prepareDataCoordInfo","getStackedOnPoint","_createClipPathFromCoordSys","isPointsSame","points1","points2","p1","p2","getSmooth","turnPointsIntoStep","stepTurnAt","baseIndex","stepPoints","nextPt","stepPt","middle","stepPt2","getIsIgnoreFunc","isAuto","categoryAxis","getAxesByScale","axisExtent","getExtent","availSize","dataLen","canShowAllSymbolForCategory","categoryDataDim","labelMap","getViewLabels","labelItem","tickValue","hasOwnProperty","createLineClipPath","rectShape","expandSize","lineGroup","symbolDraw","_lineGroup","areaStyleModel","mapArray","isCoordSysPolar","prevCoordSys","_coordSys","polyline","_polyline","polygon","_polygon","isAreaChart","isEmpty","valueOrigin","stackedOnPoints","dataCoordInfo","getStackedOnPoints","isIgnoreFunc","__temp","clipShapeForSymbol","r1","_step","_newPolygon","_stackedOnPoints","_points","_updateAnimation","_newPolyline","visualMetaList","coordDim","visualMeta","dimIndex","dimension","dimName","dimensions","dimInfo","getDimensionInfo","axis","getAxis","colorStops","map","stops","stop","toGlobalCoord","dataToCoord","stopLen","outerColors","reverse","minCoord","maxCoord","coordSpan","unshift","gradient","LinearGradient","getVisualGradient","lineJoin","stackedOnSeries","getCalculationInfo","stackedOnSmooth","getAreaStyle","_valueOrigin","queryDataIndex","ignore","current","stackedOnCurrent","next","stackedOnNext","__points","updatedDataInfo","diffStatus","status","cmd","idx1","ptIdx","animators","during","isDimensionStacked","stacked","valueAxis","getOtherAxis","valueStart","extent","getValueStart","baseAxisDim","valueAxisDim","baseDim","baseDataOffset","dims","stackResultDim","dataDimsForPoint","stackedOverDimension","stackedData","newData","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","diffResult","diffData","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","newDataOldCoordInfo","oldDataNewCoordInfo","diffItem","pointAdded","currentPt","getRawIndex","rawIndex","sort","a","b","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","vec2","fixClipWithShadow","vec2Min","vec2Max","scaleAndAdd","v2Copy","copy","v","cp0","cp1","isPointNull","p","drawSegment","segLen","allLen","dir","smoothMin","smoothMax","drawMono","apply","arguments","drawNonMono","prevIdx","k","prevP","ctrlLen","bezierCurveTo","nextIdx","nextP","ratioNextSeg","lenPrevSeg","lenNextSeg","sub","dist","getBoundingBox","smoothConstraint","ptMin","ptMax","brush","result","bbox","stackedOnBBox","closePath","mapSymbolLayout","mapVisual","mapDataStatistic","backwardCompat","createDataSelectAction","registerPreprocessor","_format","encodeHTML","addCommas","dataSelectableMixin","retrieveRawAttr","geoSourceManager","MapSeries","layoutMode","needsDrawMap","dataNameMap","createHashMap","selectTargetList","toAppendNames","set","geoSource","load","getMapType","nameMap","regions","region","updateSelectedMap","appendValues","getHostGeoModel","geoIndex","dependentModels","getRawValue","getRegionModel","regionName","indexOfName","formatTooltip","formattedValue","seriesNames","otherIndex","originalData","getTooltipPosition","getRegion","left","top","aspectScale","showLegendSymbol","dataRangeHoverLink","boundingCoords","scaleLimit","areaColor","mixin","MapDraw","HIGH_DOWN_PROP","RECORD_VERSION_PROP","mapModel","from","uid","id","mapDraw","_mapDraw","draw","getComponent","_renderSymbols","originalDataIndex","circle","Circle","Z2_EMPHASIS_LIFT","fullData","mainSeries","fullIndex","regionGroup","normalText","retrieve2","getFormattedLabel","emphasisText","highDownRecord","recordVersion","random","onRegionHighDown","enterRegionHighDown","toHighOrDown","extendFrom","useInsideStyle","__mapOriginalZ2","mapSeries","series","seriesOpt","mapType","mapLocation","seriesGroups","eachSeriesByType","hostGeoModel","key","seriesList","datas","statisticType","mapKey","sum","dataStatistics","setData","cloneShallow","processedMapType","mapSymbolOffsets","subMapSeries","setItemLayout","showLabel","dataColor","pieLayout","dataFilter","getPercentWithPrecision","PieSeries","extendSeriesModel","superApply","legendDataProvider","getRawData","_createSelectableList","_defaultLabelLine","mergeOption","newOption","superCall","targetList","getDataParams","valueList","$vars","defaultEmphasis","labelLineNormalOpt","labelLine","labelLineEmphasisOpt","minAngle","minShowLabelAngle","selectedOffset","hoverOffset","avoidLabelOverlap","percentPrecision","stillShowZeroSum","rotate","length2","animationType","animationTypeUpdate","updateDataSelected","dispatchAction","toggleItemSelected","midAngle","PiePiece","piePieceProto","firstCreate","labelText","sectorShape","withAnimation","_updateLabel","hoverIgnore","normalIgnore","labelLayout","targetLineShape","linePoints","targetTextStyle","origin","labelHoverModel","labelLineModel","labelLineHoverModel","inside","verticalAlign","sectorGroup","_sectorGroup","isFirstRender","onSectorClick","selectedMode","piePiece","s","bind","_createClipPath","containPoint","itemLayout","sqrt","textContain","RADIAN","adjustSingleSide","viewWidth","viewHeight","shiftDown","delta","shiftUp","changeX","isDownList","lastDeltaX","Number","MAX_VALUE","l","deltaY","len2","deltaX","lastY","upList","downList","isPositionCenter","labelLayoutList","hasLabelRotate","minShowLabelRadian","labelPosition","labelLineLen","labelLineLen2","textX","textY","isLabelInside","x3","labelRotate","font","getFont","textRect","getBoundingRect","leftList","rightList","avoidOverlap","validDataCount","getSum","unitRadian","roseType","getDataExtent","restAngle","valueSumLargerThanMinAngle","currentAngle","radarLayout","RadarSeries","generateCoord","generateCoordCount","indicatorAxes","getIndicatorAxes","radarIndex","symbolUtil","updateSymbols","oldPoints","newPoints","symbolGroup","__dimIdx","getInitialPoints","itemGroup","hoverAreaStyleModel","polygonIgnore","parentModel","hoverPolygonIgnore","itemHoverStyle","labelDimIndex","polarOptArr","polarNotRadar","polarOpt","indicator","radar","polarIndex","isValidPoint","getValueMissingPoint","axes","axisIndex","firstPoint","find","_updateSymbolDraw","_getClipShape","_finished","clipArea","retrieve","formatUtil","isRadianAroundZero","remRadian","matrixUtil","v2ApplyTransform","applyTransform","shouldShowAllLabels","AxisBuilder","axisModel","labelOffset","nameDirection","tickDirection","labelDirection","dumbGroup","_transform","_dumbGroup","constructor","hasBuilder","builders","getGroup","pt1","pt2","lineCap","anid","subPixelOptimize","strokeContainThreshold","arrows","arrowSize","arrowOffset","symbolWidth","symbolHeight","index","axisTickLabel","tickEls","axisBuilder","isBlank","ticksCoords","getTicksCoords","tickCoord","tickEl","buildAxisTick","labelEls","axisLabelShow","labelMargin","labels","labelRotation","innerTextLayout","rawCategoryData","getCategories","isLabelSilent","triggerEvent","formattedLabel","rawLabel","itemLabelModel","textStyle","textColor","getTextColor","textEl","textFill","eventData","makeAxisEventDataBase","targetType","buildAxisLabel","showMinLabel","showMaxLabel","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","fixMinMaxLabelShow","axisName","axisNameAvailableWidth","nameLocation","textStyleModel","gap","gapSignal","isNameLocationCenter","nameRotation","textRotate","rotationDiff","inverse","onLeft","endTextLayout","isFinite","textFont","truncateOpt","ellipsis","maxWidth","nameTruncateMaxWidth","truncatedText","truncateText","minChar","placeholder","tooltipOpt","formatterParams","componentIndex","__fullText","__truncatedText","tooltip","content","formatter","axisRotation","textRotation","direction","firstRect","nextRect","mRotationBack","identity","mul","getLocalTransform","intersect","axisPointerModelHelper","AxisView","extendComponentView","_axisPointer","axisPointerClass","fixValue","updateAxisPointer","force","axisPointer","disposeAxisPointer","axisView","forceRender","Clazz","getAxisPointerClass","axisPointerModel","getAxisPointerModel","axisPointerClazz","registerAxisPointerClass","clazz","cartesianAxisHelper","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","_axisGroup","gridModel","getCoordSysModel","groupTransition","_splitAreaColors","_splitLine","lineColors","gridRect","getRect","lineCount","colorIndex","_splitArea","splitAreaModel","areaColors","clamp","areaColorsLen","lastSplitAreaColors","newSplitAreaColors","cIndex","prev","areaStyle","axisTrigger","link","coordSysAxesInfo","collect","extendComponentModel","triggerOn","snap","triggerTooltip","animation","animationDurationUpdate","shadowStyle","precision","margin","handle","icon","globalListener","AxisPointerView","globalAxisPointerModel","globalTooltipModel","register","currTrigger","indexOf","unregister","getZr","_model","clazzUtil","eventTool","throttleUtil","inner","makeInner","BaseAxisPointer","moveAnimation","props","propsEqual","lastProps","newProps","equals","item","lastProp","updateLabelShowHide","labelEl","getHandleTransProps","trans","updateMandatoryProps","_group","_lastGraphicKey","_handle","_dragging","_lastValue","_lastStatus","_payloadInfo","animationThreshold","_axisModel","_axisPointerModel","_api","hide","elOption","makeElOption","graphicKey","clear","_moveAnimation","determineAnimation","doUpdateProps","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","_renderHandle","isCategoryAxis","useSnap","getBandWidth","seriesDataCount","getAxisInfo","pointerOption","pointerEl","updateHandleTransform","zr","handleModel","createIcon","onmousemove","onmousedown","_onHandleDragMove","ondragend","_onHandleDragEnd","handleSize","createOrUpdate","_moveHandleToValue","getHandleTransform","_doDispatchAxisPointer","payloadInfo","cursorPoint","tooltipOption","axesInfo","axisDim","doClear","buildLabel","xy","wh","xDimIndex","enableClassExtend","viewHelper","CartesianAxisPointer","grid","axisPointerType","otherExtent","getCartesian","getGlobalExtent","pixelValue","buildElStyle","pointerShapeBuilder","layoutInfo","model","buildCartesianSingleLabelElOption","labelInside","getTransformedPosition","currPosition","cursorOtherValue","align","line","makeLineShape","getAxisDimIndex","shadow","bandWidth","span","makeRectShape","modelHelper","findPointFromSeries","processOnAxis","axisInfo","newValue","updaters","dontSnap","outputFinder","containData","involveSeries","snapToValue","payloadBatch","minDist","minDiff","seriesModels","seriesNestestValue","dataIndices","dataDim","getAxisTooltipData","nestestValue","indicesOfNearest","dataIndexInside","buildPayloadsBySeries","showPointer","showTooltip","showValueMap","dataByCoordSys","coordSysModel","coordSysKey","makeKey","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","dataByAxis","axisType","axisId","valueLabelOpt","seriesDataIndices","makeMapperParam","illegalPoint","finder","isIllegalPoint","inputAxesInfo","shouldHide","coordSysMap","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","linkTriggers","tarAxisInfo","tarKey","linkGroup","srcAxisInfo","srcKey","srcValItem","mapper","parse","outputAxesInfo","valItem","useHandle","updateModelActually","sampleItem","escapeConnect","dispatchTooltipActually","lastHighlights","newHighlights","batchItem","toHighlight","toDownplay","batch","dispatchHighDownActually","getSeriesByIndex","getValues","env","onLeave","record","handler","doEnter","node","records","initialized","useHandler","eventType","dis","pendings","showTip","hideTip","pendingList","makeDispatchAction","actuallyPayload","showLen","hideLen","dispatchTooltipFinally","initGlobalListeners","checkPropInLink","linkPropValue","axisPropValue","isHandleTrigger","seriesInvolved","linksOption","linkGroups","getCoordinateSystems","axisPointerEnabled","axesInfoInCoordSys","baseTooltipModel","getAxes","saveTooltipAxisInfo","getTooltipAxes","triggerAxis","cross","tooltipAxes","baseAxes","otherAxes","fromTooltip","axisPointerShow","tooltipAxisPointerModel","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","crossStyle","makeAxisPointerModel","groupIndex","linkOption","getLinkGroupIndex","collectAxesInfo","eachSeries","seriesTooltipTrigger","seriesTooltipShow","collectSeriesInfo","axisHelper","buildLabelElOption","labelPos","getValueLabel","paddings","normalizeCssArray","confineInContainer","bgColor","textPadding","getLabel","getAxisRawValue","axisDimension","seriesData","idxItem","dataParams","isString","isFunction","create","translate","styleModel","textLayout","makeSectorShape","xAxis","yAxis","RoamController","roamHelper","onIrrelevantElement","getUID","getFixedItemStyle","updateMapSelected","mapOrGeoModel","regionsGroup","otherRegionEl","__regions","updateGroup","_controller","_controllerHost","_updateGroup","_mouseDownFlag","_mapName","_initialized","_regionsGroup","_backgroundGroup","fromView","isGeo","_updateBackground","_roamTransformable","_rawTransformable","itemStyleAccessPath","hoverItemStyleAccessPath","labelAccessPath","hoverLabelAccessPath","compoundPath","CompoundPath","segmentIgnoreThreshold","paths","dataIdx","regionModel","hoverItemStyleModel","transformPoint","geometries","geometry","exterior","interiors","interior","hoverShowLabel","isDataNaN","highDownSilentOnTouch","_updateController","action","updateMapSelectHandler","removeGraphic","mapName","makeGraphic","root","controller","controllerHost","enable","makeActionBase","updateViewOnPan","updateViewOnZoom","setPointerChecker","getViewRectAfterRoam","Eventful","interactionMutex","pointerChecker","_zr","_opt","mousedownHandler","mousedown","mousemoveHandler","mousemove","mouseupHandler","mouseup","mousewheelHandler","mousewheel","pinchHandler","pinch","controlType","disable","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","isDragging","isPinching","_pinching","isMiddleOrRightButtonOnMouseUpDown","_x","_y","isAvailableBehavior","gestureEvent","isTaken","oldX","oldY","newX","newY","shouldZoom","shouldMove","wheelDelta","absWheelDeltaDelta","factor","checkPointerAndTrigger","absDelta","scrollDelta","pinchScale","pinchX","pinchY","eventName","behaviorToCheck","contollerEvent","settings","setting","IRRELEVANT_EXCLUDES","targetCoordSysModel","getComponentByElement","topTarget","ATTR","getStore","take","resourceKey","userKey","release","store","_layout","getLayoutRect","layoutBox","box","positionElement","boxLayoutParams","getBoxLayoutParams","viewportSize","makeBackground","zoomDelta","zoomX","zoomY","newZoom","zoomScale","_targetList","_selectTargetMap","reduce","targetMap","select","unSelect","toggleSelected","legendFilter","Component","SERIES_FILTER","registerSubTypeDefaulter","isNameSpecified","langSelector","legend","selector","defaultSelectorOption","all","LegendModel","ignoreSize","mergeDefaultAndTheme","_updateSelector","merge","optionUpdated","_updateData","legendData","hasSelected","potentialData","availableNames","eachRawSeries","isPotential","seriesName","names","isSeriesFiltered","concat","_availableNames","rawData","dataItem","allSelect","inverseSelect","getOrient","orient","borderRadius","itemGap","itemWidth","itemHeight","inactiveColor","inactiveBorderColor","selectorLabel","fontFamily","selectorPosition","selectorItemGap","selectorButtonGap","layoutUtil","newlineDisabled","_contentGroup","_backgroundEl","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","legendModel","resetInner","itemAlign","renderInner","positionInfo","maxSize","mainRect","layoutInner","layoutRect","contentGroup","legendDrawnMap","selectMode","excludeSeriesId","getSeriesByName","legendSymbolType","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","newline","_createSelector","selectorGroup","selectorItem","onclick","emphasisLabelModel","createSelectorButton","symbolKeepAspect","legendModelItemStyle","itemIcon","tooltipModel","legendGlobalTooltipModel","legendSymbol","setSymbolStyle","legendSymbolCenter","hitRect","invisible","legendIndex","__legendDataIndex","contentRect","contentPos","selectorRect","selectorPos","orientIdx","hw","yx","dataName","storage","getDisplayList","legendSelectActionHandler","methodName","selectedMap","isToggleSelect","isItemSelected","legendModels","findComponents","filterSeries","radarModel","_buildAxes","_buildSplitLineAndArea","axisBuilders","indicatorAxis","showSplitLine","showSplitArea","splitLineColors","splitAreaColors","splitLines","splitAreas","ticksRadius","getColorIndex","Ring","realSplitNumber","axesTicksPoints","coordToPoint","prevPoints","mergePath","areaOrLine","areaOrLineColorList","subtext","subtarget","fontWeight","subtextStyle","subtextStyleModel","disableBox","subText","subTextEl","sublink","window","open","groupRect","layoutOption","alignStyle","zrColor","eventUtil","toCamelCase","vendors","assembleCssText","cssText","transitionDuration","duration","transitionText","vendorPrefix","assembleTransition","canvasSupported","toHex","borderName","camelCase","assembleFont","TooltipContent","container","wxa","document","createElement","appendChild","_container","_show","_hideTimeout","self","onmouseenter","_enterable","clearTimeout","_inContent","normalizeEvent","dispatch","onmouseleave","hideLater","_hideDelay","stl","currentStyle","defaultView","getComputedStyle","domStyle","display","innerHTML","pointerEvents","setContent","setEnterable","enterable","getSize","clientWidth","clientHeight","viewportRootOffset","painter","getViewportRootOffset","offsetLeft","offsetTop","time","setTimeout","isShow","getOuterSize","parseInt","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","showContent","alwaysShowContent","displayMode","renderMode","confine","showDelay","hideDelay","extraCssText","animationEasingUpdate","TooltipRichContent","markerRich","markers","startId","endId","substr","textBorderRadius","textBackgroundColor","textOffset","rich","textLineHeight","bounding","numberUtil","axisPointerViewHelper","getTooltipRenderMode","proxyRect","tooltipContent","_renderMode","getDom","_newLine","_tooltipContent","_tooltipModel","_ecModel","_lastDataByCoordSys","_alwaysShowContent","_initGlobalListener","_keepShow","_tryShow","_hide","_lastX","_lastY","_refreshUpdateTimeout","isDisposed","manuallyShowTip","_ticket","_manuallyAxisShowTip","pointInfo","findHover","manuallyHideTip","buildTooltipModel","_showAxisTooltip","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","_showTimout","singleDefaultHTML","singleParamsList","singleTooltipModel","newLine","itemCoordSys","axisValue","seriesDefaultHTML","valueLabel","axisValueLabel","html","seriesTooltip","newMarkers","firstLine","positionExpr","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","undefined","dataModel","dataType","tooltipTrigger","defaultHtml","asyncTicket","subTooltipModel","formatTpl","callback","cbTicket","contentSize","vAlign","viewSize","domWidth","domHeight","rectWidth","rectHeight","calcTooltipPosition","gapH","gapV","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","newIdxItem","modelCascade","resultModel","pop","isInstance","vector","BoundingRect","Transformable","TransformDummy","View","_center","_zoom","doConvert","setBoundingRect","_rect","setViewRect","transformTo","_viewRect","rawTransform","calculateTransform","_updateTransform","centerCoord","_updateCenterAndZoom","getDefaultCenter","rawRect","rawTransformMatrix","roamTransform","defaultCenter","roamTransformable","rawTransformable","_rawTransform","invTransform","invert","getViewRect","noRoam","out","convertToPixel","convertFromPixel","nameRotate","nameTruncate","nameTextStyle","nameGap","onZero","onZeroAxisIndex","splitArea","axisDefault","boundaryGap","deduplication","alignWithLabel","interval","timeAxis","logAxis","logBase","ComponentModel","getLayoutParams","mergeLayoutParam","OrdinalMeta","AXIS_TYPES","BaseAxisModelClass","axisTypeDefaulter","extraDefaultOption","inputPositionParams","themeModel","getTheme","getDefaultOption","__ordinalMeta","createByAxisModel","categories","getOrdinalMeta","mergeAll","Axis","Axis2D","coordExtent","getAxesOnZeroOf","asc","ret","coordToData","toLocalCoord","axisModelCreator","axisModelCommonMixin","AxisModel","resetRange","restoreData","queryComponents","gridIndex","gridId","getAxisType","extraOption","dimAxisMapper","_axes","Cartesian","_dimList","scaleType","toLowerCase","filter","addAxis","_dataCoordConvert","input","dimList","output","Cartesian2D","axisX","axisY","reserved","xScale","yScale","xAxisExtent","yAxisExtent","xExtent","yExtent","_axisHelper","createScaleByModel","ifAxisCrossZero","niceScaleExtent","estimateLabelUnionRect","CoordinateSystem","getStackedDimension","isAxisUsedInTheGrid","Grid","_coordsMap","_coordsList","_axesMap","_axesList","_initCartesian","gridProto","fixAxisOnZero","axesMap","otherAxisDim","onZeroRecords","otherAxisOnZeroOf","canOnZeroToAxis","getOnZeroRecordKey","_updateScale","resize","ignoreContainLabel","axesList","adjustAxes","setExtent","coordBase","axisExtentSum","updateAxisTransform","labelUnionRect","axesMapOnDim","xAxisIndex","yAxisIndex","coordList","getCartesians","_findConvertTarget","xAxisModel","getReferringComponents","yAxisModel","coordsList","axisPositionUsed","right","bottom","axesCount","createAxisCreator","axisPosition","isCategory","unionExtent","unionExtentFromData","isCartesian2D","axesModels","findAxesModels","otherAxis","axesTypes","grids","containLabel","rawAxisPosition","rectBound","axisOffset","posBound","onZeroCoord","Geo","invertLongitute","_nameCoordMap","nameCoordMap","_regionsMap","regionsMap","_invertLongitute","boundingRect","geoModel","containCoord","getRegionByCoord","addGeoCoord","geoCoord","getGeoCoord","geoCoordMap","cp","Region","coordsOffsetMap","coordFix","mapDataStorage","resizeGeo","leftTop","rightBottom","boxLayoutOption","aspect","useCenterAndSize","viewRect","setGeoCoords","geoCreator","geoList","mapRecords","retrieveMap","mapModelGroupBySeries","nameMapList","singleMapSeries","getFilledRegions","originRegionArr","regionsArr","registerCoordinateSystem","parseGeoJson","fixNanhai","fixTextCoord","fixGeoCoord","fixDiaoyuIsland","mapRecord","parsed","specialAreas","geoJSON","Error","message","specialArea","regionRect","union","_parseSVG","parseSVG","makeViewBoxTransform","assert","originRoot","buildGraphic","hostKey","rootMap","originRootHostKey","removeKey","svgXML","ignoreViewBox","ignoreRootClip","svgWidth","svgHeight","viewBoxRect","viewBoxTransform","elRoot","plain","geoJSONLoader","geoSVGLoader","loaders","svg","singleSource","makeInvoker","results","IndicatorAxis","radiusExtent","IntervalScale","getScaleExtent","LogScale","Radar","_indicatorAxes","getIndicatorModels","indicatorModel","indicatorIndex","closestAxis","radian","atan2","minRadianDiff","closestAxisIdx","radarSeries","increaseInterval","exp10","pow","floor","log","LN10","f","rawExtent","fixedMin","getMin","fixedMax","getMax","getInterval","setInterval","getTicks","halfSplitNumber","radarList","valueAxisDefault","defaultsShow","showName","nameFormatter","indicatorModels","indicatorOpt","iNameTextStyle","indName","createRenderPlanner","plan","isLargeRender","dimLen","segCount","tmpIn","tmpOut","setLayout","filterSelf","samplers","average","frame","nearest","indexSampler","modifyOutputEnd","sampler","rate","downSample","dr","rCenter","unitStartX","unitStartY","unitEndX","unitEndY","arc","getTargetSeries","paletteScope","seiresModelMap","__paletteScope","dataAll","idxMap","rawIdx","filteredIdx","singleDataColor","singleDataBorderColor","setItemVisual","getColorFromPalette","defaultSymbolType","performRawSeries","hasSymbolTypeCallback","hasSymbolSizeCallback","hasCallback","seriesSymbol","seriesSymbolSize","dataEach","rawValue","itemSymbolType","itemSymbolSize","itemSymbolKeepAspect"],"mappings":"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","file":"static/js/npm.echarts.71e3f88a.chunk.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType, actionInfos) {\n  zrUtil.each(actionInfos, function (actionInfo) {\n    actionInfo.update = 'updateView';\n    /**\n     * @payload\n     * @property {string} seriesName\n     * @property {string} name\n     */\n\n    echarts.registerAction(actionInfo, function (payload, ecModel) {\n      var selected = {};\n      ecModel.eachComponent({\n        mainType: 'series',\n        subType: seriesType,\n        query: payload\n      }, function (seriesModel) {\n        if (seriesModel[actionInfo.method]) {\n          seriesModel[actionInfo.method](payload.name, payload.dataIndex);\n        }\n\n        var data = seriesModel.getData(); // Create selected map\n\n        data.each(function (idx) {\n          var name = data.getName(idx);\n          selected[name] = seriesModel.isSelected(name) || false;\n        });\n      });\n      return {\n        name: payload.name,\n        selected: selected,\n        seriesId: payload.seriesId\n      };\n    });\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _roamHelper = require(\"./roamHelper\");\n\nvar updateCenterAndZoom = _roamHelper.updateCenterAndZoom;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @payload\n * @property {string} [componentType=series]\n * @property {number} [dx]\n * @property {number} [dy]\n * @property {number} [zoom]\n * @property {number} [originX]\n * @property {number} [originY]\n */\necharts.registerAction({\n  type: 'geoRoam',\n  event: 'geoRoam',\n  update: 'updateTransform'\n}, function (payload, ecModel) {\n  var componentType = payload.componentType || 'series';\n  ecModel.eachComponent({\n    mainType: componentType,\n    query: payload\n  }, function (componentModel) {\n    var geo = componentModel.coordinateSystem;\n\n    if (geo.type !== 'geo') {\n      return;\n    }\n\n    var res = updateCenterAndZoom(geo, payload, componentModel.get('scaleLimit'));\n    componentModel.setCenter && componentModel.setCenter(res.center);\n    componentModel.setZoom && componentModel.setZoom(res.zoom); // All map series with same `map` use the same geo coordinate system\n    // So the center and zoom must be in sync. Include the series not selected by legend\n\n    if (componentType === 'series') {\n      zrUtil.each(componentModel.seriesGroup, function (seriesModel) {\n        seriesModel.setCenter(res.center);\n        seriesModel.setZoom(res.zoom);\n      });\n    }\n  });\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/coord/View} view\n * @param {Object} payload\n * @param {Object} [zoomLimit]\n */\nfunction updateCenterAndZoom(view, payload, zoomLimit) {\n  var previousZoom = view.getZoom();\n  var center = view.getCenter();\n  var zoom = payload.zoom;\n  var point = view.dataToPoint(center);\n\n  if (payload.dx != null && payload.dy != null) {\n    point[0] -= payload.dx;\n    point[1] -= payload.dy;\n    var center = view.pointToData(point);\n    view.setCenter(center);\n  }\n\n  if (zoom != null) {\n    if (zoomLimit) {\n      var zoomMin = zoomLimit.min || 0;\n      var zoomMax = zoomLimit.max || Infinity;\n      zoom = Math.max(Math.min(previousZoom * zoom, zoomMax), zoomMin) / previousZoom;\n    } // Zoom on given point(originX, originY)\n\n\n    view.scale[0] *= zoom;\n    view.scale[1] *= zoom;\n    var position = view.position;\n    var fixX = (payload.originX - position[0]) * (zoom - 1);\n    var fixY = (payload.originY - position[1]) * (zoom - 1);\n    position[0] -= fixX;\n    position[1] -= fixY;\n    view.updateTransform(); // Get the new center\n\n    var center = view.pointToData(point);\n    view.setCenter(center);\n    view.setZoom(zoom * previousZoom);\n  }\n\n  return {\n    center: view.getCenter(),\n    zoom: view.getZoom()\n  };\n}\n\nexports.updateCenterAndZoom = updateCenterAndZoom;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _barGrid = require(\"../layout/barGrid\");\n\nvar layout = _barGrid.layout;\nvar largeLayout = _barGrid.largeLayout;\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./bar/BarSeries\");\n\nrequire(\"./bar/BarView\");\n\nrequire(\"../component/gridSimple\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// In case developer forget to include grid component\necharts.registerLayout(echarts.PRIORITY.VISUAL.LAYOUT, zrUtil.curry(layout, 'bar')); // Use higher prority to avoid to be blocked by other overall layout, which do not\n// only exist in this module, but probably also exist in other modules, like `barPolar`.\n\necharts.registerLayout(echarts.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, largeLayout);\necharts.registerVisual({\n  seriesType: 'bar',\n  reset: function (seriesModel) {\n    // Visual coding for legend\n    seriesModel.getData().setVisual('legendSymbol', 'roundRect');\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BaseBarSeries = require(\"./BaseBarSeries\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = BaseBarSeries.extend({\n  type: 'series.bar',\n  dependencies: ['grid', 'polar'],\n  brushSelector: 'rect',\n\n  /**\n   * @override\n   */\n  getProgressive: function () {\n    // Do not support progressive in normal mode.\n    return this.get('large') ? this.get('progressive') : false;\n  },\n\n  /**\n   * @override\n   */\n  getProgressiveThreshold: function () {\n    // Do not support progressive in normal mode.\n    var progressiveThreshold = this.get('progressiveThreshold');\n    var largeThreshold = this.get('largeThreshold');\n\n    if (largeThreshold > progressiveThreshold) {\n      progressiveThreshold = largeThreshold;\n    }\n\n    return progressiveThreshold;\n  },\n  defaultOption: {\n    // If clipped\n    // Only available on cartesian2d\n    clip: true,\n    // If use caps on two sides of bars\n    // Only available on tangential polar bar\n    roundCap: false\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _helper = require(\"./helper\");\n\nvar setLabel = _helper.setLabel;\n\nvar Model = require(\"../../model/Model\");\n\nvar barItemStyle = require(\"./barItemStyle\");\n\nvar Path = require(\"zrender/lib/graphic/Path\");\n\nvar _throttle = require(\"../../util/throttle\");\n\nvar throttle = _throttle.throttle;\n\nvar _createClipPathFromCoordSys = require(\"../helper/createClipPathFromCoordSys\");\n\nvar createClipPath = _createClipPathFromCoordSys.createClipPath;\n\nvar Sausage = require(\"../../util/shape/sausage\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'barBorderWidth'];\nvar _eventPos = [0, 0]; // FIXME\n// Just for compatible with ec2.\n\nzrUtil.extend(Model.prototype, barItemStyle);\n\nfunction getClipArea(coord, data) {\n  var coordSysClipArea = coord.getArea && coord.getArea();\n\n  if (coord.type === 'cartesian2d') {\n    var baseAxis = coord.getBaseAxis(); // When boundaryGap is false or using time axis. bar may exceed the grid.\n    // We should not clip this part.\n    // See test/bar2.html\n\n    if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n      var expandWidth = data.getLayout('bandWidth');\n\n      if (baseAxis.isHorizontal()) {\n        coordSysClipArea.x -= expandWidth;\n        coordSysClipArea.width += expandWidth * 2;\n      } else {\n        coordSysClipArea.y -= expandWidth;\n        coordSysClipArea.height += expandWidth * 2;\n      }\n    }\n  }\n\n  return coordSysClipArea;\n}\n\nvar _default = echarts.extendChartView({\n  type: 'bar',\n  render: function (seriesModel, ecModel, api) {\n    this._updateDrawMode(seriesModel);\n\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\n\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n      this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api);\n    } else {}\n\n    return this.group;\n  },\n  incrementalPrepareRender: function (seriesModel, ecModel, api) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel);\n  },\n  incrementalRender: function (params, seriesModel, ecModel, api) {\n    // Do not support progressive in normal mode.\n    this._incrementalRenderLarge(params, seriesModel);\n  },\n  _updateDrawMode: function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw ^ this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  },\n  _renderNormal: function (seriesModel, ecModel, api) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coord = seriesModel.coordinateSystem;\n    var baseAxis = coord.getBaseAxis();\n    var isHorizontalOrRadial;\n\n    if (coord.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n    } else if (coord.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n    }\n\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n    var needsClip = seriesModel.get('clip', true);\n    var coordSysClipArea = getClipArea(coord, data); // If there is clipPath created in large mode. Remove it.\n\n    group.removeClipPath(); // We don't use clipPath in normal mode because we needs a perfect animation\n    // And don't want the label are clipped.\n\n    var roundCap = seriesModel.get('roundCap', true);\n    data.diff(oldData).add(function (dataIndex) {\n      if (!data.hasValue(dataIndex)) {\n        return;\n      }\n\n      var itemModel = data.getItemModel(dataIndex);\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\n\n      if (needsClip) {\n        // Clip will modify the layout params.\n        // And return a boolean to determine if the shape are fully clipped.\n        var isClipped = clip[coord.type](coordSysClipArea, layout);\n\n        if (isClipped) {\n          group.remove(el);\n          return;\n        }\n      }\n\n      var el = elementCreator[coord.type](dataIndex, layout, isHorizontalOrRadial, animationModel, false, roundCap);\n      data.setItemGraphicEl(dataIndex, el);\n      group.add(el);\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n    }).update(function (newIndex, oldIndex) {\n      var el = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex)) {\n        group.remove(el);\n        return;\n      }\n\n      var itemModel = data.getItemModel(newIndex);\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\n\n      if (needsClip) {\n        var isClipped = clip[coord.type](coordSysClipArea, layout);\n\n        if (isClipped) {\n          group.remove(el);\n          return;\n        }\n      }\n\n      if (el) {\n        graphic.updateProps(el, {\n          shape: layout\n        }, animationModel, newIndex);\n      } else {\n        el = elementCreator[coord.type](newIndex, layout, isHorizontalOrRadial, animationModel, true, roundCap);\n      }\n\n      data.setItemGraphicEl(newIndex, el); // Add back\n\n      group.add(el);\n      updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n    }).remove(function (dataIndex) {\n      var el = oldData.getItemGraphicEl(dataIndex);\n\n      if (coord.type === 'cartesian2d') {\n        el && removeRect(dataIndex, animationModel, el);\n      } else {\n        el && removeSector(dataIndex, animationModel, el);\n      }\n    }).execute();\n    this._data = data;\n  },\n  _renderLarge: function (seriesModel, ecModel, api) {\n    this._clear();\n\n    createLarge(seriesModel, this.group); // Use clipPath in large mode.\n\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  },\n  _incrementalRenderLarge: function (params, seriesModel) {\n    createLarge(seriesModel, this.group, true);\n  },\n  dispose: zrUtil.noop,\n  remove: function (ecModel) {\n    this._clear(ecModel);\n  },\n  _clear: function (ecModel) {\n    var group = this.group;\n    var data = this._data;\n\n    if (ecModel && ecModel.get('animation') && data && !this._isLargeDraw) {\n      data.eachItemGraphicEl(function (el) {\n        if (el.type === 'sector') {\n          removeSector(el.dataIndex, ecModel, el);\n        } else {\n          removeRect(el.dataIndex, ecModel, el);\n        }\n      });\n    } else {\n      group.removeAll();\n    }\n\n    this._data = null;\n  }\n});\n\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar clip = {\n  cartesian2d: function (coordSysBoundingRect, layout) {\n    var signWidth = layout.width < 0 ? -1 : 1;\n    var signHeight = layout.height < 0 ? -1 : 1; // Needs positive width and height\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    var x = mathMax(layout.x, coordSysBoundingRect.x);\n    var x2 = mathMin(layout.x + layout.width, coordSysBoundingRect.x + coordSysBoundingRect.width);\n    var y = mathMax(layout.y, coordSysBoundingRect.y);\n    var y2 = mathMin(layout.y + layout.height, coordSysBoundingRect.y + coordSysBoundingRect.height);\n    layout.x = x;\n    layout.y = y;\n    layout.width = x2 - x;\n    layout.height = y2 - y;\n    var clipped = layout.width < 0 || layout.height < 0; // Reverse back\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    return clipped;\n  },\n  polar: function (coordSysClipArea) {\n    return false;\n  }\n};\nvar elementCreator = {\n  cartesian2d: function (dataIndex, layout, isHorizontal, animationModel, isUpdate) {\n    var rect = new graphic.Rect({\n      shape: zrUtil.extend({}, layout)\n    }); // Animation\n\n    if (animationModel) {\n      var rectShape = rect.shape;\n      var animateProperty = isHorizontal ? 'height' : 'width';\n      var animateTarget = {};\n      rectShape[animateProperty] = 0;\n      animateTarget[animateProperty] = layout[animateProperty];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](rect, {\n        shape: animateTarget\n      }, animationModel, dataIndex);\n    }\n\n    return rect;\n  },\n  polar: function (dataIndex, layout, isRadial, animationModel, isUpdate, roundCap) {\n    // Keep the same logic with bar in catesion: use end value to control\n    // direction. Notice that if clockwise is true (by default), the sector\n    // will always draw clockwisely, no matter whether endAngle is greater\n    // or less than startAngle.\n    var clockwise = layout.startAngle < layout.endAngle;\n    var ShapeClass = !isRadial && roundCap ? Sausage : graphic.Sector;\n    var sector = new ShapeClass({\n      shape: zrUtil.defaults({\n        clockwise: clockwise\n      }, layout)\n    }); // Animation\n\n    if (animationModel) {\n      var sectorShape = sector.shape;\n      var animateProperty = isRadial ? 'r' : 'endAngle';\n      var animateTarget = {};\n      sectorShape[animateProperty] = isRadial ? 0 : layout.startAngle;\n      animateTarget[animateProperty] = layout[animateProperty];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](sector, {\n        shape: animateTarget\n      }, animationModel, dataIndex);\n    }\n\n    return sector;\n  }\n};\n\nfunction removeRect(dataIndex, animationModel, el) {\n  // Not show text when animating\n  el.style.text = null;\n  graphic.updateProps(el, {\n    shape: {\n      width: 0\n    }\n  }, animationModel, dataIndex, function () {\n    el.parent && el.parent.remove(el);\n  });\n}\n\nfunction removeSector(dataIndex, animationModel, el) {\n  // Not show text when animating\n  el.style.text = null;\n  graphic.updateProps(el, {\n    shape: {\n      r: el.shape.r0\n    }\n  }, animationModel, dataIndex, function () {\n    el.parent && el.parent.remove(el);\n  });\n}\n\nvar getLayout = {\n  cartesian2d: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    var fixedLineWidth = getLineWidth(itemModel, layout); // fix layout with lineWidth\n\n    var signX = layout.width > 0 ? 1 : -1;\n    var signY = layout.height > 0 ? 1 : -1;\n    return {\n      x: layout.x + signX * fixedLineWidth / 2,\n      y: layout.y + signY * fixedLineWidth / 2,\n      width: layout.width - signX * fixedLineWidth,\n      height: layout.height - signY * fixedLineWidth\n    };\n  },\n  polar: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    return {\n      cx: layout.cx,\n      cy: layout.cy,\n      r0: layout.r0,\n      r: layout.r,\n      startAngle: layout.startAngle,\n      endAngle: layout.endAngle\n    };\n  }\n};\n\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontal, isPolar) {\n  var color = data.getItemVisual(dataIndex, 'color');\n  var opacity = data.getItemVisual(dataIndex, 'opacity');\n  var itemStyleModel = itemModel.getModel('itemStyle');\n  var hoverStyle = itemModel.getModel('emphasis.itemStyle').getBarItemStyle();\n\n  if (!isPolar) {\n    el.setShape('r', itemStyleModel.get('barBorderRadius') || 0);\n  }\n\n  el.useStyle(zrUtil.defaults({\n    fill: color,\n    opacity: opacity\n  }, itemStyleModel.getBarItemStyle()));\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && el.attr('cursor', cursorStyle);\n  var labelPositionOutside = isHorizontal ? layout.height > 0 ? 'bottom' : 'top' : layout.width > 0 ? 'left' : 'right';\n\n  if (!isPolar) {\n    setLabel(el.style, hoverStyle, itemModel, color, seriesModel, dataIndex, labelPositionOutside);\n  }\n\n  graphic.setHoverStyle(el, hoverStyle);\n} // In case width or height are too small.\n\n\nfunction getLineWidth(itemModel, rawLayout) {\n  var lineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\n  return Math.min(lineWidth, Math.abs(rawLayout.width), Math.abs(rawLayout.height));\n}\n\nvar LargePath = Path.extend({\n  type: 'largeBar',\n  shape: {\n    points: []\n  },\n  buildPath: function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    var startPoint = this.__startPoint;\n    var baseDimIdx = this.__baseDimIdx;\n\n    for (var i = 0; i < points.length; i += 2) {\n      startPoint[baseDimIdx] = points[i + baseDimIdx];\n      ctx.moveTo(startPoint[0], startPoint[1]);\n      ctx.lineTo(points[i], points[i + 1]);\n    }\n  }\n});\n\nfunction createLarge(seriesModel, group, incremental) {\n  // TODO support polar\n  var data = seriesModel.getData();\n  var startPoint = [];\n  var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n  startPoint[1 - baseDimIdx] = data.getLayout('valueAxisStart');\n  var el = new LargePath({\n    shape: {\n      points: data.getLayout('largePoints')\n    },\n    incremental: !!incremental,\n    __startPoint: startPoint,\n    __baseDimIdx: baseDimIdx,\n    __largeDataIndices: data.getLayout('largeDataIndices'),\n    __barWidth: data.getLayout('barWidth')\n  });\n  group.add(el);\n  setLargeStyle(el, seriesModel, data); // Enable tooltip and user mouse/touch event handlers.\n\n  el.seriesIndex = seriesModel.seriesIndex;\n\n  if (!seriesModel.get('silent')) {\n    el.on('mousedown', largePathUpdateDataIndex);\n    el.on('mousemove', largePathUpdateDataIndex);\n  }\n} // Use throttle to avoid frequently traverse to find dataIndex.\n\n\nvar largePathUpdateDataIndex = throttle(function (event) {\n  var largePath = this;\n  var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n  largePath.dataIndex = dataIndex >= 0 ? dataIndex : null;\n}, 30, false);\n\nfunction largePathFindDataIndex(largePath, x, y) {\n  var baseDimIdx = largePath.__baseDimIdx;\n  var valueDimIdx = 1 - baseDimIdx;\n  var points = largePath.shape.points;\n  var largeDataIndices = largePath.__largeDataIndices;\n  var barWidthHalf = Math.abs(largePath.__barWidth / 2);\n  var startValueVal = largePath.__startPoint[valueDimIdx];\n  _eventPos[0] = x;\n  _eventPos[1] = y;\n  var pointerBaseVal = _eventPos[baseDimIdx];\n  var pointerValueVal = _eventPos[1 - baseDimIdx];\n  var baseLowerBound = pointerBaseVal - barWidthHalf;\n  var baseUpperBound = pointerBaseVal + barWidthHalf;\n\n  for (var i = 0, len = points.length / 2; i < len; i++) {\n    var ii = i * 2;\n    var barBaseVal = points[ii + baseDimIdx];\n    var barValueVal = points[ii + valueDimIdx];\n\n    if (barBaseVal >= baseLowerBound && barBaseVal <= baseUpperBound && (startValueVal <= barValueVal ? pointerValueVal >= startValueVal && pointerValueVal <= barValueVal : pointerValueVal >= barValueVal && pointerValueVal <= startValueVal)) {\n      return largeDataIndices[i];\n    }\n  }\n\n  return -1;\n}\n\nfunction setLargeStyle(el, seriesModel, data) {\n  var borderColor = data.getVisual('borderColor') || data.getVisual('color');\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(['color', 'borderColor']);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n  el.style.lineWidth = data.getLayout('barWidth');\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = SeriesModel.extend({\n  type: 'series.__base_bar__',\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(this.getSource(), this);\n  },\n  getMarkerPosition: function (value) {\n    var coordSys = this.coordinateSystem;\n\n    if (coordSys) {\n      // PENDING if clamp ?\n      var pt = coordSys.dataToPoint(coordSys.clampData(value));\n      var data = this.getData();\n      var offset = data.getLayout('offset');\n      var size = data.getLayout('size');\n      var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n      pt[offsetIndex] += offset + size / 2;\n      return pt;\n    }\n\n    return [NaN, NaN];\n  },\n  defaultOption: {\n    zlevel: 0,\n    // \n    z: 2,\n    // \n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // stack: null\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // 0\n    barMinHeight: 0,\n    // 0\n    barMinAngle: 0,\n    // cursor: null,\n    large: false,\n    largeThreshold: 400,\n    progressive: 3e3,\n    progressiveChunkMode: 'mod',\n    // barMaxWidth: null,\n    // In cartesian, the default value is 1. Otherwise null.\n    // barMinWidth: null,\n    // \n    // barWidth: null,\n    // 30%\n    // barGap: '30%',\n    // 20%\n    // barCategoryGap: '20%',\n    // label: {\n    //      show: false\n    // },\n    itemStyle: {},\n    emphasis: {}\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar makeStyleMapper = require(\"../../model/mixin/makeStyleMapper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar getBarItemStyle = makeStyleMapper([['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], // Compatitable with 2\n['stroke', 'barBorderColor'], ['lineWidth', 'barBorderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']]);\nvar _default = {\n  getBarItemStyle: function (excludes) {\n    var style = getBarItemStyle(this, excludes);\n\n    if (this.getBorderLineDash) {\n      var lineDash = this.getBorderLineDash();\n      lineDash && (style.lineDash = lineDash);\n    }\n\n    return style;\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _labelHelper = require(\"../helper/labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction setLabel(normalStyle, hoverStyle, itemModel, color, seriesModel, dataIndex, labelPositionOutside) {\n  var labelModel = itemModel.getModel('label');\n  var hoverLabelModel = itemModel.getModel('emphasis.label');\n  graphic.setLabelStyle(normalStyle, hoverStyle, labelModel, hoverLabelModel, {\n    labelFetcher: seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n    isRectText: true,\n    autoColor: color\n  });\n  fixPosition(normalStyle);\n  fixPosition(hoverStyle);\n}\n\nfunction fixPosition(style, labelPositionOutside) {\n  if (style.textPosition === 'outside') {\n    style.textPosition = labelPositionOutside;\n  }\n}\n\nexports.setLabel = setLabel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./effectScatter/EffectScatterSeries\");\n\nrequire(\"./effectScatter/EffectScatterView\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar layoutPoints = require(\"../layout/points\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\necharts.registerVisual(visualSymbol('effectScatter', 'circle'));\necharts.registerLayout(layoutPoints('effectScatter'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = SeriesModel.extend({\n  type: 'series.effectScatter',\n  dependencies: ['grid', 'polar'],\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(this.getSource(), this);\n  },\n  brushSelector: 'point',\n  defaultOption: {\n    coordinateSystem: 'cartesian2d',\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    effectType: 'ripple',\n    progressive: 0,\n    // When to show the effect, option: 'render'|'emphasis'\n    showEffectOn: 'render',\n    // Ripple effect config\n    rippleEffect: {\n      period: 4,\n      // Scale of ripple\n      scale: 2.5,\n      // Brush type can be fill or stroke\n      brushType: 'fill'\n    },\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // symbol: null,        // \n    symbolSize: 10 // symbolSize * 2\n    // symbolRotate: null,  // \n    // large: false,\n    // Available when large is true\n    // largeThreshold: 2000,\n    // itemStyle: {\n    //     opacity: 1\n    // }\n\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar SymbolDraw = require(\"../helper/SymbolDraw\");\n\nvar EffectSymbol = require(\"../helper/EffectSymbol\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar pointsLayout = require(\"../../layout/points\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendChartView({\n  type: 'effectScatter',\n  init: function () {\n    this._symbolDraw = new SymbolDraw(EffectSymbol);\n  },\n  render: function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var effectSymbolDraw = this._symbolDraw;\n    effectSymbolDraw.updateData(data);\n    this.group.add(effectSymbolDraw.group);\n  },\n  updateTransform: function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    this.group.dirty();\n    var res = pointsLayout().reset(seriesModel);\n\n    if (res.progress) {\n      res.progress({\n        start: 0,\n        end: data.count()\n      }, data);\n    }\n\n    this._symbolDraw.updateLayout(data);\n  },\n  _updateGroupTransform: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.getRoamTransform) {\n      this.group.transform = matrix.clone(coordSys.getRoamTransform());\n      this.group.decomposeTransform();\n    }\n  },\n  remove: function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(api);\n  },\n  dispose: function () {}\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./gauge/GaugeSeries\");\n\nrequire(\"./gauge/GaugeView\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar createListSimply = require(\"../helper/createListSimply\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar GaugeSeries = SeriesModel.extend({\n  type: 'series.gauge',\n  getInitialData: function (option, ecModel) {\n    return createListSimply(this, ['value']);\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    // \n    center: ['50%', '50%'],\n    legendHoverLink: true,\n    radius: '75%',\n    startAngle: 225,\n    endAngle: -45,\n    clockwise: true,\n    // \n    min: 0,\n    // \n    max: 100,\n    // 10\n    splitNumber: 10,\n    // \n    axisLine: {\n      // show\n      show: true,\n      lineStyle: {\n        // lineStyle\n        color: [[0.2, '#91c7ae'], [0.8, '#63869e'], [1, '#c23531']],\n        width: 30\n      }\n    },\n    // \n    splitLine: {\n      // show\n      show: true,\n      // length\n      length: 30,\n      // lineStylelineStyle\n      lineStyle: {\n        color: '#eee',\n        width: 2,\n        type: 'solid'\n      }\n    },\n    // \n    axisTick: {\n      // show\n      show: true,\n      // split\n      splitNumber: 5,\n      // length\n      length: 8,\n      // lineStyle\n      lineStyle: {\n        color: '#eee',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    axisLabel: {\n      show: true,\n      distance: 5,\n      // formatter: null,\n      color: 'auto'\n    },\n    pointer: {\n      show: true,\n      length: '80%',\n      width: 8\n    },\n    itemStyle: {\n      color: 'auto'\n    },\n    title: {\n      show: true,\n      // x, ypx\n      offsetCenter: [0, '-40%'],\n      // TEXTSTYLE\n      color: '#333',\n      fontSize: 15\n    },\n    detail: {\n      show: true,\n      backgroundColor: 'rgba(0,0,0,0)',\n      borderWidth: 0,\n      borderColor: '#ccc',\n      width: 100,\n      height: null,\n      // self-adaption\n      padding: [5, 10],\n      // x, ypx\n      offsetCenter: [0, '40%'],\n      // formatter: null,\n      // TEXTSTYLE\n      color: 'auto',\n      fontSize: 30\n    }\n  }\n});\nvar _default = GaugeSeries;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar PointerPath = require(\"./PointerPath\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar ChartView = require(\"../../view/Chart\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar round = _number.round;\nvar linearMap = _number.linearMap;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction parsePosition(seriesModel, api) {\n  var center = seriesModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  var size = Math.min(width, height);\n  var cx = parsePercent(center[0], api.getWidth());\n  var cy = parsePercent(center[1], api.getHeight());\n  var r = parsePercent(seriesModel.get('radius'), size / 2);\n  return {\n    cx: cx,\n    cy: cy,\n    r: r\n  };\n}\n\nfunction formatLabel(label, labelFormatter) {\n  if (labelFormatter) {\n    if (typeof labelFormatter === 'string') {\n      label = labelFormatter.replace('{value}', label != null ? label : '');\n    } else if (typeof labelFormatter === 'function') {\n      label = labelFormatter(label);\n    }\n  }\n\n  return label;\n}\n\nvar PI2 = Math.PI * 2;\nvar GaugeView = ChartView.extend({\n  type: 'gauge',\n  render: function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n    var colorList = seriesModel.get('axisLine.lineStyle.color');\n    var posInfo = parsePosition(seriesModel, api);\n\n    this._renderMain(seriesModel, ecModel, api, colorList, posInfo);\n  },\n  dispose: function () {},\n  _renderMain: function (seriesModel, ecModel, api, colorList, posInfo) {\n    var group = this.group;\n    var axisLineModel = seriesModel.getModel('axisLine');\n    var lineStyleModel = axisLineModel.getModel('lineStyle');\n    var clockwise = seriesModel.get('clockwise');\n    var startAngle = -seriesModel.get('startAngle') / 180 * Math.PI;\n    var endAngle = -seriesModel.get('endAngle') / 180 * Math.PI;\n    var angleRangeSpan = (endAngle - startAngle) % PI2;\n    var prevEndAngle = startAngle;\n    var axisLineWidth = lineStyleModel.get('width');\n    var showAxis = axisLineModel.get('show');\n\n    for (var i = 0; showAxis && i < colorList.length; i++) {\n      // Clamp\n      var percent = Math.min(Math.max(colorList[i][0], 0), 1);\n      var endAngle = startAngle + angleRangeSpan * percent;\n      var sector = new graphic.Sector({\n        shape: {\n          startAngle: prevEndAngle,\n          endAngle: endAngle,\n          cx: posInfo.cx,\n          cy: posInfo.cy,\n          clockwise: clockwise,\n          r0: posInfo.r - axisLineWidth,\n          r: posInfo.r\n        },\n        silent: true\n      });\n      sector.setStyle({\n        fill: colorList[i][1]\n      });\n      sector.setStyle(lineStyleModel.getLineStyle( // Because we use sector to simulate arc\n      // so the properties for stroking are useless\n      ['color', 'borderWidth', 'borderColor']));\n      group.add(sector);\n      prevEndAngle = endAngle;\n    }\n\n    var getColor = function (percent) {\n      // Less than 0\n      if (percent <= 0) {\n        return colorList[0][1];\n      }\n\n      for (var i = 0; i < colorList.length; i++) {\n        if (colorList[i][0] >= percent && (i === 0 ? 0 : colorList[i - 1][0]) < percent) {\n          return colorList[i][1];\n        }\n      } // More than 1\n\n\n      return colorList[i - 1][1];\n    };\n\n    if (!clockwise) {\n      var tmp = startAngle;\n      startAngle = endAngle;\n      endAngle = tmp;\n    }\n\n    this._renderTicks(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise);\n\n    this._renderPointer(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise);\n\n    this._renderTitle(seriesModel, ecModel, api, getColor, posInfo);\n\n    this._renderDetail(seriesModel, ecModel, api, getColor, posInfo);\n  },\n  _renderTicks: function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise) {\n    var group = this.group;\n    var cx = posInfo.cx;\n    var cy = posInfo.cy;\n    var r = posInfo.r;\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var splitLineModel = seriesModel.getModel('splitLine');\n    var tickModel = seriesModel.getModel('axisTick');\n    var labelModel = seriesModel.getModel('axisLabel');\n    var splitNumber = seriesModel.get('splitNumber');\n    var subSplitNumber = tickModel.get('splitNumber');\n    var splitLineLen = parsePercent(splitLineModel.get('length'), r);\n    var tickLen = parsePercent(tickModel.get('length'), r);\n    var angle = startAngle;\n    var step = (endAngle - startAngle) / splitNumber;\n    var subStep = step / subSplitNumber;\n    var splitLineStyle = splitLineModel.getModel('lineStyle').getLineStyle();\n    var tickLineStyle = tickModel.getModel('lineStyle').getLineStyle();\n\n    for (var i = 0; i <= splitNumber; i++) {\n      var unitX = Math.cos(angle);\n      var unitY = Math.sin(angle); // Split line\n\n      if (splitLineModel.get('show')) {\n        var splitLine = new graphic.Line({\n          shape: {\n            x1: unitX * r + cx,\n            y1: unitY * r + cy,\n            x2: unitX * (r - splitLineLen) + cx,\n            y2: unitY * (r - splitLineLen) + cy\n          },\n          style: splitLineStyle,\n          silent: true\n        });\n\n        if (splitLineStyle.stroke === 'auto') {\n          splitLine.setStyle({\n            stroke: getColor(i / splitNumber)\n          });\n        }\n\n        group.add(splitLine);\n      } // Label\n\n\n      if (labelModel.get('show')) {\n        var label = formatLabel(round(i / splitNumber * (maxVal - minVal) + minVal), labelModel.get('formatter'));\n        var distance = labelModel.get('distance');\n        var autoColor = getColor(i / splitNumber);\n        group.add(new graphic.Text({\n          style: graphic.setTextStyle({}, labelModel, {\n            text: label,\n            x: unitX * (r - splitLineLen - distance) + cx,\n            y: unitY * (r - splitLineLen - distance) + cy,\n            textVerticalAlign: unitY < -0.4 ? 'top' : unitY > 0.4 ? 'bottom' : 'middle',\n            textAlign: unitX < -0.4 ? 'left' : unitX > 0.4 ? 'right' : 'center'\n          }, {\n            autoColor: autoColor\n          }),\n          silent: true\n        }));\n      } // Axis tick\n\n\n      if (tickModel.get('show') && i !== splitNumber) {\n        for (var j = 0; j <= subSplitNumber; j++) {\n          var unitX = Math.cos(angle);\n          var unitY = Math.sin(angle);\n          var tickLine = new graphic.Line({\n            shape: {\n              x1: unitX * r + cx,\n              y1: unitY * r + cy,\n              x2: unitX * (r - tickLen) + cx,\n              y2: unitY * (r - tickLen) + cy\n            },\n            silent: true,\n            style: tickLineStyle\n          });\n\n          if (tickLineStyle.stroke === 'auto') {\n            tickLine.setStyle({\n              stroke: getColor((i + j / subSplitNumber) / splitNumber)\n            });\n          }\n\n          group.add(tickLine);\n          angle += subStep;\n        }\n\n        angle -= subStep;\n      } else {\n        angle += step;\n      }\n    }\n  },\n  _renderPointer: function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise) {\n    var group = this.group;\n    var oldData = this._data;\n\n    if (!seriesModel.get('pointer.show')) {\n      // Remove old element\n      oldData && oldData.eachItemGraphicEl(function (el) {\n        group.remove(el);\n      });\n      return;\n    }\n\n    var valueExtent = [+seriesModel.get('min'), +seriesModel.get('max')];\n    var angleExtent = [startAngle, endAngle];\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    data.diff(oldData).add(function (idx) {\n      var pointer = new PointerPath({\n        shape: {\n          angle: startAngle\n        }\n      });\n      graphic.initProps(pointer, {\n        shape: {\n          angle: linearMap(data.get(valueDim, idx), valueExtent, angleExtent, true)\n        }\n      }, seriesModel);\n      group.add(pointer);\n      data.setItemGraphicEl(idx, pointer);\n    }).update(function (newIdx, oldIdx) {\n      var pointer = oldData.getItemGraphicEl(oldIdx);\n      graphic.updateProps(pointer, {\n        shape: {\n          angle: linearMap(data.get(valueDim, newIdx), valueExtent, angleExtent, true)\n        }\n      }, seriesModel);\n      group.add(pointer);\n      data.setItemGraphicEl(newIdx, pointer);\n    }).remove(function (idx) {\n      var pointer = oldData.getItemGraphicEl(idx);\n      group.remove(pointer);\n    }).execute();\n    data.eachItemGraphicEl(function (pointer, idx) {\n      var itemModel = data.getItemModel(idx);\n      var pointerModel = itemModel.getModel('pointer');\n      pointer.setShape({\n        x: posInfo.cx,\n        y: posInfo.cy,\n        width: parsePercent(pointerModel.get('width'), posInfo.r),\n        r: parsePercent(pointerModel.get('length'), posInfo.r)\n      });\n      pointer.useStyle(itemModel.getModel('itemStyle').getItemStyle());\n\n      if (pointer.style.fill === 'auto') {\n        pointer.setStyle('fill', getColor(linearMap(data.get(valueDim, idx), valueExtent, [0, 1], true)));\n      }\n\n      graphic.setHoverStyle(pointer, itemModel.getModel('emphasis.itemStyle').getItemStyle());\n    });\n    this._data = data;\n  },\n  _renderTitle: function (seriesModel, ecModel, api, getColor, posInfo) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var titleModel = seriesModel.getModel('title');\n\n    if (titleModel.get('show')) {\n      var offsetCenter = titleModel.get('offsetCenter');\n      var x = posInfo.cx + parsePercent(offsetCenter[0], posInfo.r);\n      var y = posInfo.cy + parsePercent(offsetCenter[1], posInfo.r);\n      var minVal = +seriesModel.get('min');\n      var maxVal = +seriesModel.get('max');\n      var value = seriesModel.getData().get(valueDim, 0);\n      var autoColor = getColor(linearMap(value, [minVal, maxVal], [0, 1], true));\n      this.group.add(new graphic.Text({\n        silent: true,\n        style: graphic.setTextStyle({}, titleModel, {\n          x: x,\n          y: y,\n          // FIXME First data name ?\n          text: data.getName(0),\n          textAlign: 'center',\n          textVerticalAlign: 'middle'\n        }, {\n          autoColor: autoColor,\n          forceRich: true\n        })\n      }));\n    }\n  },\n  _renderDetail: function (seriesModel, ecModel, api, getColor, posInfo) {\n    var detailModel = seriesModel.getModel('detail');\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n\n    if (detailModel.get('show')) {\n      var offsetCenter = detailModel.get('offsetCenter');\n      var x = posInfo.cx + parsePercent(offsetCenter[0], posInfo.r);\n      var y = posInfo.cy + parsePercent(offsetCenter[1], posInfo.r);\n      var width = parsePercent(detailModel.get('width'), posInfo.r);\n      var height = parsePercent(detailModel.get('height'), posInfo.r);\n      var data = seriesModel.getData();\n      var value = data.get(data.mapDimension('value'), 0);\n      var autoColor = getColor(linearMap(value, [minVal, maxVal], [0, 1], true));\n      this.group.add(new graphic.Text({\n        silent: true,\n        style: graphic.setTextStyle({}, detailModel, {\n          x: x,\n          y: y,\n          text: formatLabel( // FIXME First data name ?\n          value, detailModel.get('formatter')),\n          textWidth: isNaN(width) ? null : width,\n          textHeight: isNaN(height) ? null : height,\n          textAlign: 'center',\n          textVerticalAlign: 'middle'\n        }, {\n          autoColor: autoColor,\n          forceRich: true\n        })\n      }));\n    }\n  }\n});\nvar _default = GaugeView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Path = require(\"zrender/lib/graphic/Path\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = Path.extend({\n  type: 'echartsGaugePointer',\n  shape: {\n    angle: 0,\n    width: 10,\n    r: 10,\n    x: 0,\n    y: 0\n  },\n  buildPath: function (ctx, shape) {\n    var mathCos = Math.cos;\n    var mathSin = Math.sin;\n    var r = shape.r;\n    var width = shape.width;\n    var angle = shape.angle;\n    var x = shape.x - mathCos(angle) * width * (width >= r / 3 ? 1 : 2);\n    var y = shape.y - mathSin(angle) * width * (width >= r / 3 ? 1 : 2);\n    angle = shape.angle - Math.PI / 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(shape.x + mathCos(angle) * width, shape.y + mathSin(angle) * width);\n    ctx.lineTo(shape.x + mathCos(shape.angle) * r, shape.y + mathSin(shape.angle) * r);\n    ctx.lineTo(shape.x - mathCos(angle) * width, shape.y - mathSin(angle) * width);\n    ctx.lineTo(x, y);\n    return;\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar _graphic = require(\"../../util/graphic\");\n\nvar Group = _graphic.Group;\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar SymbolClz = require(\"./Symbol\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Symbol with ripple effect\n * @module echarts/chart/helper/EffectSymbol\n */\nvar EFFECT_RIPPLE_NUMBER = 3;\n\nfunction normalizeSymbolSize(symbolSize) {\n  if (!zrUtil.isArray(symbolSize)) {\n    symbolSize = [+symbolSize, +symbolSize];\n  }\n\n  return symbolSize;\n}\n\nfunction updateRipplePath(rippleGroup, effectCfg) {\n  var color = effectCfg.rippleEffectColor || effectCfg.color;\n  rippleGroup.eachChild(function (ripplePath) {\n    ripplePath.attr({\n      z: effectCfg.z,\n      zlevel: effectCfg.zlevel,\n      style: {\n        stroke: effectCfg.brushType === 'stroke' ? color : null,\n        fill: effectCfg.brushType === 'fill' ? color : null\n      }\n    });\n  });\n}\n/**\n * @constructor\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @extends {module:zrender/graphic/Group}\n */\n\n\nfunction EffectSymbol(data, idx) {\n  Group.call(this);\n  var symbol = new SymbolClz(data, idx);\n  var rippleGroup = new Group();\n  this.add(symbol);\n  this.add(rippleGroup);\n\n  rippleGroup.beforeUpdate = function () {\n    this.attr(symbol.getScale());\n  };\n\n  this.updateData(data, idx);\n}\n\nvar effectSymbolProto = EffectSymbol.prototype;\n\neffectSymbolProto.stopEffectAnimation = function () {\n  this.childAt(1).removeAll();\n};\n\neffectSymbolProto.startEffectAnimation = function (effectCfg) {\n  var symbolType = effectCfg.symbolType;\n  var color = effectCfg.color;\n  var rippleGroup = this.childAt(1);\n\n  for (var i = 0; i < EFFECT_RIPPLE_NUMBER; i++) {\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4136.\n    var ripplePath = createSymbol(symbolType, -1, -1, 2, 2, color);\n    ripplePath.attr({\n      style: {\n        strokeNoScale: true\n      },\n      z2: 99,\n      silent: true,\n      scale: [0.5, 0.5]\n    });\n    var delay = -i / EFFECT_RIPPLE_NUMBER * effectCfg.period + effectCfg.effectOffset; // TODO Configurable effectCfg.period\n\n    ripplePath.animate('', true).when(effectCfg.period, {\n      scale: [effectCfg.rippleScale / 2, effectCfg.rippleScale / 2]\n    }).delay(delay).start();\n    ripplePath.animateStyle(true).when(effectCfg.period, {\n      opacity: 0\n    }).delay(delay).start();\n    rippleGroup.add(ripplePath);\n  }\n\n  updateRipplePath(rippleGroup, effectCfg);\n};\n/**\n * Update effect symbol\n */\n\n\neffectSymbolProto.updateEffectAnimation = function (effectCfg) {\n  var oldEffectCfg = this._effectCfg;\n  var rippleGroup = this.childAt(1); // Must reinitialize effect if following configuration changed\n\n  var DIFFICULT_PROPS = ['symbolType', 'period', 'rippleScale'];\n\n  for (var i = 0; i < DIFFICULT_PROPS.length; i++) {\n    var propName = DIFFICULT_PROPS[i];\n\n    if (oldEffectCfg[propName] !== effectCfg[propName]) {\n      this.stopEffectAnimation();\n      this.startEffectAnimation(effectCfg);\n      return;\n    }\n  }\n\n  updateRipplePath(rippleGroup, effectCfg);\n};\n/**\n * Highlight symbol\n */\n\n\neffectSymbolProto.highlight = function () {\n  this.trigger('emphasis');\n};\n/**\n * Downplay symbol\n */\n\n\neffectSymbolProto.downplay = function () {\n  this.trigger('normal');\n};\n/**\n * Update symbol properties\n * @param  {module:echarts/data/List} data\n * @param  {number} idx\n */\n\n\neffectSymbolProto.updateData = function (data, idx) {\n  var seriesModel = data.hostModel;\n  this.childAt(0).updateData(data, idx);\n  var rippleGroup = this.childAt(1);\n  var itemModel = data.getItemModel(idx);\n  var symbolType = data.getItemVisual(idx, 'symbol');\n  var symbolSize = normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n  var color = data.getItemVisual(idx, 'color');\n  rippleGroup.attr('scale', symbolSize);\n  rippleGroup.traverse(function (ripplePath) {\n    ripplePath.attr({\n      fill: color\n    });\n  });\n  var symbolOffset = itemModel.getShallow('symbolOffset');\n\n  if (symbolOffset) {\n    var pos = rippleGroup.position;\n    pos[0] = parsePercent(symbolOffset[0], symbolSize[0]);\n    pos[1] = parsePercent(symbolOffset[1], symbolSize[1]);\n  }\n\n  rippleGroup.rotation = (itemModel.getShallow('symbolRotate') || 0) * Math.PI / 180 || 0;\n  var effectCfg = {};\n  effectCfg.showEffectOn = seriesModel.get('showEffectOn');\n  effectCfg.rippleScale = itemModel.get('rippleEffect.scale');\n  effectCfg.brushType = itemModel.get('rippleEffect.brushType');\n  effectCfg.period = itemModel.get('rippleEffect.period') * 1000;\n  effectCfg.effectOffset = idx / data.count();\n  effectCfg.z = itemModel.getShallow('z') || 0;\n  effectCfg.zlevel = itemModel.getShallow('zlevel') || 0;\n  effectCfg.symbolType = symbolType;\n  effectCfg.color = color;\n  effectCfg.rippleEffectColor = itemModel.get('rippleEffect.color');\n  this.off('mouseover').off('mouseout').off('emphasis').off('normal');\n\n  if (effectCfg.showEffectOn === 'render') {\n    this._effectCfg ? this.updateEffectAnimation(effectCfg) : this.startEffectAnimation(effectCfg);\n    this._effectCfg = effectCfg;\n  } else {\n    // Not keep old effect config\n    this._effectCfg = null;\n    this.stopEffectAnimation();\n    var symbol = this.childAt(0);\n\n    var onEmphasis = function () {\n      symbol.highlight();\n\n      if (effectCfg.showEffectOn !== 'render') {\n        this.startEffectAnimation(effectCfg);\n      }\n    };\n\n    var onNormal = function () {\n      symbol.downplay();\n\n      if (effectCfg.showEffectOn !== 'render') {\n        this.stopEffectAnimation();\n      }\n    };\n\n    this.on('mouseover', onEmphasis, this).on('mouseout', onNormal, this).on('emphasis', onEmphasis, this).on('normal', onNormal, this);\n  }\n\n  this._effectCfg = effectCfg;\n};\n\neffectSymbolProto.fadeOut = function (cb) {\n  this.off('mouseover').off('mouseout').off('emphasis').off('normal');\n  cb && cb();\n};\n\nzrUtil.inherits(EffectSymbol, Group);\nvar _default = EffectSymbol;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar IncrementalDisplayable = require(\"zrender/lib/graphic/IncrementalDisplayable\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\n// TODO Batch by color\nvar BOOST_SIZE_THRESHOLD = 4;\nvar LargeSymbolPath = graphic.extendShape({\n  shape: {\n    points: null\n  },\n  symbolProxy: null,\n  softClipShape: null,\n  buildPath: function (path, shape) {\n    var points = shape.points;\n    var size = shape.size;\n    var symbolProxy = this.symbolProxy;\n    var symbolProxyShape = symbolProxy.shape;\n    var ctx = path.getContext ? path.getContext() : path;\n    var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD; // Do draw in afterBrush.\n\n    if (canBoost) {\n      return;\n    }\n\n    for (var i = 0; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (this.softClipShape && !this.softClipShape.contain(x, y)) {\n        continue;\n      }\n\n      symbolProxyShape.x = x - size[0] / 2;\n      symbolProxyShape.y = y - size[1] / 2;\n      symbolProxyShape.width = size[0];\n      symbolProxyShape.height = size[1];\n      symbolProxy.buildPath(path, symbolProxyShape, true);\n    }\n  },\n  afterBrush: function (ctx) {\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var canBoost = size[0] < BOOST_SIZE_THRESHOLD;\n\n    if (!canBoost) {\n      return;\n    }\n\n    this.setTransform(ctx); // PENDING If style or other canvas status changed?\n\n    for (var i = 0; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (this.softClipShape && !this.softClipShape.contain(x, y)) {\n        continue;\n      } // fillRect is faster than building a rect path and draw.\n      // And it support light globalCompositeOperation.\n\n\n      ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\n    }\n\n    this.restoreTransform(ctx);\n  },\n  findDataIndex: function (x, y) {\n    // TODO ???\n    // Consider transform\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var w = Math.max(size[0], 4);\n    var h = Math.max(size[1], 4); // Not consider transform\n    // Treat each element as a rect\n    // top down traverse\n\n    for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\n      var i = idx * 2;\n      var x0 = points[i] - w / 2;\n      var y0 = points[i + 1] - h / 2;\n\n      if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\n        return idx;\n      }\n    }\n\n    return -1;\n  }\n});\n\nfunction LargeSymbolDraw() {\n  this.group = new graphic.Group();\n}\n\nvar largeSymbolProto = LargeSymbolDraw.prototype;\n\nlargeSymbolProto.isPersistent = function () {\n  return !this._incremental;\n};\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Object} opt\n * @param {Object} [opt.clipShape]\n */\n\n\nlargeSymbolProto.updateData = function (data, opt) {\n  this.group.removeAll();\n  var symbolEl = new LargeSymbolPath({\n    rectHover: true,\n    cursor: 'default'\n  });\n  symbolEl.setShape({\n    points: data.getLayout('symbolPoints')\n  });\n\n  this._setCommon(symbolEl, data, false, opt);\n\n  this.group.add(symbolEl);\n  this._incremental = null;\n};\n\nlargeSymbolProto.updateLayout = function (data) {\n  if (this._incremental) {\n    return;\n  }\n\n  var points = data.getLayout('symbolPoints');\n  this.group.eachChild(function (child) {\n    if (child.startIndex != null) {\n      var len = (child.endIndex - child.startIndex) * 2;\n      var byteOffset = child.startIndex * 4 * 2;\n      points = new Float32Array(points.buffer, byteOffset, len);\n    }\n\n    child.setShape('points', points);\n  });\n};\n\nlargeSymbolProto.incrementalPrepareUpdate = function (data) {\n  this.group.removeAll();\n\n  this._clearIncremental(); // Only use incremental displayables when data amount is larger than 2 million.\n  // PENDING Incremental data?\n\n\n  if (data.count() > 2e6) {\n    if (!this._incremental) {\n      this._incremental = new IncrementalDisplayable({\n        silent: true\n      });\n    }\n\n    this.group.add(this._incremental);\n  } else {\n    this._incremental = null;\n  }\n};\n\nlargeSymbolProto.incrementalUpdate = function (taskParams, data, opt) {\n  var symbolEl;\n\n  if (this._incremental) {\n    symbolEl = new LargeSymbolPath();\n\n    this._incremental.addDisplayable(symbolEl, true);\n  } else {\n    symbolEl = new LargeSymbolPath({\n      rectHover: true,\n      cursor: 'default',\n      startIndex: taskParams.start,\n      endIndex: taskParams.end\n    });\n    symbolEl.incremental = true;\n    this.group.add(symbolEl);\n  }\n\n  symbolEl.setShape({\n    points: data.getLayout('symbolPoints')\n  });\n\n  this._setCommon(symbolEl, data, !!this._incremental, opt);\n};\n\nlargeSymbolProto._setCommon = function (symbolEl, data, isIncremental, opt) {\n  var hostModel = data.hostModel;\n  opt = opt || {}; // TODO\n  // if (data.hasItemVisual.symbolSize) {\n  //     // TODO typed array?\n  //     symbolEl.setShape('sizes', data.mapArray(\n  //         function (idx) {\n  //             var size = data.getItemVisual(idx, 'symbolSize');\n  //             return (size instanceof Array) ? size : [size, size];\n  //         }\n  //     ));\n  // }\n  // else {\n\n  var size = data.getVisual('symbolSize');\n  symbolEl.setShape('size', size instanceof Array ? size : [size, size]); // }\n\n  symbolEl.softClipShape = opt.clipShape || null; // Create symbolProxy to build path for each data\n\n  symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0); // Use symbolProxy setColor method\n\n  symbolEl.setColor = symbolEl.symbolProxy.setColor;\n  var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\n  symbolEl.useStyle( // Draw shadow when doing fillRect is extremely slow.\n  hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\n  var visualColor = data.getVisual('color');\n\n  if (visualColor) {\n    symbolEl.setColor(visualColor);\n  }\n\n  if (!isIncremental) {\n    // Enable tooltip\n    // PENDING May have performance issue when path is extremely large\n    symbolEl.seriesIndex = hostModel.seriesIndex;\n    symbolEl.on('mousemove', function (e) {\n      symbolEl.dataIndex = null;\n      var dataIndex = symbolEl.findDataIndex(e.offsetX, e.offsetY);\n\n      if (dataIndex >= 0) {\n        // Provide dataIndex for tooltip\n        symbolEl.dataIndex = dataIndex + (symbolEl.startIndex || 0);\n      }\n    });\n  }\n};\n\nlargeSymbolProto.remove = function () {\n  this._clearIncremental();\n\n  this._incremental = null;\n  this.group.removeAll();\n};\n\nlargeSymbolProto._clearIncremental = function () {\n  var incremental = this._incremental;\n\n  if (incremental) {\n    incremental.clearDisplaybles();\n  }\n};\n\nvar _default = LargeSymbolDraw;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _labelHelper = require(\"./labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/Symbol\n */\n\n/**\n * @constructor\n * @alias {module:echarts/chart/helper/Symbol}\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @extends {module:zrender/graphic/Group}\n */\nfunction SymbolClz(data, idx, seriesScope) {\n  graphic.Group.call(this);\n  this.updateData(data, idx, seriesScope);\n}\n\nvar symbolProto = SymbolClz.prototype;\n/**\n * @public\n * @static\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @return {Array.<number>} [width, height]\n */\n\nvar getSymbolSize = SymbolClz.getSymbolSize = function (data, idx) {\n  var symbolSize = data.getItemVisual(idx, 'symbolSize');\n  return symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\n};\n\nfunction getScale(symbolSize) {\n  return [symbolSize[0] / 2, symbolSize[1] / 2];\n}\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nsymbolProto._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n  // Remove paths created before\n  this.removeAll();\n  var color = data.getItemVisual(idx, 'color'); // var symbolPath = createSymbol(\n  //     symbolType, -0.5, -0.5, 1, 1, color\n  // );\n  // If width/height are set too small (e.g., set to 1) on ios10\n  // and macOS Sierra, a circle stroke become a rect, no matter what\n  // the scale is set. So we set width/height as 2. See #4150.\n\n  var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, color, keepAspect);\n  symbolPath.attr({\n    z2: 100,\n    culling: true,\n    scale: getScale(symbolSize)\n  }); // Rewrite drift method\n\n  symbolPath.drift = driftSymbol;\n  this._symbolType = symbolType;\n  this.add(symbolPath);\n};\n/**\n * Stop animation\n * @param {boolean} toLastFrame\n */\n\n\nsymbolProto.stopSymbolAnimation = function (toLastFrame) {\n  this.childAt(0).stopAnimation(toLastFrame);\n};\n/**\n * FIXME:\n * Caution: This method breaks the encapsulation of this module,\n * but it indeed brings convenience. So do not use the method\n * unless you detailedly know all the implements of `Symbol`,\n * especially animation.\n *\n * Get symbol path element.\n */\n\n\nsymbolProto.getSymbolPath = function () {\n  return this.childAt(0);\n};\n/**\n * Get scale(aka, current symbol size).\n * Including the change caused by animation\n */\n\n\nsymbolProto.getScale = function () {\n  return this.childAt(0).scale;\n};\n/**\n * Highlight symbol\n */\n\n\nsymbolProto.highlight = function () {\n  this.childAt(0).trigger('emphasis');\n};\n/**\n * Downplay symbol\n */\n\n\nsymbolProto.downplay = function () {\n  this.childAt(0).trigger('normal');\n};\n/**\n * @param {number} zlevel\n * @param {number} z\n */\n\n\nsymbolProto.setZ = function (zlevel, z) {\n  var symbolPath = this.childAt(0);\n  symbolPath.zlevel = zlevel;\n  symbolPath.z = z;\n};\n\nsymbolProto.setDraggable = function (draggable) {\n  var symbolPath = this.childAt(0);\n  symbolPath.draggable = draggable;\n  symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\n};\n/**\n * Update symbol properties\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Object} [seriesScope]\n * @param {Object} [seriesScope.itemStyle]\n * @param {Object} [seriesScope.hoverItemStyle]\n * @param {Object} [seriesScope.symbolRotate]\n * @param {Object} [seriesScope.symbolOffset]\n * @param {module:echarts/model/Model} [seriesScope.labelModel]\n * @param {module:echarts/model/Model} [seriesScope.hoverLabelModel]\n * @param {boolean} [seriesScope.hoverAnimation]\n * @param {Object} [seriesScope.cursorStyle]\n * @param {module:echarts/model/Model} [seriesScope.itemModel]\n * @param {string} [seriesScope.symbolInnerColor]\n * @param {Object} [seriesScope.fadeIn=false]\n */\n\n\nsymbolProto.updateData = function (data, idx, seriesScope) {\n  this.silent = false;\n  var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n  var seriesModel = data.hostModel;\n  var symbolSize = getSymbolSize(data, idx);\n  var isInit = symbolType !== this._symbolType;\n\n  if (isInit) {\n    var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n    this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n  } else {\n    var symbolPath = this.childAt(0);\n    symbolPath.silent = false;\n    graphic.updateProps(symbolPath, {\n      scale: getScale(symbolSize)\n    }, seriesModel, idx);\n  }\n\n  this._updateCommon(data, idx, symbolSize, seriesScope);\n\n  if (isInit) {\n    var symbolPath = this.childAt(0);\n    var fadeIn = seriesScope && seriesScope.fadeIn;\n    var target = {\n      scale: symbolPath.scale.slice()\n    };\n    fadeIn && (target.style = {\n      opacity: symbolPath.style.opacity\n    });\n    symbolPath.scale = [0, 0];\n    fadeIn && (symbolPath.style.opacity = 0);\n    graphic.initProps(symbolPath, target, seriesModel, idx);\n  }\n\n  this._seriesModel = seriesModel;\n}; // Update common properties\n\n\nvar normalStyleAccessPath = ['itemStyle'];\nvar emphasisStyleAccessPath = ['emphasis', 'itemStyle'];\nvar normalLabelAccessPath = ['label'];\nvar emphasisLabelAccessPath = ['emphasis', 'label'];\n/**\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Array.<number>} symbolSize\n * @param {Object} [seriesScope]\n */\n\nsymbolProto._updateCommon = function (data, idx, symbolSize, seriesScope) {\n  var symbolPath = this.childAt(0);\n  var seriesModel = data.hostModel;\n  var color = data.getItemVisual(idx, 'color'); // Reset style\n\n  if (symbolPath.type !== 'image') {\n    symbolPath.useStyle({\n      strokeNoScale: true\n    });\n  } else {\n    symbolPath.setStyle({\n      opacity: null,\n      shadowBlur: null,\n      shadowOffsetX: null,\n      shadowOffsetY: null,\n      shadowColor: null\n    });\n  }\n\n  var itemStyle = seriesScope && seriesScope.itemStyle;\n  var hoverItemStyle = seriesScope && seriesScope.hoverItemStyle;\n  var symbolRotate = seriesScope && seriesScope.symbolRotate;\n  var symbolOffset = seriesScope && seriesScope.symbolOffset;\n  var labelModel = seriesScope && seriesScope.labelModel;\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel;\n  var hoverAnimation = seriesScope && seriesScope.hoverAnimation;\n  var cursorStyle = seriesScope && seriesScope.cursorStyle;\n\n  if (!seriesScope || data.hasItemOption) {\n    var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx); // Color must be excluded.\n    // Because symbol provide setColor individually to set fill and stroke\n\n    itemStyle = itemModel.getModel(normalStyleAccessPath).getItemStyle(['color']);\n    hoverItemStyle = itemModel.getModel(emphasisStyleAccessPath).getItemStyle();\n    symbolRotate = itemModel.getShallow('symbolRotate');\n    symbolOffset = itemModel.getShallow('symbolOffset');\n    labelModel = itemModel.getModel(normalLabelAccessPath);\n    hoverLabelModel = itemModel.getModel(emphasisLabelAccessPath);\n    hoverAnimation = itemModel.getShallow('hoverAnimation');\n    cursorStyle = itemModel.getShallow('cursor');\n  } else {\n    hoverItemStyle = zrUtil.extend({}, hoverItemStyle);\n  }\n\n  var elStyle = symbolPath.style;\n  symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n\n  if (symbolOffset) {\n    symbolPath.attr('position', [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])]);\n  }\n\n  cursorStyle && symbolPath.attr('cursor', cursorStyle); // PENDING setColor before setStyle!!!\n\n  symbolPath.setColor(color, seriesScope && seriesScope.symbolInnerColor);\n  symbolPath.setStyle(itemStyle);\n  var opacity = data.getItemVisual(idx, 'opacity');\n\n  if (opacity != null) {\n    elStyle.opacity = opacity;\n  }\n\n  var liftZ = data.getItemVisual(idx, 'liftZ');\n  var z2Origin = symbolPath.__z2Origin;\n\n  if (liftZ != null) {\n    if (z2Origin == null) {\n      symbolPath.__z2Origin = symbolPath.z2;\n      symbolPath.z2 += liftZ;\n    }\n  } else if (z2Origin != null) {\n    symbolPath.z2 = z2Origin;\n    symbolPath.__z2Origin = null;\n  }\n\n  var useNameLabel = seriesScope && seriesScope.useNameLabel;\n  graphic.setLabelStyle(elStyle, hoverItemStyle, labelModel, hoverLabelModel, {\n    labelFetcher: seriesModel,\n    labelDataIndex: idx,\n    defaultText: getLabelDefaultText,\n    isRectText: true,\n    autoColor: color\n  }); // Do not execute util needed.\n\n  function getLabelDefaultText(idx, opt) {\n    return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n  }\n\n  symbolPath.__symbolOriginalScale = getScale(symbolSize);\n  symbolPath.hoverStyle = hoverItemStyle;\n  symbolPath.highDownOnUpdate = hoverAnimation && seriesModel.isAnimationEnabled() ? highDownOnUpdate : null;\n  graphic.setHoverStyle(symbolPath);\n};\n\nfunction highDownOnUpdate(fromState, toState) {\n  // Do not support this hover animation util some scenario required.\n  // Animation can only be supported in hover layer when using `el.incremetal`.\n  if (this.incremental || this.useHoverLayer) {\n    return;\n  }\n\n  if (toState === 'emphasis') {\n    var scale = this.__symbolOriginalScale;\n    var ratio = scale[1] / scale[0];\n    var emphasisOpt = {\n      scale: [Math.max(scale[0] * 1.1, scale[0] + 3), Math.max(scale[1] * 1.1, scale[1] + 3 * ratio)]\n    }; // FIXME\n    // modify it after support stop specified animation.\n    // toState === fromState\n    //     ? (this.stopAnimation(), this.attr(emphasisOpt))\n\n    this.animateTo(emphasisOpt, 400, 'elasticOut');\n  } else if (toState === 'normal') {\n    this.animateTo({\n      scale: this.__symbolOriginalScale\n    }, 400, 'elasticOut');\n  }\n}\n/**\n * @param {Function} cb\n * @param {Object} [opt]\n * @param {Object} [opt.keepLabel=true]\n */\n\n\nsymbolProto.fadeOut = function (cb, opt) {\n  var symbolPath = this.childAt(0); // Avoid mistaken hover when fading out\n\n  this.silent = symbolPath.silent = true; // Not show text when animating\n\n  !(opt && opt.keepLabel) && (symbolPath.style.text = null);\n  graphic.updateProps(symbolPath, {\n    style: {\n      opacity: 0\n    },\n    scale: [0, 0]\n  }, this._seriesModel, this.dataIndex, cb);\n};\n\nzrUtil.inherits(SymbolClz, graphic.Group);\nvar _default = SymbolClz;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\n\nvar SymbolClz = require(\"./Symbol\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isObject = _util.isObject;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/SymbolDraw\n */\n\n/**\n * @constructor\n * @alias module:echarts/chart/helper/SymbolDraw\n * @param {module:zrender/graphic/Group} [symbolCtor]\n */\nfunction SymbolDraw(symbolCtor) {\n  this.group = new graphic.Group();\n  this._symbolCtor = symbolCtor || SymbolClz;\n}\n\nvar symbolDrawProto = SymbolDraw.prototype;\n\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Object} [opt] Or isIgnore\n * @param {Function} [opt.isIgnore]\n * @param {Object} [opt.clipShape]\n */\n\n\nsymbolDrawProto.updateData = function (data, opt) {\n  opt = normalizeUpdateOpt(opt);\n  var group = this.group;\n  var seriesModel = data.hostModel;\n  var oldData = this._data;\n  var SymbolCtor = this._symbolCtor;\n  var seriesScope = makeSeriesScope(data); // There is no oldLineData only when first rendering or switching from\n  // stream mode to normal mode, where previous elements should be removed.\n\n  if (!oldData) {\n    group.removeAll();\n  }\n\n  data.diff(oldData).add(function (newIdx) {\n    var point = data.getItemLayout(newIdx);\n\n    if (symbolNeedsDraw(data, point, newIdx, opt)) {\n      var symbolEl = new SymbolCtor(data, newIdx, seriesScope);\n      symbolEl.attr('position', point);\n      data.setItemGraphicEl(newIdx, symbolEl);\n      group.add(symbolEl);\n    }\n  }).update(function (newIdx, oldIdx) {\n    var symbolEl = oldData.getItemGraphicEl(oldIdx);\n    var point = data.getItemLayout(newIdx);\n\n    if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n      group.remove(symbolEl);\n      return;\n    }\n\n    if (!symbolEl) {\n      symbolEl = new SymbolCtor(data, newIdx);\n      symbolEl.attr('position', point);\n    } else {\n      symbolEl.updateData(data, newIdx, seriesScope);\n      graphic.updateProps(symbolEl, {\n        position: point\n      }, seriesModel);\n    } // Add back\n\n\n    group.add(symbolEl);\n    data.setItemGraphicEl(newIdx, symbolEl);\n  }).remove(function (oldIdx) {\n    var el = oldData.getItemGraphicEl(oldIdx);\n    el && el.fadeOut(function () {\n      group.remove(el);\n    });\n  }).execute();\n  this._data = data;\n};\n\nsymbolDrawProto.isPersistent = function () {\n  return true;\n};\n\nsymbolDrawProto.updateLayout = function () {\n  var data = this._data;\n\n  if (data) {\n    // Not use animation\n    data.eachItemGraphicEl(function (el, idx) {\n      var point = data.getItemLayout(idx);\n      el.attr('position', point);\n    });\n  }\n};\n\nsymbolDrawProto.incrementalPrepareUpdate = function (data) {\n  this._seriesScope = makeSeriesScope(data);\n  this._data = null;\n  this.group.removeAll();\n};\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Object} [opt] Or isIgnore\n * @param {Function} [opt.isIgnore]\n * @param {Object} [opt.clipShape]\n */\n\n\nsymbolDrawProto.incrementalUpdate = function (taskParams, data, opt) {\n  opt = normalizeUpdateOpt(opt);\n\n  function updateIncrementalAndHover(el) {\n    if (!el.isGroup) {\n      el.incremental = el.useHoverLayer = true;\n    }\n  }\n\n  for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n    var point = data.getItemLayout(idx);\n\n    if (symbolNeedsDraw(data, point, idx, opt)) {\n      var el = new this._symbolCtor(data, idx, this._seriesScope);\n      el.traverse(updateIncrementalAndHover);\n      el.attr('position', point);\n      this.group.add(el);\n      data.setItemGraphicEl(idx, el);\n    }\n  }\n};\n\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n\n  return opt || {};\n}\n\nsymbolDrawProto.remove = function (enableAnimation) {\n  var group = this.group;\n  var data = this._data; // Incremental model do not have this._data.\n\n  if (data && enableAnimation) {\n    data.eachItemGraphicEl(function (el) {\n      el.fadeOut(function () {\n        group.remove(el);\n      });\n    });\n  } else {\n    group.removeAll();\n  }\n};\n\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  return {\n    itemStyle: seriesModel.getModel('itemStyle').getItemStyle(['color']),\n    hoverItemStyle: seriesModel.getModel('emphasis.itemStyle').getItemStyle(),\n    symbolRotate: seriesModel.get('symbolRotate'),\n    symbolOffset: seriesModel.get('symbolOffset'),\n    hoverAnimation: seriesModel.get('hoverAnimation'),\n    labelModel: seriesModel.getModel('label'),\n    hoverLabelModel: seriesModel.getModel('emphasis.label'),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\n\nvar _default = SymbolDraw;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar round = _number.round;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel) {\n  var rect = cartesian.getArea();\n  var isHorizontal = cartesian.getBaseAxis().isHorizontal();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get('lineStyle.width') || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\n\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth;\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape[isHorizontal ? 'width' : 'height'] = 0;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: round(sectorArea.r0, 1),\n      r: round(sectorArea.r, 1),\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape.endAngle = sectorArea.startAngle;\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createClipPath(coordSys, hasAnimation, seriesModel) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel);\n  }\n\n  return null;\n}\n\nexports.createGridClipPath = createGridClipPath;\nexports.createPolarClipPath = createPolarClipPath;\nexports.createClipPath = createClipPath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar createDimensions = require(\"../../data/helper/createDimensions\");\n\nvar List = require(\"../../data/List\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar extend = _util.extend;\nvar isArray = _util.isArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n *\n * @param {module:echarts/model/Series} seriesModel\n * @param {Object|Array.<string|Object>} opt opt or coordDimensions\n *        The options in opt, see `echarts/data/helper/createDimensions`\n * @param {Array.<string>} [nameList]\n * @return {module:echarts/data/List}\n */\nfunction _default(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({}, opt);\n  var source = seriesModel.getSource();\n  var dimensionsInfo = createDimensions(source, opt);\n  var list = new List(dimensionsInfo, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @return {string} label string. Not null/undefined\n */\nfunction getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimension('defaultedLabel', true);\n  var len = labelDims.length; // Simple optimization (in lots of cases, label dims length is 1)\n\n  if (len === 1) {\n    return retrieveRawValue(data, dataIndex, labelDims[0]);\n  } else if (len) {\n    var vals = [];\n\n    for (var i = 0; i < labelDims.length; i++) {\n      var val = retrieveRawValue(data, dataIndex, labelDims[i]);\n      vals.push(val);\n    }\n\n    return vals.join(' ');\n  }\n}\n\nexports.getDefaultLabel = getDefaultLabel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./line/LineSeries\");\n\nrequire(\"./line/LineView\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar layoutPoints = require(\"../layout/points\");\n\nvar dataSample = require(\"../processor/dataSample\");\n\nrequire(\"../component/gridSimple\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// In case developer forget to include grid component\necharts.registerVisual(visualSymbol('line', 'circle', 'line'));\necharts.registerLayout(layoutPoints('line')); // Down sample after filter\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = SeriesModel.extend({\n  type: 'series.line',\n  dependencies: ['grid', 'polar'],\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(this.getSource(), this);\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // stack: null\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // If clip the overflow value\n    clip: true,\n    // cursor: null,\n    label: {\n      position: 'top'\n    },\n    // itemStyle: {\n    // },\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    // areaStyle: {\n    // origin of areaStyle. Valid values:\n    // `'auto'/null/undefined`: from axisLine to data\n    // `'start'`: from min to data\n    // `'end'`: from data to max\n    // origin: 'auto'\n    // },\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    symbol: 'emptyCircle',\n    symbolSize: 4,\n    symbolRotate: null,\n    showSymbol: true,\n    // `false`: follow the label interval strategy.\n    // `true`: show all symbols.\n    // `'auto'`: If possible, show all symbols, otherwise\n    //           follow the label interval strategy.\n    showAllSymbol: 'auto',\n    // Whether to connect break point.\n    connectNulls: false,\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum'.\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar SymbolDraw = require(\"../helper/SymbolDraw\");\n\nvar SymbolClz = require(\"../helper/Symbol\");\n\nvar lineAnimationDiff = require(\"./lineAnimationDiff\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar _poly = require(\"./poly\");\n\nvar Polyline = _poly.Polyline;\nvar Polygon = _poly.Polygon;\n\nvar ChartView = require(\"../../view/Chart\");\n\nvar _helper = require(\"./helper\");\n\nvar prepareDataCoordInfo = _helper.prepareDataCoordInfo;\nvar getStackedOnPoint = _helper.getStackedOnPoint;\n\nvar _createClipPathFromCoordSys = require(\"../helper/createClipPathFromCoordSys\");\n\nvar createGridClipPath = _createClipPathFromCoordSys.createGridClipPath;\nvar createPolarClipPath = _createClipPathFromCoordSys.createPolarClipPath;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME step not support polar\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n\n  for (var i = 0; i < points1.length; i++) {\n    var p1 = points1[i];\n    var p2 = points2[i];\n\n    if (p1[0] !== p2[0] || p1[1] !== p2[1]) {\n      return;\n    }\n  }\n\n  return true;\n}\n\nfunction getSmooth(smooth) {\n  return typeof smooth === 'number' ? smooth : smooth ? 0.5 : 0;\n}\n/**\n * @param {module:echarts/coord/cartesian/Cartesian2D|module:echarts/coord/polar/Polar} coordSys\n * @param {module:echarts/data/List} data\n * @param {Object} dataCoordInfo\n * @param {Array.<Array.<number>>} points\n */\n\n\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\n  if (!dataCoordInfo.valueDim) {\n    return [];\n  }\n\n  var points = [];\n\n  for (var idx = 0, len = data.count(); idx < len; idx++) {\n    points.push(getStackedOnPoint(dataCoordInfo, coordSys, data, idx));\n  }\n\n  return points;\n}\n\nfunction turnPointsIntoStep(points, coordSys, stepTurnAt) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n\n  for (var i = 0; i < points.length - 1; i++) {\n    var nextPt = points[i + 1];\n    var pt = points[i];\n    stepPoints.push(pt);\n    var stepPt = [];\n\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex]; // default is start\n\n        stepPoints.push(stepPt);\n        break;\n\n      case 'middle':\n        // default is start\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt);\n        stepPoints.push(stepPt2);\n        break;\n\n      default:\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex]; // default is start\n\n        stepPoints.push(stepPt);\n    }\n  } // Last points\n\n\n  points[i] && stepPoints.push(points[i]);\n  return stepPoints;\n}\n\nfunction getVisualGradient(data, coordSys) {\n  var visualMetaList = data.getVisual('visualMeta');\n\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n\n  if (coordSys.type !== 'cartesian2d') {\n    return;\n  }\n\n  var coordDim;\n  var visualMeta;\n\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    var dimIndex = visualMetaList[i].dimension;\n    var dimName = data.dimensions[dimIndex];\n    var dimInfo = data.getDimensionInfo(dimName);\n    coordDim = dimInfo && dimInfo.coordDim; // Can only be x or y\n\n    if (coordDim === 'x' || coordDim === 'y') {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n\n  if (!visualMeta) {\n    return;\n  } // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n\n\n  var axis = coordSys.getAxis(coordDim); // dataToCoor mapping may not be linear, but must be monotonic.\n\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    return {\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n\n  var tinyExtent = 10; // Arbitrary value: 10px\n\n  var minCoord = colorStops[0].coord - tinyExtent;\n  var maxCoord = colorStops[stopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n\n  zrUtil.each(colorStops, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStops.push({\n    offset: stopLen ? colorStops[stopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStops.unshift({\n    // notice colorStops.length have been changed.\n    offset: stopLen ? colorStops[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  }); // zrUtil.each(colorStops, function (colorStop) {\n  //     // Make sure each offset has rounded px to avoid not sharp edge\n  //     colorStop.offset = (Math.round(colorStop.offset * (end - start) + start) - start) / (end - start);\n  // });\n\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStops, true);\n  gradient[coordDim] = minCoord;\n  gradient[coordDim + '2'] = maxCoord;\n  return gradient;\n}\n\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\n  var showAllSymbol = seriesModel.get('showAllSymbol');\n  var isAuto = showAllSymbol === 'auto';\n\n  if (showAllSymbol && !isAuto) {\n    return;\n  }\n\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n  if (!categoryAxis) {\n    return;\n  } // Note that category label interval strategy might bring some weird effect\n  // in some scenario: users may wonder why some of the symbols are not\n  // displayed. So we show all symbols as possible as we can.\n\n\n  if (isAuto // Simplify the logic, do not determine label overlap here.\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\n    return;\n  } // Otherwise follow the label interval strategy on category axis.\n\n\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\n  var labelMap = {};\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\n    labelMap[labelItem.tickValue] = 1;\n  });\n  return function (dataIndex) {\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n  };\n}\n\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\n  // In mose cases, line is monotonous on category axis, and the label size\n  // is close with each other. So we check the symbol size and some of the\n  // label size alone with the category axis to estimate whether all symbol\n  // can be shown without overlap.\n  var axisExtent = categoryAxis.getExtent();\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n  // Sampling some points, max 5.\n\n  var dataLen = data.count();\n  var step = Math.max(1, Math.round(dataLen / 5));\n\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n    if (SymbolClz.getSymbolSize(data, dataIndex // Only for cartesian, where `isHorizontal` exists.\n    )[categoryAxis.isHorizontal() ? 1 : 0] // Empirical number\n    * 1.5 > availSize) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction createLineClipPath(coordSys, hasAnimation, seriesModel) {\n  if (coordSys.type === 'cartesian2d') {\n    var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n    var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel); // Expand clip shape to avoid clipping when line value exceeds axis\n\n    if (!seriesModel.get('clip', true)) {\n      var rectShape = clipPath.shape;\n      var expandSize = Math.max(rectShape.width, rectShape.height);\n\n      if (isHorizontal) {\n        rectShape.y -= expandSize;\n        rectShape.height += expandSize * 2;\n      } else {\n        rectShape.x -= expandSize;\n        rectShape.width += expandSize * 2;\n      }\n    }\n\n    return clipPath;\n  } else {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  }\n}\n\nvar _default = ChartView.extend({\n  type: 'line',\n  init: function () {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n  },\n  render: function (seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle');\n    var areaStyleModel = seriesModel.getModel('areaStyle');\n    var points = data.mapArray(data.getItemLayout);\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = seriesModel.get('animation');\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var valueOrigin = areaStyleModel.get('origin');\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n    var stackedOnPoints = getStackedOnPoints(coordSys, data, dataCoordInfo);\n    var showSymbol = seriesModel.get('showSymbol');\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys); // Remove temporary symbols\n\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    }); // Remove previous created symbols if showSymbol changed to false\n\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n\n    group.add(lineGroup); // FIXME step not support polar\n\n    var step = !isCoordSysPolar && seriesModel.get('step');\n    var clipShapeForSymbol;\n\n    if (coordSys && coordSys.getArea) {\n      clipShapeForSymbol = coordSys.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n      // See #7913 and `test/dataZoom-clip.html`.\n\n      if (clipShapeForSymbol.width != null) {\n        clipShapeForSymbol.x -= 0.1;\n        clipShapeForSymbol.y -= 0.1;\n        clipShapeForSymbol.width += 0.2;\n        clipShapeForSymbol.height += 0.2;\n      } else if (clipShapeForSymbol.r0) {\n        clipShapeForSymbol.r0 -= 0.5;\n        clipShapeForSymbol.r1 += 0.5;\n      }\n    } // Initialization animation or coordinate system changed\n\n\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol\n      });\n\n      if (step) {\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, coordSys, step);\n        stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n      }\n\n      polyline = this._newPolyline(points, coordSys, hasAnimation);\n\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints, coordSys, hasAnimation);\n      }\n\n      lineGroup.setClipPath(createLineClipPath(coordSys, true, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints, coordSys, hasAnimation);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      } // Update clipPath\n\n\n      lineGroup.setClipPath(createLineClipPath(coordSys, false, seriesModel)); // Always update, or it is wrong in the case turning on legend\n      // because points are not changed\n\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol\n      }); // Stop symbol animation and sync with line points\n      // FIXME performance?\n\n      data.eachItemGraphicEl(function (el) {\n        el.stopAnimation(true);\n      }); // In the case data zoom triggerred refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing\n\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._updateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, coordSys, step);\n            stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n          }\n\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n\n    var visualColor = getVisualGradient(data, coordSys) || data.getVisual('color');\n    polyline.useStyle(zrUtil.defaults( // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    var smooth = seriesModel.get('smooth');\n    smooth = getSmooth(seriesModel.get('smooth'));\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: seriesModel.get('smoothMonotone'),\n      connectNulls: seriesModel.get('connectNulls')\n    });\n\n    if (polygon) {\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel'\n      }));\n\n      if (stackedOnSeries) {\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: seriesModel.get('smoothMonotone'),\n        connectNulls: seriesModel.get('connectNulls')\n      });\n    }\n\n    this._data = data; // Save the coordinate system for transition animation when data changed\n\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n    this._valueOrigin = valueOrigin;\n  },\n  dispose: function () {},\n  highlight: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var pt = data.getItemLayout(dataIndex);\n\n        if (!pt) {\n          // Null data\n          return;\n        }\n\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.position = pt;\n        symbol.setZ(seriesModel.get('zlevel'), seriesModel.get('z'));\n        symbol.ignore = isNaN(pt[0]) || isNaN(pt[1]);\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\n\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  },\n  downplay: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  },\n\n  /**\n   * @param {module:zrender/container/Group} group\n   * @param {Array.<Array.<number>>} points\n   * @private\n   */\n  _newPolyline: function (points) {\n    var polyline = this._polyline; // Remove previous created polyline\n\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n\n    polyline = new Polyline({\n      shape: {\n        points: points\n      },\n      silent: true,\n      z2: 10\n    });\n\n    this._lineGroup.add(polyline);\n\n    this._polyline = polyline;\n    return polyline;\n  },\n\n  /**\n   * @param {module:zrender/container/Group} group\n   * @param {Array.<Array.<number>>} stackedOnPoints\n   * @param {Array.<Array.<number>>} points\n   * @private\n   */\n  _newPolygon: function (points, stackedOnPoints) {\n    var polygon = this._polygon; // Remove previous created polygon\n\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n\n    polygon = new Polygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      silent: true\n    });\n\n    this._lineGroup.add(polygon);\n\n    this._polygon = polygon;\n    return polygon;\n  },\n\n  /**\n   * @private\n   */\n  // FIXME Two value axis\n  _updateAnimation: function (data, stackedOnPoints, coordSys, api, step, valueOrigin) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n\n    if (step) {\n      // TODO If stacked series is not step\n      current = turnPointsIntoStep(diff.current, coordSys, step);\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step);\n      next = turnPointsIntoStep(diff.next, coordSys, step);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step);\n    } // `diff.current` is subset of `current` (which should be ensured by\n    // turnPointsIntoStep), so points in `__points` can be updated when\n    // points in `current` are update during animation.\n\n\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    graphic.updateProps(polyline, {\n      shape: {\n        points: next\n      }\n    }, seriesModel);\n\n    if (polygon) {\n      polygon.setShape({\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      graphic.updateProps(polygon, {\n        shape: {\n          points: next,\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel);\n    }\n\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n\n          });\n        }\n      }\n    }\n\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          el.attr('position', polyline.shape.__points[updatedDataInfo[i].ptIdx]);\n        }\n      });\n    }\n  },\n  remove: function (ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n\n    this._lineGroup.removeAll();\n\n    this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\n\n\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._data = null;\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar isDimensionStacked = _dataStackHelper.isDimensionStacked;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar map = _util.map;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} coordSys\n * @param {module:echarts/data/List} data\n * @param {string} valueOrigin lineSeries.option.areaStyle.origin\n */\nfunction prepareDataCoordInfo(coordSys, data, valueOrigin) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = getValueStart(valueAxis, valueOrigin);\n  var baseAxisDim = baseAxis.dim;\n  var valueAxisDim = valueAxis.dim;\n  var valueDim = data.mapDimension(valueAxisDim);\n  var baseDim = data.mapDimension(baseAxisDim);\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n  var dims = map(coordSys.dimensions, function (coordDim) {\n    return data.mapDimension(coordDim);\n  });\n  var stacked;\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n  if (stacked |= isDimensionStacked(data, dims[0]\n  /*, dims[1]*/\n  )) {\n    // jshint ignore:line\n    dims[0] = stackResultDim;\n  }\n\n  if (stacked |= isDimensionStacked(data, dims[1]\n  /*, dims[0]*/\n  )) {\n    // jshint ignore:line\n    dims[1] = stackResultDim;\n  }\n\n  return {\n    dataDimsForPoint: dims,\n    valueStart: valueStart,\n    valueAxisDim: valueAxisDim,\n    baseAxisDim: baseAxisDim,\n    stacked: !!stacked,\n    valueDim: valueDim,\n    baseDim: baseDim,\n    baseDataOffset: baseDataOffset,\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n  };\n}\n\nfunction getValueStart(valueAxis, valueOrigin) {\n  var valueStart = 0;\n  var extent = valueAxis.scale.getExtent();\n\n  if (valueOrigin === 'start') {\n    valueStart = extent[0];\n  } else if (valueOrigin === 'end') {\n    valueStart = extent[1];\n  } // auto\n  else {\n      // Both positive\n      if (extent[0] > 0) {\n        valueStart = extent[0];\n      } // Both negative\n      else if (extent[1] < 0) {\n          valueStart = extent[1];\n        } // If is one positive, and one negative, onZero shall be true\n\n    }\n\n  return valueStart;\n}\n\nfunction getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n  var value = NaN;\n\n  if (dataCoordInfo.stacked) {\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n  }\n\n  if (isNaN(value)) {\n    value = dataCoordInfo.valueStart;\n  }\n\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n  stackedData[1 - baseDataOffset] = value;\n  return coordSys.dataToPoint(stackedData);\n}\n\nexports.prepareDataCoordInfo = prepareDataCoordInfo;\nexports.getStackedOnPoint = getStackedOnPoint;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _helper = require(\"./helper\");\n\nvar prepareDataCoordInfo = _helper.prepareDataCoordInfo;\nvar getStackedOnPoint = _helper.getStackedOnPoint;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// var arrayDiff = require('zrender/src/core/arrayDiff');\n// 'zrender/src/core/arrayDiff' has been used before, but it did\n// not do well in performance when roam with fixed dataZoom window.\n// function convertToIntId(newIdList, oldIdList) {\n//     // Generate int id instead of string id.\n//     // Compare string maybe slow in score function of arrDiff\n//     // Assume id in idList are all unique\n//     var idIndicesMap = {};\n//     var idx = 0;\n//     for (var i = 0; i < newIdList.length; i++) {\n//         idIndicesMap[newIdList[i]] = idx;\n//         newIdList[i] = idx++;\n//     }\n//     for (var i = 0; i < oldIdList.length; i++) {\n//         var oldId = oldIdList[i];\n//         // Same with newIdList\n//         if (idIndicesMap[oldId]) {\n//             oldIdList[i] = idIndicesMap[oldId];\n//         }\n//         else {\n//             oldIdList[i] = idx++;\n//         }\n//     }\n// }\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\n\nfunction _default(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n  var diff = diffData(oldData, newData); // var newIdList = newData.mapArray(newData.getId);\n  // var oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n\n  var currPoints = [];\n  var nextPoints = []; // Points for stacking base line\n\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin);\n  var oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true; // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n\n    switch (diffItem.cmd) {\n      case '=':\n        var currentPt = oldData.getItemLayout(diffItem.idx);\n        var nextPt = newData.getItemLayout(diffItem.idx1); // If previous data is NaN, use next point directly\n\n        if (isNaN(currentPt[0]) || isNaN(currentPt[1])) {\n          currentPt = nextPt.slice();\n        }\n\n        currPoints.push(currentPt);\n        nextPoints.push(nextPt);\n        currStackedPoints.push(oldStackedOnPoints[diffItem.idx]);\n        nextStackedPoints.push(newStackedOnPoints[diffItem.idx1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n\n      case '+':\n        var idx = diffItem.idx;\n        currPoints.push(oldCoordSys.dataToPoint([newData.get(newDataOldCoordInfo.dataDimsForPoint[0], idx), newData.get(newDataOldCoordInfo.dataDimsForPoint[1], idx)]));\n        nextPoints.push(newData.getItemLayout(idx).slice());\n        currStackedPoints.push(getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, idx));\n        nextStackedPoints.push(newStackedOnPoints[idx]);\n        rawIndices.push(newData.getRawIndex(idx));\n        break;\n\n      case '-':\n        var idx = diffItem.idx;\n        var rawIndex = oldData.getRawIndex(idx); // Data is replaced. In the case of dynamic data queue\n        // FIXME FIXME FIXME\n\n        if (rawIndex !== idx) {\n          currPoints.push(oldData.getItemLayout(idx));\n          nextPoints.push(newCoordSys.dataToPoint([oldData.get(oldDataNewCoordInfo.dataDimsForPoint[0], idx), oldData.get(oldDataNewCoordInfo.dataDimsForPoint[1], idx)]));\n          currStackedPoints.push(oldStackedOnPoints[idx]);\n          nextStackedPoints.push(getStackedOnPoint(oldDataNewCoordInfo, newCoordSys, oldData, idx));\n          rawIndices.push(rawIndex);\n        } else {\n          pointAdded = false;\n        }\n\n    } // Original indices\n\n\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  } // Diff result may be crossed if all items are changed\n  // Sort by data index\n\n\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var sortedCurrPoints = [];\n  var sortedNextPoints = [];\n  var sortedCurrStackedPoints = [];\n  var sortedNextStackedPoints = [];\n  var sortedStatus = [];\n\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    sortedCurrPoints[i] = currPoints[idx];\n    sortedNextPoints[i] = nextPoints[idx];\n    sortedCurrStackedPoints[i] = currStackedPoints[idx];\n    sortedNextStackedPoints[i] = nextStackedPoints[idx];\n    sortedStatus[i] = status[idx];\n  }\n\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Path = require(\"zrender/lib/graphic/Path\");\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\nvar fixClipWithShadow = require(\"zrender/lib/graphic/helper/fixClipWithShadow\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Poly path support NaN point\nvar vec2Min = vec2.min;\nvar vec2Max = vec2.max;\nvar scaleAndAdd = vec2.scaleAndAdd;\nvar v2Copy = vec2.copy; // Temporary variable\n\nvar v = [];\nvar cp0 = [];\nvar cp1 = [];\n\nfunction isPointNull(p) {\n  return isNaN(p[0]) || isNaN(p[1]);\n}\n\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  // if (smoothMonotone == null) {\n  //     if (isMono(points, 'x')) {\n  //         return drawMono(ctx, points, start, segLen, allLen,\n  //             dir, smoothMin, smoothMax, smooth, 'x', connectNulls);\n  //     }\n  //     else if (isMono(points, 'y')) {\n  //         return drawMono(ctx, points, start, segLen, allLen,\n  //             dir, smoothMin, smoothMax, smooth, 'y', connectNulls);\n  //     }\n  //     else {\n  //         return drawNonMono.apply(this, arguments);\n  //     }\n  // }\n  // else if (smoothMonotone !== 'none' && isMono(points, smoothMonotone)) {\n  //     return drawMono.apply(this, arguments);\n  // }\n  // else {\n  //     return drawNonMono.apply(this, arguments);\n  // }\n  if (smoothMonotone === 'none' || !smoothMonotone) {\n    return drawNonMono.apply(this, arguments);\n  } else {\n    return drawMono.apply(this, arguments);\n  }\n}\n/**\n * Check if points is in monotone.\n *\n * @param {number[][]} points         Array of points which is in [x, y] form\n * @param {string}     smoothMonotone 'x', 'y', or 'none', stating for which\n *                                    dimension that is checking.\n *                                    If is 'none', `drawNonMono` should be\n *                                    called.\n *                                    If is undefined, either being monotone\n *                                    in 'x' or 'y' will call `drawMono`.\n */\n// function isMono(points, smoothMonotone) {\n//     if (points.length <= 1) {\n//         return true;\n//     }\n//     var dim = smoothMonotone === 'x' ? 0 : 1;\n//     var last = points[0][dim];\n//     var lastDiff = 0;\n//     for (var i = 1; i < points.length; ++i) {\n//         var diff = points[i][dim] - last;\n//         if (!isNaN(diff) && !isNaN(lastDiff)\n//             && diff !== 0 && lastDiff !== 0\n//             && ((diff >= 0) !== (lastDiff >= 0))\n//         ) {\n//             return false;\n//         }\n//         if (!isNaN(diff) && diff !== 0) {\n//             lastDiff = diff;\n//             last = points[i][dim];\n//         }\n//     }\n//     return true;\n// }\n\n/**\n * Draw smoothed line in monotone, in which only vertical or horizontal bezier\n * control points will be used. This should be used when points are monotone\n * either in x or y dimension.\n */\n\n\nfunction drawMono(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  var prevIdx = 0;\n  var idx = start;\n\n  for (var k = 0; k < segLen; k++) {\n    var p = points[idx];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(p)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\n    } else {\n      if (smooth > 0) {\n        var prevP = points[prevIdx];\n        var dim = smoothMonotone === 'y' ? 1 : 0; // Length of control point to p, either in x or y, but not both\n\n        var ctrlLen = (p[dim] - prevP[dim]) * smooth;\n        v2Copy(cp0, prevP);\n        cp0[dim] = prevP[dim] + ctrlLen;\n        v2Copy(cp1, p);\n        cp1[dim] = p[dim] - ctrlLen;\n        ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]);\n      } else {\n        ctx.lineTo(p[0], p[1]);\n      }\n    }\n\n    prevIdx = idx;\n    idx += dir;\n  }\n\n  return k;\n}\n/**\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\n * situations. This should be used when points are non-monotone neither in x or\n * y dimension.\n */\n\n\nfunction drawNonMono(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  var prevIdx = 0;\n  var idx = start;\n\n  for (var k = 0; k < segLen; k++) {\n    var p = points[idx];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(p)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\n      v2Copy(cp0, p);\n    } else {\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextP = points[nextIdx];\n\n        if (connectNulls) {\n          // Find next point not null\n          while (nextP && isPointNull(points[nextIdx])) {\n            nextIdx += dir;\n            nextP = points[nextIdx];\n          }\n        }\n\n        var ratioNextSeg = 0.5;\n        var prevP = points[prevIdx];\n        var nextP = points[nextIdx]; // Last point\n\n        if (!nextP || isPointNull(nextP)) {\n          v2Copy(cp1, p);\n        } else {\n          // If next data is null in not connect case\n          if (isPointNull(nextP) && !connectNulls) {\n            nextP = p;\n          }\n\n          vec2.sub(v, nextP, prevP);\n          var lenPrevSeg;\n          var lenNextSeg;\n\n          if (smoothMonotone === 'x' || smoothMonotone === 'y') {\n            var dim = smoothMonotone === 'x' ? 0 : 1;\n            lenPrevSeg = Math.abs(p[dim] - prevP[dim]);\n            lenNextSeg = Math.abs(p[dim] - nextP[dim]);\n          } else {\n            lenPrevSeg = vec2.dist(p, prevP);\n            lenNextSeg = vec2.dist(p, nextP);\n          } // Use ratio of seg length\n\n\n          ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n          scaleAndAdd(cp1, p, v, -smooth * (1 - ratioNextSeg));\n        } // Smooth constraint\n\n\n        vec2Min(cp0, cp0, smoothMax);\n        vec2Max(cp0, cp0, smoothMin);\n        vec2Min(cp1, cp1, smoothMax);\n        vec2Max(cp1, cp1, smoothMin);\n        ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]); // cp0 of next segment\n\n        scaleAndAdd(cp0, p, v, smooth * ratioNextSeg);\n      } else {\n        ctx.lineTo(p[0], p[1]);\n      }\n    }\n\n    prevIdx = idx;\n    idx += dir;\n  }\n\n  return k;\n}\n\nfunction getBoundingBox(points, smoothConstraint) {\n  var ptMin = [Infinity, Infinity];\n  var ptMax = [-Infinity, -Infinity];\n\n  if (smoothConstraint) {\n    for (var i = 0; i < points.length; i++) {\n      var pt = points[i];\n\n      if (pt[0] < ptMin[0]) {\n        ptMin[0] = pt[0];\n      }\n\n      if (pt[1] < ptMin[1]) {\n        ptMin[1] = pt[1];\n      }\n\n      if (pt[0] > ptMax[0]) {\n        ptMax[0] = pt[0];\n      }\n\n      if (pt[1] > ptMax[1]) {\n        ptMax[1] = pt[1];\n      }\n    }\n  }\n\n  return {\n    min: smoothConstraint ? ptMin : ptMax,\n    max: smoothConstraint ? ptMax : ptMin\n  };\n}\n\nvar Polyline = Path.extend({\n  type: 'ec-polyline',\n  shape: {\n    points: [],\n    smooth: 0,\n    smoothConstraint: true,\n    smoothMonotone: null,\n    connectNulls: false\n  },\n  style: {\n    fill: null,\n    stroke: '#000'\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function (ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length;\n    var result = getBoundingBox(points, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, result.min, result.max, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  }\n});\nvar Polygon = Path.extend({\n  type: 'ec-polygon',\n  shape: {\n    points: [],\n    // Offset between stacked base points and points\n    stackedOnPoints: [],\n    smooth: 0,\n    stackedOnSmooth: 0,\n    smoothConstraint: true,\n    smoothMonotone: null,\n    connectNulls: false\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function (ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length;\n    var smoothMonotone = shape.smoothMonotone;\n    var bbox = getBoundingBox(points, shape.smoothConstraint);\n    var stackedOnBBox = getBoundingBox(stackedOnPoints, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, bbox.min, bbox.max, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, stackedOnBBox.min, stackedOnBBox.max, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  }\n});\nexports.Polyline = Polyline;\nexports.Polygon = Polygon;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./map/MapSeries\");\n\nrequire(\"./map/MapView\");\n\nrequire(\"../action/geoRoam\");\n\nrequire(\"../coord/geo/geoCreator\");\n\nvar mapSymbolLayout = require(\"./map/mapSymbolLayout\");\n\nvar mapVisual = require(\"./map/mapVisual\");\n\nvar mapDataStatistic = require(\"./map/mapDataStatistic\");\n\nvar backwardCompat = require(\"./map/backwardCompat\");\n\nvar createDataSelectAction = require(\"../action/createDataSelectAction\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\necharts.registerLayout(mapSymbolLayout);\necharts.registerVisual(mapVisual);\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, mapDataStatistic);\necharts.registerPreprocessor(backwardCompat);\ncreateDataSelectAction('map', [{\n  type: 'mapToggleSelect',\n  event: 'mapselectchanged',\n  method: 'toggleSelected'\n}, {\n  type: 'mapSelect',\n  event: 'mapselected',\n  method: 'select'\n}, {\n  type: 'mapUnSelect',\n  event: 'mapunselected',\n  method: 'unSelect'\n}]);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar createListSimply = require(\"../helper/createListSimply\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar _format = require(\"../../util/format\");\n\nvar encodeHTML = _format.encodeHTML;\nvar addCommas = _format.addCommas;\n\nvar dataSelectableMixin = require(\"../../component/helper/selectableMixin\");\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawAttr = _dataProvider.retrieveRawAttr;\n\nvar geoSourceManager = require(\"../../coord/geo/geoSourceManager\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar MapSeries = SeriesModel.extend({\n  type: 'series.map',\n  dependencies: ['geo'],\n  layoutMode: 'box',\n\n  /**\n   * Only first map series of same mapType will drawMap\n   * @type {boolean}\n   */\n  needsDrawMap: false,\n\n  /**\n   * Group of all map series with same mapType\n   * @type {boolean}\n   */\n  seriesGroup: [],\n  getInitialData: function (option) {\n    var data = createListSimply(this, ['value']);\n    var valueDim = data.mapDimension('value');\n    var dataNameMap = zrUtil.createHashMap();\n    var selectTargetList = [];\n    var toAppendNames = [];\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      var name = data.getName(i);\n      dataNameMap.set(name, true);\n      selectTargetList.push({\n        name: name,\n        value: data.get(valueDim, i),\n        selected: retrieveRawAttr(data, i, 'selected')\n      });\n    }\n\n    var geoSource = geoSourceManager.load(this.getMapType(), this.option.nameMap);\n    zrUtil.each(geoSource.regions, function (region) {\n      var name = region.name;\n\n      if (!dataNameMap.get(name)) {\n        selectTargetList.push({\n          name: name\n        });\n        toAppendNames.push(name);\n      }\n    });\n    this.updateSelectedMap(selectTargetList); // Complete data with missing regions. The consequent processes (like visual\n    // map and render) can not be performed without a \"full data\". For example,\n    // find `dataIndex` by name.\n\n    data.appendValues([], toAppendNames);\n    return data;\n  },\n\n  /**\n   * If no host geo model, return null, which means using a\n   * inner exclusive geo model.\n   */\n  getHostGeoModel: function () {\n    var geoIndex = this.option.geoIndex;\n    return geoIndex != null ? this.dependentModels.geo[geoIndex] : null;\n  },\n  getMapType: function () {\n    return (this.getHostGeoModel() || this).option.map;\n  },\n  // _fillOption: function (option, mapName) {\n  // Shallow clone\n  // option = zrUtil.extend({}, option);\n  // option.data = geoCreator.getFilledRegions(option.data, mapName, option.nameMap);\n  // return option;\n  // },\n  getRawValue: function (dataIndex) {\n    // Use value stored in data instead because it is calculated from multiple series\n    // FIXME Provide all value of multiple series ?\n    var data = this.getData();\n    return data.get(data.mapDimension('value'), dataIndex);\n  },\n\n  /**\n   * Get model of region\n   * @param  {string} name\n   * @return {module:echarts/model/Model}\n   */\n  getRegionModel: function (regionName) {\n    var data = this.getData();\n    return data.getItemModel(data.indexOfName(regionName));\n  },\n\n  /**\n   * Map tooltip formatter\n   *\n   * @param {number} dataIndex\n   */\n  formatTooltip: function (dataIndex) {\n    // FIXME orignalData and data is a bit confusing\n    var data = this.getData();\n    var formattedValue = addCommas(this.getRawValue(dataIndex));\n    var name = data.getName(dataIndex);\n    var seriesGroup = this.seriesGroup;\n    var seriesNames = [];\n\n    for (var i = 0; i < seriesGroup.length; i++) {\n      var otherIndex = seriesGroup[i].originalData.indexOfName(name);\n      var valueDim = data.mapDimension('value');\n\n      if (!isNaN(seriesGroup[i].originalData.get(valueDim, otherIndex))) {\n        seriesNames.push(encodeHTML(seriesGroup[i].name));\n      }\n    }\n\n    return seriesNames.join(', ') + '<br />' + encodeHTML(name + ' : ' + formattedValue);\n  },\n\n  /**\n   * @implement\n   */\n  getTooltipPosition: function (dataIndex) {\n    if (dataIndex != null) {\n      var name = this.getData().getName(dataIndex);\n      var geo = this.coordinateSystem;\n      var region = geo.getRegion(name);\n      return region && geo.dataToPoint(region.center);\n    }\n  },\n  setZoom: function (zoom) {\n    this.option.zoom = zoom;\n  },\n  setCenter: function (center) {\n    this.option.center = center;\n  },\n  defaultOption: {\n    // \n    zlevel: 0,\n    // \n    z: 2,\n    coordinateSystem: 'geo',\n    // map should be explicitly specified since ec3.\n    map: '',\n    // If `geoIndex` is not specified, a exclusive geo will be\n    // created. Otherwise use the specified geo component, and\n    // `map` and `mapType` are ignored.\n    // geoIndex: 0,\n    // 'center' | 'left' | 'right' | 'x%' | {number}\n    left: 'center',\n    // 'center' | 'top' | 'bottom' | 'x%' | {number}\n    top: 'center',\n    // right\n    // bottom\n    // width:\n    // height\n    // Aspect is width / height. Inited to be geoJson bbox aspect\n    // This parameter is used for scale this aspect\n    aspectScale: 0.75,\n    ///// Layout with center and size\n    // If you wan't to put map in a fixed size box with right aspect ratio\n    // This two properties may more conveninet\n    // layoutCenter: [50%, 50%]\n    // layoutSize: 100\n    // \n    // 'sum' | 'average' | 'max' | 'min'\n    // mapValueCalculation: 'sum',\n    // \n    // mapValuePrecision: 0,\n    // \n    showLegendSymbol: true,\n    // singlemultiple\n    // selectedMode: false,\n    dataRangeHoverLink: true,\n    // \n    // roam: false,\n    // Define left-top, right-bottom coords to control view\n    // For example, [ [180, 90], [-180, -90] ],\n    // higher priority than center and zoom\n    boundingCoords: null,\n    // Default on center of map\n    center: null,\n    zoom: 1,\n    scaleLimit: null,\n    label: {\n      show: false,\n      color: '#000'\n    },\n    // scaleLimit: null,\n    itemStyle: {\n      borderWidth: 0.5,\n      borderColor: '#444',\n      areaColor: '#eee'\n    },\n    emphasis: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        areaColor: 'rgba(255,215,0,0.8)'\n      }\n    }\n  }\n});\nzrUtil.mixin(MapSeries, dataSelectableMixin);\nvar _default = MapSeries;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar MapDraw = require(\"../../component/helper/MapDraw\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar HIGH_DOWN_PROP = '__seriesMapHighDown';\nvar RECORD_VERSION_PROP = '__seriesMapCallKey';\n\nvar _default = echarts.extendChartView({\n  type: 'map',\n  render: function (mapModel, ecModel, api, payload) {\n    // Not render if it is an toggleSelect action from self\n    if (payload && payload.type === 'mapToggleSelect' && payload.from === this.uid) {\n      return;\n    }\n\n    var group = this.group;\n    group.removeAll();\n\n    if (mapModel.getHostGeoModel()) {\n      return;\n    } // Not update map if it is an roam action from self\n\n\n    if (!(payload && payload.type === 'geoRoam' && payload.componentType === 'series' && payload.seriesId === mapModel.id)) {\n      if (mapModel.needsDrawMap) {\n        var mapDraw = this._mapDraw || new MapDraw(api, true);\n        group.add(mapDraw.group);\n        mapDraw.draw(mapModel, ecModel, api, this, payload);\n        this._mapDraw = mapDraw;\n      } else {\n        // Remove drawed map\n        this._mapDraw && this._mapDraw.remove();\n        this._mapDraw = null;\n      }\n    } else {\n      var mapDraw = this._mapDraw;\n      mapDraw && group.add(mapDraw.group);\n    }\n\n    mapModel.get('showLegendSymbol') && ecModel.getComponent('legend') && this._renderSymbols(mapModel, ecModel, api);\n  },\n  remove: function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n    this.group.removeAll();\n  },\n  dispose: function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n  },\n  _renderSymbols: function (mapModel, ecModel, api) {\n    var originalData = mapModel.originalData;\n    var group = this.group;\n    originalData.each(originalData.mapDimension('value'), function (value, originalDataIndex) {\n      if (isNaN(value)) {\n        return;\n      }\n\n      var layout = originalData.getItemLayout(originalDataIndex);\n\n      if (!layout || !layout.point) {\n        // Not exists in map\n        return;\n      }\n\n      var point = layout.point;\n      var offset = layout.offset;\n      var circle = new graphic.Circle({\n        style: {\n          // Because the special of map draw.\n          // Which needs statistic of multiple series and draw on one map.\n          // And each series also need a symbol with legend color\n          //\n          // Layout and visual are put one the different data\n          fill: mapModel.getData().getVisual('color')\n        },\n        shape: {\n          cx: point[0] + offset * 9,\n          cy: point[1],\n          r: 3\n        },\n        silent: true,\n        // Do not overlap the first series, on which labels are displayed.\n        z2: 8 + (!offset ? graphic.Z2_EMPHASIS_LIFT + 1 : 0)\n      }); // Only the series that has the first value on the same region is in charge of rendering the label.\n      // But consider the case:\n      // series: [\n      //     {id: 'X', type: 'map', map: 'm', {data: [{name: 'A', value: 11}, {name: 'B', {value: 22}]},\n      //     {id: 'Y', type: 'map', map: 'm', {data: [{name: 'A', value: 21}, {name: 'C', {value: 33}]}\n      // ]\n      // The offset `0` of item `A` is at series `X`, but of item `C` is at series `Y`.\n      // For backward compatibility, we follow the rule that render label `A` by the\n      // settings on series `X` but render label `C` by the settings on series `Y`.\n\n      if (!offset) {\n        var fullData = mapModel.mainSeries.getData();\n        var name = originalData.getName(originalDataIndex);\n        var fullIndex = fullData.indexOfName(name);\n        var itemModel = originalData.getItemModel(originalDataIndex);\n        var labelModel = itemModel.getModel('label');\n        var hoverLabelModel = itemModel.getModel('emphasis.label');\n        var regionGroup = fullData.getItemGraphicEl(fullIndex); // `getFormattedLabel` needs to use `getData` inside. Here\n        // `mapModel.getData()` is shallow cloned from `mainSeries.getData()`.\n        // FIXME\n        // If this is not the `mainSeries`, the item model (like label formatter)\n        // set on original data item will never get. But it has been working\n        // like that from the begining, and this scenario is rarely encountered.\n        // So it won't be fixed until have to.\n\n        var normalText = zrUtil.retrieve2(mapModel.getFormattedLabel(fullIndex, 'normal'), name);\n        var emphasisText = zrUtil.retrieve2(mapModel.getFormattedLabel(fullIndex, 'emphasis'), normalText);\n        var highDownRecord = regionGroup[HIGH_DOWN_PROP];\n        var recordVersion = Math.random(); // Prevent from register listeners duplicatedly when roaming.\n\n        if (!highDownRecord) {\n          highDownRecord = regionGroup[HIGH_DOWN_PROP] = {};\n          var onEmphasis = zrUtil.curry(onRegionHighDown, true);\n          var onNormal = zrUtil.curry(onRegionHighDown, false);\n          regionGroup.on('mouseover', onEmphasis).on('mouseout', onNormal).on('emphasis', onEmphasis).on('normal', onNormal);\n        } // Prevent removed regions effect current grapics.\n\n\n        regionGroup[RECORD_VERSION_PROP] = recordVersion;\n        zrUtil.extend(highDownRecord, {\n          recordVersion: recordVersion,\n          circle: circle,\n          labelModel: labelModel,\n          hoverLabelModel: hoverLabelModel,\n          emphasisText: emphasisText,\n          normalText: normalText\n        }); // FIXME\n        // Consider set option when emphasis.\n\n        enterRegionHighDown(highDownRecord, false);\n      }\n\n      group.add(circle);\n    });\n  }\n});\n\nfunction onRegionHighDown(toHighOrDown) {\n  var highDownRecord = this[HIGH_DOWN_PROP];\n\n  if (highDownRecord && highDownRecord.recordVersion === this[RECORD_VERSION_PROP]) {\n    enterRegionHighDown(highDownRecord, toHighOrDown);\n  }\n}\n\nfunction enterRegionHighDown(highDownRecord, toHighOrDown) {\n  var circle = highDownRecord.circle;\n  var labelModel = highDownRecord.labelModel;\n  var hoverLabelModel = highDownRecord.hoverLabelModel;\n  var emphasisText = highDownRecord.emphasisText;\n  var normalText = highDownRecord.normalText;\n\n  if (toHighOrDown) {\n    circle.style.extendFrom(graphic.setTextStyle({}, hoverLabelModel, {\n      text: hoverLabelModel.get('show') ? emphasisText : null\n    }, {\n      isRectText: true,\n      useInsideStyle: false\n    }, true)); // Make label upper than others if overlaps.\n\n    circle.__mapOriginalZ2 = circle.z2;\n    circle.z2 += graphic.Z2_EMPHASIS_LIFT;\n  } else {\n    graphic.setTextStyle(circle.style, labelModel, {\n      text: labelModel.get('show') ? normalText : null,\n      textPosition: labelModel.getShallow('position') || 'bottom'\n    }, {\n      isRectText: true,\n      useInsideStyle: false\n    }); // Trigger normalize style like padding.\n\n    circle.dirty(false);\n\n    if (circle.__mapOriginalZ2 != null) {\n      circle.z2 = circle.__mapOriginalZ2;\n      circle.__mapOriginalZ2 = null;\n    }\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(option) {\n  // Save geoCoord\n  var mapSeries = [];\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'map') {\n      mapSeries.push(seriesOpt);\n      seriesOpt.map = seriesOpt.map || seriesOpt.mapType; // Put x, y, width, height, x2, y2 in the top level\n\n      zrUtil.defaults(seriesOpt, seriesOpt.mapLocation);\n    }\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME \n\n/**\n * @param {Array.<module:echarts/data/List>} datas\n * @param {string} statisticType 'average' 'sum'\n * @inner\n */\nfunction dataStatistics(datas, statisticType) {\n  var dataNameMap = {};\n  zrUtil.each(datas, function (data) {\n    data.each(data.mapDimension('value'), function (value, idx) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var mapKey = 'ec-' + data.getName(idx);\n      dataNameMap[mapKey] = dataNameMap[mapKey] || [];\n\n      if (!isNaN(value)) {\n        dataNameMap[mapKey].push(value);\n      }\n    });\n  });\n  return datas[0].map(datas[0].mapDimension('value'), function (value, idx) {\n    var mapKey = 'ec-' + datas[0].getName(idx);\n    var sum = 0;\n    var min = Infinity;\n    var max = -Infinity;\n    var len = dataNameMap[mapKey].length;\n\n    for (var i = 0; i < len; i++) {\n      min = Math.min(min, dataNameMap[mapKey][i]);\n      max = Math.max(max, dataNameMap[mapKey][i]);\n      sum += dataNameMap[mapKey][i];\n    }\n\n    var result;\n\n    if (statisticType === 'min') {\n      result = min;\n    } else if (statisticType === 'max') {\n      result = max;\n    } else if (statisticType === 'average') {\n      result = sum / len;\n    } else {\n      result = sum;\n    }\n\n    return len === 0 ? NaN : result;\n  });\n}\n\nfunction _default(ecModel) {\n  var seriesGroups = {};\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var hostGeoModel = seriesModel.getHostGeoModel();\n    var key = hostGeoModel ? 'o' + hostGeoModel.id : 'i' + seriesModel.getMapType();\n    (seriesGroups[key] = seriesGroups[key] || []).push(seriesModel);\n  });\n  zrUtil.each(seriesGroups, function (seriesList, key) {\n    var data = dataStatistics(zrUtil.map(seriesList, function (seriesModel) {\n      return seriesModel.getData();\n    }), seriesList[0].get('mapValueCalculation'));\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].originalData = seriesList[i].getData();\n    } // FIXME Put where?\n\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].seriesGroup = seriesList;\n      seriesList[i].needsDrawMap = i === 0 && !seriesList[i].getHostGeoModel();\n      seriesList[i].setData(data.cloneShallow());\n      seriesList[i].mainSeries = seriesList[0];\n    }\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  var processedMapType = {};\n  ecModel.eachSeriesByType('map', function (mapSeries) {\n    var mapType = mapSeries.getMapType();\n\n    if (mapSeries.getHostGeoModel() || processedMapType[mapType]) {\n      return;\n    }\n\n    var mapSymbolOffsets = {};\n    zrUtil.each(mapSeries.seriesGroup, function (subMapSeries) {\n      var geo = subMapSeries.coordinateSystem;\n      var data = subMapSeries.originalData;\n\n      if (subMapSeries.get('showLegendSymbol') && ecModel.getComponent('legend')) {\n        data.each(data.mapDimension('value'), function (value, idx) {\n          var name = data.getName(idx);\n          var region = geo.getRegion(name); // If input series.data is [11, 22, '-'/null/undefined, 44],\n          // it will be filled with NaN: [11, 22, NaN, 44] and NaN will\n          // not be drawn. So here must validate if value is NaN.\n\n          if (!region || isNaN(value)) {\n            return;\n          }\n\n          var offset = mapSymbolOffsets[name] || 0;\n          var point = geo.dataToPoint(region.center);\n          mapSymbolOffsets[name] = offset + 1;\n          data.setItemLayout(idx, {\n            point: point,\n            offset: offset\n          });\n        });\n      }\n    }); // Show label of those region not has legendSymbol(which is offset 0)\n\n    var data = mapSeries.getData();\n    data.each(function (idx) {\n      var name = data.getName(idx);\n      var layout = data.getItemLayout(idx) || {};\n      layout.showLabel = !mapSymbolOffsets[name];\n      data.setItemLayout(idx, layout);\n    });\n    processedMapType[mapType] = true;\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var colorList = seriesModel.get('color');\n    var itemStyleModel = seriesModel.getModel('itemStyle');\n    var areaColor = itemStyleModel.get('areaColor');\n    var color = itemStyleModel.get('color') || colorList[seriesModel.seriesIndex % colorList.length];\n    seriesModel.getData().setVisual({\n      'areaColor': areaColor,\n      'color': color\n    });\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"./pie/PieSeries\");\n\nrequire(\"./pie/PieView\");\n\nvar createDataSelectAction = require(\"../action/createDataSelectAction\");\n\nvar dataColor = require(\"../visual/dataColor\");\n\nvar pieLayout = require(\"./pie/pieLayout\");\n\nvar dataFilter = require(\"../processor/dataFilter\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\ncreateDataSelectAction('pie', [{\n  type: 'pieToggleSelect',\n  event: 'pieselectchanged',\n  method: 'toggleSelected'\n}, {\n  type: 'pieSelect',\n  event: 'pieselected',\n  method: 'select'\n}, {\n  type: 'pieUnSelect',\n  event: 'pieunselected',\n  method: 'unSelect'\n}]);\necharts.registerVisual(dataColor('pie'));\necharts.registerLayout(zrUtil.curry(pieLayout, 'pie'));\necharts.registerProcessor(dataFilter('pie'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar createListSimply = require(\"../helper/createListSimply\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar _number = require(\"../../util/number\");\n\nvar getPercentWithPrecision = _number.getPercentWithPrecision;\n\nvar dataSelectableMixin = require(\"../../component/helper/selectableMixin\");\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawAttr = _dataProvider.retrieveRawAttr;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PieSeries = echarts.extendSeriesModel({\n  type: 'series.pie',\n  // Overwrite\n  init: function (option) {\n    PieSeries.superApply(this, 'init', arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n    this.legendDataProvider = function () {\n      return this.getRawData();\n    };\n\n    this.updateSelectedMap(this._createSelectableList());\n\n    this._defaultLabelLine(option);\n  },\n  // Overwrite\n  mergeOption: function (newOption) {\n    PieSeries.superCall(this, 'mergeOption', newOption);\n    this.updateSelectedMap(this._createSelectableList());\n  },\n  getInitialData: function (option, ecModel) {\n    return createListSimply(this, ['value']);\n  },\n  _createSelectableList: function () {\n    var data = this.getRawData();\n    var valueDim = data.mapDimension('value');\n    var targetList = [];\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      targetList.push({\n        name: data.getName(i),\n        value: data.get(valueDim, i),\n        selected: retrieveRawAttr(data, i, 'selected')\n      });\n    }\n\n    return targetList;\n  },\n  // Overwrite\n  getDataParams: function (dataIndex) {\n    var data = this.getData();\n    var params = PieSeries.superCall(this, 'getDataParams', dataIndex); // FIXME toFixed?\n\n    var valueList = [];\n    data.each(data.mapDimension('value'), function (value) {\n      valueList.push(value);\n    });\n    params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\n    params.$vars.push('percent');\n    return params;\n  },\n  _defaultLabelLine: function (option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // \n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // \n    clockwise: true,\n    startAngle: 90,\n    // 0\n    minAngle: 0,\n    // If the angle of a sector less than `minShowLabelAngle`,\n    // the label will not be displayed.\n    minShowLabelAngle: 0,\n    // \n    selectedOffset: 10,\n    // \n    hoverOffset: 10,\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // singlemultiple\n    // selectedMode: false,\n    // 'radius' | 'area'\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    label: {\n      // If rotate around circle\n      rotate: false,\n      show: true,\n      // 'outer', 'inside', 'center'\n      position: 'outer' // formatter: Tooltip.formatter\n      // TEXTSTYLE\n      // distance: positioninnerlabel()\n\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      show: true,\n      // \n      length: 15,\n      // \n      length2: 15,\n      smooth: false,\n      lineStyle: {\n        // color: ,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    itemStyle: {\n      borderWidth: 1\n    },\n    // Animation type. Valid values: expansion, scale\n    animationType: 'expansion',\n    // Animation type when update. Valid values: transition, expansion\n    animationTypeUpdate: 'transition',\n    animationEasing: 'cubicOut'\n  }\n});\nzrUtil.mixin(PieSeries, dataSelectableMixin);\nvar _default = PieSeries;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar ChartView = require(\"../../view/Chart\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Series} seriesModel\n * @param {boolean} hasAnimation\n * @inner\n */\nfunction updateDataSelected(uid, seriesModel, hasAnimation, api) {\n  var data = seriesModel.getData();\n  var dataIndex = this.dataIndex;\n  var name = data.getName(dataIndex);\n  var selectedOffset = seriesModel.get('selectedOffset');\n  api.dispatchAction({\n    type: 'pieToggleSelect',\n    from: uid,\n    name: name,\n    seriesId: seriesModel.id\n  });\n  data.each(function (idx) {\n    toggleItemSelected(data.getItemGraphicEl(idx), data.getItemLayout(idx), seriesModel.isSelected(data.getName(idx)), selectedOffset, hasAnimation);\n  });\n}\n/**\n * @param {module:zrender/graphic/Sector} el\n * @param {Object} layout\n * @param {boolean} isSelected\n * @param {number} selectedOffset\n * @param {boolean} hasAnimation\n * @inner\n */\n\n\nfunction toggleItemSelected(el, layout, isSelected, selectedOffset, hasAnimation) {\n  var midAngle = (layout.startAngle + layout.endAngle) / 2;\n  var dx = Math.cos(midAngle);\n  var dy = Math.sin(midAngle);\n  var offset = isSelected ? selectedOffset : 0;\n  var position = [dx * offset, dy * offset];\n  hasAnimation // animateTo will stop revious animation like update transition\n  ? el.animate().when(200, {\n    position: position\n  }).start('bounceOut') : el.attr('position', position);\n}\n/**\n * Piece of pie including Sector, Label, LabelLine\n * @constructor\n * @extends {module:zrender/graphic/Group}\n */\n\n\nfunction PiePiece(data, idx) {\n  graphic.Group.call(this);\n  var sector = new graphic.Sector({\n    z2: 2\n  });\n  var polyline = new graphic.Polyline();\n  var text = new graphic.Text();\n  this.add(sector);\n  this.add(polyline);\n  this.add(text);\n  this.updateData(data, idx, true);\n}\n\nvar piePieceProto = PiePiece.prototype;\n\npiePieceProto.updateData = function (data, idx, firstCreate) {\n  var sector = this.childAt(0);\n  var labelLine = this.childAt(1);\n  var labelText = this.childAt(2);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var sectorShape = zrUtil.extend({}, layout);\n  sectorShape.label = null;\n  var animationTypeUpdate = seriesModel.getShallow('animationTypeUpdate');\n\n  if (firstCreate) {\n    sector.setShape(sectorShape);\n    var animationType = seriesModel.getShallow('animationType');\n\n    if (animationType === 'scale') {\n      sector.shape.r = layout.r0;\n      graphic.initProps(sector, {\n        shape: {\n          r: layout.r\n        }\n      }, seriesModel, idx);\n    } // Expansion\n    else {\n        sector.shape.endAngle = layout.startAngle;\n        graphic.updateProps(sector, {\n          shape: {\n            endAngle: layout.endAngle\n          }\n        }, seriesModel, idx);\n      }\n  } else {\n    if (animationTypeUpdate === 'expansion') {\n      // Sectors are set to be target shape and an overlaying clipPath is used for animation\n      sector.setShape(sectorShape);\n    } else {\n      // Transition animation from the old shape\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n  } // Update common style\n\n\n  var visualColor = data.getItemVisual(idx, 'color');\n  sector.useStyle(zrUtil.defaults({\n    lineJoin: 'bevel',\n    fill: visualColor\n  }, itemModel.getModel('itemStyle').getItemStyle()));\n  sector.hoverStyle = itemModel.getModel('emphasis.itemStyle').getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && sector.attr('cursor', cursorStyle); // Toggle selected\n\n  toggleItemSelected(this, data.getItemLayout(idx), seriesModel.isSelected(null, idx), seriesModel.get('selectedOffset'), seriesModel.get('animation')); // Label and text animation should be applied only for transition type animation when update\n\n  var withAnimation = !firstCreate && animationTypeUpdate === 'transition';\n\n  this._updateLabel(data, idx, withAnimation);\n\n  this.highDownOnUpdate = itemModel.get('hoverAnimation') && seriesModel.isAnimationEnabled() ? function (fromState, toState) {\n    if (toState === 'emphasis') {\n      labelLine.ignore = labelLine.hoverIgnore;\n      labelText.ignore = labelText.hoverIgnore; // Sector may has animation of updating data. Force to move to the last frame\n      // Or it may stopped on the wrong shape\n\n      sector.stopAnimation(true);\n      sector.animateTo({\n        shape: {\n          r: layout.r + seriesModel.get('hoverOffset')\n        }\n      }, 300, 'elasticOut');\n    } else {\n      labelLine.ignore = labelLine.normalIgnore;\n      labelText.ignore = labelText.normalIgnore;\n      sector.stopAnimation(true);\n      sector.animateTo({\n        shape: {\n          r: layout.r\n        }\n      }, 300, 'elasticOut');\n    }\n  } : null;\n  graphic.setHoverStyle(this);\n};\n\npiePieceProto._updateLabel = function (data, idx, withAnimation) {\n  var labelLine = this.childAt(1);\n  var labelText = this.childAt(2);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var labelLayout = layout.label;\n  var visualColor = data.getItemVisual(idx, 'color');\n\n  if (!labelLayout || isNaN(labelLayout.x) || isNaN(labelLayout.y)) {\n    labelText.ignore = labelText.normalIgnore = labelText.hoverIgnore = labelLine.ignore = labelLine.normalIgnore = labelLine.hoverIgnore = true;\n    return;\n  }\n\n  var targetLineShape = {\n    points: labelLayout.linePoints || [[labelLayout.x, labelLayout.y], [labelLayout.x, labelLayout.y], [labelLayout.x, labelLayout.y]]\n  };\n  var targetTextStyle = {\n    x: labelLayout.x,\n    y: labelLayout.y\n  };\n\n  if (withAnimation) {\n    graphic.updateProps(labelLine, {\n      shape: targetLineShape\n    }, seriesModel, idx);\n    graphic.updateProps(labelText, {\n      style: targetTextStyle\n    }, seriesModel, idx);\n  } else {\n    labelLine.attr({\n      shape: targetLineShape\n    });\n    labelText.attr({\n      style: targetTextStyle\n    });\n  }\n\n  labelText.attr({\n    rotation: labelLayout.rotation,\n    origin: [labelLayout.x, labelLayout.y],\n    z2: 10\n  });\n  var labelModel = itemModel.getModel('label');\n  var labelHoverModel = itemModel.getModel('emphasis.label');\n  var labelLineModel = itemModel.getModel('labelLine');\n  var labelLineHoverModel = itemModel.getModel('emphasis.labelLine');\n  var visualColor = data.getItemVisual(idx, 'color');\n  graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, labelHoverModel, {\n    labelFetcher: data.hostModel,\n    labelDataIndex: idx,\n    defaultText: data.getName(idx),\n    autoColor: visualColor,\n    useInsideStyle: !!labelLayout.inside\n  }, {\n    textAlign: labelLayout.textAlign,\n    textVerticalAlign: labelLayout.verticalAlign,\n    opacity: data.getItemVisual(idx, 'opacity')\n  });\n  labelText.ignore = labelText.normalIgnore = !labelModel.get('show');\n  labelText.hoverIgnore = !labelHoverModel.get('show');\n  labelLine.ignore = labelLine.normalIgnore = !labelLineModel.get('show');\n  labelLine.hoverIgnore = !labelLineHoverModel.get('show'); // Default use item visual color\n\n  labelLine.setStyle({\n    stroke: visualColor,\n    opacity: data.getItemVisual(idx, 'opacity')\n  });\n  labelLine.setStyle(labelLineModel.getModel('lineStyle').getLineStyle());\n  labelLine.hoverStyle = labelLineHoverModel.getModel('lineStyle').getLineStyle();\n  var smooth = labelLineModel.get('smooth');\n\n  if (smooth && smooth === true) {\n    smooth = 0.4;\n  }\n\n  labelLine.setShape({\n    smooth: smooth\n  });\n};\n\nzrUtil.inherits(PiePiece, graphic.Group); // Pie view\n\nvar PieView = ChartView.extend({\n  type: 'pie',\n  init: function () {\n    var sectorGroup = new graphic.Group();\n    this._sectorGroup = sectorGroup;\n  },\n  render: function (seriesModel, ecModel, api, payload) {\n    if (payload && payload.from === this.uid) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var hasAnimation = ecModel.get('animation');\n    var isFirstRender = !oldData;\n    var animationType = seriesModel.get('animationType');\n    var animationTypeUpdate = seriesModel.get('animationTypeUpdate');\n    var onSectorClick = zrUtil.curry(updateDataSelected, this.uid, seriesModel, hasAnimation, api);\n    var selectedMode = seriesModel.get('selectedMode');\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx); // Default expansion animation\n\n      if (isFirstRender && animationType !== 'scale') {\n        piePiece.eachChild(function (child) {\n          child.stopAnimation(true);\n        });\n      }\n\n      selectedMode && piePiece.on('click', onSectorClick);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n\n      if (!isFirstRender && animationTypeUpdate !== 'transition') {\n        piePiece.eachChild(function (child) {\n          child.stopAnimation(true);\n        });\n      }\n\n      piePiece.updateData(data, newIdx);\n      piePiece.off('click');\n      selectedMode && piePiece.on('click', onSectorClick);\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      group.remove(piePiece);\n    }).execute();\n\n    if (hasAnimation && data.count() > 0 && (isFirstRender ? animationType !== 'scale' : animationTypeUpdate !== 'transition')) {\n      var shape = data.getItemLayout(0);\n\n      for (var s = 1; isNaN(shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n\n      var r = Math.max(api.getWidth(), api.getHeight()) / 2;\n      var removeClipPath = zrUtil.bind(group.removeClipPath, group);\n      group.setClipPath(this._createClipPath(shape.cx, shape.cy, r, shape.startAngle, shape.clockwise, removeClipPath, seriesModel, isFirstRender));\n    } else {\n      // clipPath is used in first-time animation, so remove it when otherwise. See: #8994\n      group.removeClipPath();\n    }\n\n    this._data = data;\n  },\n  dispose: function () {},\n  _createClipPath: function (cx, cy, r, startAngle, clockwise, cb, seriesModel, isFirstRender) {\n    var clipPath = new graphic.Sector({\n      shape: {\n        cx: cx,\n        cy: cy,\n        r0: 0,\n        r: r,\n        startAngle: startAngle,\n        endAngle: startAngle,\n        clockwise: clockwise\n      }\n    });\n    var initOrUpdate = isFirstRender ? graphic.initProps : graphic.updateProps;\n    initOrUpdate(clipPath, {\n      shape: {\n        endAngle: startAngle + (clockwise ? 1 : -1) * Math.PI * 2\n      }\n    }, seriesModel, cb);\n    return clipPath;\n  },\n\n  /**\n   * @implement\n   */\n  containPoint: function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  }\n});\nvar _default = PieView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME emphasis label position is not same with normal label position\nvar RADIAN = Math.PI / 180;\n\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight) {\n  list.sort(function (a, b) {\n    return a.y - b.y;\n  });\n\n  function shiftDown(start, end, delta, dir) {\n    for (var j = start; j < end; j++) {\n      list[j].y += delta;\n\n      if (j > start && j + 1 < end && list[j + 1].y > list[j].y + list[j].height) {\n        shiftUp(j, delta / 2);\n        return;\n      }\n    }\n\n    shiftUp(end - 1, delta / 2);\n  }\n\n  function shiftUp(end, delta) {\n    for (var j = end; j >= 0; j--) {\n      list[j].y -= delta;\n\n      if (j > 0 && list[j].y > list[j - 1].y + list[j - 1].height) {\n        break;\n      }\n    }\n  }\n\n  function changeX(list, isDownList, cx, cy, r, dir) {\n    var lastDeltaX = dir > 0 ? isDownList // right-side\n    ? Number.MAX_VALUE // down\n    : 0 // up\n    : isDownList // left-side\n    ? Number.MAX_VALUE // down\n    : 0; // up\n\n    for (var i = 0, l = list.length; i < l; i++) {\n      var deltaY = Math.abs(list[i].y - cy);\n      var length = list[i].len;\n      var length2 = list[i].len2;\n      var deltaX = deltaY < r + length ? Math.sqrt((r + length + length2) * (r + length + length2) - deltaY * deltaY) : Math.abs(list[i].x - cx);\n\n      if (isDownList && deltaX >= lastDeltaX) {\n        // right-down, left-down\n        deltaX = lastDeltaX - 10;\n      }\n\n      if (!isDownList && deltaX <= lastDeltaX) {\n        // right-up, left-up\n        deltaX = lastDeltaX + 10;\n      }\n\n      list[i].x = cx + deltaX * dir;\n      lastDeltaX = deltaX;\n    }\n  }\n\n  var lastY = 0;\n  var delta;\n  var len = list.length;\n  var upList = [];\n  var downList = [];\n\n  for (var i = 0; i < len; i++) {\n    delta = list[i].y - lastY;\n\n    if (delta < 0) {\n      shiftDown(i, len, -delta, dir);\n    }\n\n    lastY = list[i].y + list[i].height;\n  }\n\n  if (viewHeight - lastY < 0) {\n    shiftUp(len - 1, lastY - viewHeight);\n  }\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].y >= cy) {\n      downList.push(list[i]);\n    } else {\n      upList.push(list[i]);\n    }\n  }\n\n  changeX(upList, false, cx, cy, r, dir);\n  changeX(downList, true, cx, cy, r, dir);\n}\n\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight) {\n  var leftList = [];\n  var rightList = [];\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    if (labelLayoutList[i].x < cx) {\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight);\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    var linePoints = labelLayoutList[i].linePoints;\n\n    if (linePoints) {\n      var dist = linePoints[1][0] - linePoints[2][0];\n\n      if (labelLayoutList[i].x < cx) {\n        linePoints[2][0] = labelLayoutList[i].x + 3;\n      } else {\n        linePoints[2][0] = labelLayoutList[i].x - 3;\n      }\n\n      linePoints[1][1] = linePoints[2][1] = labelLayoutList[i].y;\n      linePoints[1][0] = linePoints[2][0] + dist;\n    }\n  }\n}\n\nfunction isPositionCenter(layout) {\n  // Not change x for center label\n  return layout.position === 'center';\n}\n\nfunction _default(seriesModel, r, viewWidth, viewHeight, sum) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\n  data.each(function (idx) {\n    var layout = data.getItemLayout(idx);\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\n\n    var labelPosition = labelModel.get('position') || itemModel.get('emphasis.label.position');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var labelLineLen = labelLineModel.get('length');\n    var labelLineLen2 = labelLineModel.get('length2');\n\n    if (layout.angle < minShowLabelRadian) {\n      return;\n    }\n\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var dx = Math.cos(midAngle);\n    var dy = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = layout.cx;\n    cy = layout.cy;\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n    if (labelPosition === 'center') {\n      textX = layout.cx;\n      textY = layout.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (layout.r + layout.r0) / 2 * dx : layout.r * dx) + cx;\n      var y1 = (isLabelInside ? (layout.r + layout.r0) / 2 * dy : layout.r * dy) + cy;\n      textX = x1 + dx * 3;\n      textY = y1 + dy * 3;\n\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + dx * (labelLineLen + r - layout.r);\n        var y2 = y1 + dy * (labelLineLen + r - layout.r);\n        var x3 = x2 + (dx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n        textX = x3 + (dx < 0 ? -5 : 5);\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n\n      textAlign = isLabelInside ? 'center' : dx > 0 ? 'left' : 'right';\n    }\n\n    var font = labelModel.getFont();\n    var labelRotate;\n    var rotate = labelModel.get('rotate');\n\n    if (typeof rotate === 'number') {\n      labelRotate = rotate * (Math.PI / 180);\n    } else {\n      labelRotate = rotate ? dx < 0 ? -midAngle + Math.PI : -midAngle : 0;\n    }\n\n    var text = seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx);\n    var textRect = textContain.getBoundingRect(text, font, textAlign, 'top');\n    hasLabelRotate = !!labelRotate;\n    layout.label = {\n      x: textX,\n      y: textY,\n      position: labelPosition,\n      height: textRect.height,\n      len: labelLineLen,\n      len2: labelLineLen2,\n      linePoints: linePoints,\n      textAlign: textAlign,\n      verticalAlign: 'middle',\n      rotation: labelRotate,\n      inside: isLabelInside\n    }; // Not layout the inside label\n\n    if (!isLabelInside) {\n      labelLayoutList.push(layout.label);\n    }\n  });\n\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight);\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar linearMap = _number.linearMap;\n\nvar labelLayout = require(\"./labelLayout\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\n\nfunction _default(seriesType, ecModel, api, payload) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width);\n    var cy = parsePercent(center[1], height);\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var validDataCount = 0;\n    data.each(valueDim, function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum(valueDim); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n    var extent = data.getDataExtent(valueDim);\n    extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n    var restAngle = PI2;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    var dir = clockwise ? 1 : -1;\n    data.each(valueDim, function (value, idx) {\n      var angle;\n\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r\n        });\n        return;\n      } // FIXME  2.0  roseType  area \n\n\n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = PI2 / validDataCount;\n      }\n\n      if (angle < minAngle) {\n        angle = minAngle;\n        restAngle -= minAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n\n      var endAngle = currentAngle + dir * angle;\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: currentAngle,\n        endAngle: endAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r\n      });\n      currentAngle = endAngle;\n    }); // Some sector is constrained by minAngle\n    // Rest sectors needs recalculate angle\n\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle\n      if (restAngle <= 1e-3) {\n        var angle = PI2 / validDataCount;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout = data.getItemLayout(idx);\n            layout.angle = angle;\n            layout.startAngle = startAngle + dir * idx * angle;\n            layout.endAngle = startAngle + dir * (idx + 1) * angle;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout = data.getItemLayout(idx);\n            var angle = layout.angle === minAngle ? minAngle : value * unitRadian;\n            layout.startAngle = currentAngle;\n            layout.endAngle = currentAngle + dir * angle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n\n    labelLayout(seriesModel, r, width, height);\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"../component/radar\");\n\nrequire(\"./radar/RadarSeries\");\n\nrequire(\"./radar/RadarView\");\n\nvar dataColor = require(\"../visual/dataColor\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar radarLayout = require(\"./radar/radarLayout\");\n\nvar dataFilter = require(\"../processor/dataFilter\");\n\nvar backwardCompat = require(\"./radar/backwardCompat\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Must use radar component\necharts.registerVisual(dataColor('radar'));\necharts.registerVisual(visualSymbol('radar', 'circle'));\necharts.registerLayout(radarLayout);\necharts.registerProcessor(dataFilter('radar'));\necharts.registerPreprocessor(backwardCompat);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar createListSimply = require(\"../helper/createListSimply\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _format = require(\"../../util/format\");\n\nvar encodeHTML = _format.encodeHTML;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar RadarSeries = SeriesModel.extend({\n  type: 'series.radar',\n  dependencies: ['radar'],\n  // Overwrite\n  init: function (option) {\n    RadarSeries.superApply(this, 'init', arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n    this.legendDataProvider = function () {\n      return this.getRawData();\n    };\n  },\n  getInitialData: function (option, ecModel) {\n    return createListSimply(this, {\n      generateCoord: 'indicator_',\n      generateCoordCount: Infinity\n    });\n  },\n  formatTooltip: function (dataIndex) {\n    var data = this.getData();\n    var coordSys = this.coordinateSystem;\n    var indicatorAxes = coordSys.getIndicatorAxes();\n    var name = this.getData().getName(dataIndex);\n    return encodeHTML(name === '' ? this.name : name) + '<br/>' + zrUtil.map(indicatorAxes, function (axis, idx) {\n      var val = data.get(data.mapDimension(axis.dim), dataIndex);\n      return encodeHTML(axis.name + ' : ' + val);\n    }).join('<br />');\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'radar',\n    legendHoverLink: true,\n    radarIndex: 0,\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    label: {\n      position: 'top'\n    },\n    // areaStyle: {\n    // },\n    // itemStyle: {}\n    symbol: 'emptyCircle',\n    symbolSize: 4 // symbolRotate: null\n\n  }\n});\nvar _default = RadarSeries;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar symbolUtil = require(\"../../util/symbol\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction normalizeSymbolSize(symbolSize) {\n  if (!zrUtil.isArray(symbolSize)) {\n    symbolSize = [+symbolSize, +symbolSize];\n  }\n\n  return symbolSize;\n}\n\nvar _default = echarts.extendChartView({\n  type: 'radar',\n  render: function (seriesModel, ecModel, api) {\n    var polar = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n\n    function createSymbol(data, idx) {\n      var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n      var color = data.getItemVisual(idx, 'color');\n\n      if (symbolType === 'none') {\n        return;\n      }\n\n      var symbolSize = normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n      var symbolPath = symbolUtil.createSymbol(symbolType, -1, -1, 2, 2, color);\n      symbolPath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 100,\n        scale: [symbolSize[0] / 2, symbolSize[1] / 2]\n      });\n      return symbolPath;\n    }\n\n    function updateSymbols(oldPoints, newPoints, symbolGroup, data, idx, isInit) {\n      // Simply rerender all\n      symbolGroup.removeAll();\n\n      for (var i = 0; i < newPoints.length - 1; i++) {\n        var symbolPath = createSymbol(data, idx);\n\n        if (symbolPath) {\n          symbolPath.__dimIdx = i;\n\n          if (oldPoints[i]) {\n            symbolPath.attr('position', oldPoints[i]);\n            graphic[isInit ? 'initProps' : 'updateProps'](symbolPath, {\n              position: newPoints[i]\n            }, seriesModel, idx);\n          } else {\n            symbolPath.attr('position', newPoints[i]);\n          }\n\n          symbolGroup.add(symbolPath);\n        }\n      }\n    }\n\n    function getInitialPoints(points) {\n      return zrUtil.map(points, function (pt) {\n        return [polar.cx, polar.cy];\n      });\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var points = data.getItemLayout(idx);\n\n      if (!points) {\n        return;\n      }\n\n      var polygon = new graphic.Polygon();\n      var polyline = new graphic.Polyline();\n      var target = {\n        shape: {\n          points: points\n        }\n      };\n      polygon.shape.points = getInitialPoints(points);\n      polyline.shape.points = getInitialPoints(points);\n      graphic.initProps(polygon, target, seriesModel, idx);\n      graphic.initProps(polyline, target, seriesModel, idx);\n      var itemGroup = new graphic.Group();\n      var symbolGroup = new graphic.Group();\n      itemGroup.add(polyline);\n      itemGroup.add(polygon);\n      itemGroup.add(symbolGroup);\n      updateSymbols(polyline.shape.points, points, symbolGroup, data, idx, true);\n      data.setItemGraphicEl(idx, itemGroup);\n    }).update(function (newIdx, oldIdx) {\n      var itemGroup = oldData.getItemGraphicEl(oldIdx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2);\n      var target = {\n        shape: {\n          points: data.getItemLayout(newIdx)\n        }\n      };\n\n      if (!target.shape.points) {\n        return;\n      }\n\n      updateSymbols(polyline.shape.points, target.shape.points, symbolGroup, data, newIdx, false);\n      graphic.updateProps(polyline, target, seriesModel);\n      graphic.updateProps(polygon, target, seriesModel);\n      data.setItemGraphicEl(newIdx, itemGroup);\n    }).remove(function (idx) {\n      group.remove(oldData.getItemGraphicEl(idx));\n    }).execute();\n    data.eachItemGraphicEl(function (itemGroup, idx) {\n      var itemModel = data.getItemModel(idx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2);\n      var color = data.getItemVisual(idx, 'color');\n      group.add(itemGroup);\n      polyline.useStyle(zrUtil.defaults(itemModel.getModel('lineStyle').getLineStyle(), {\n        fill: 'none',\n        stroke: color\n      }));\n      polyline.hoverStyle = itemModel.getModel('emphasis.lineStyle').getLineStyle();\n      var areaStyleModel = itemModel.getModel('areaStyle');\n      var hoverAreaStyleModel = itemModel.getModel('emphasis.areaStyle');\n      var polygonIgnore = areaStyleModel.isEmpty() && areaStyleModel.parentModel.isEmpty();\n      var hoverPolygonIgnore = hoverAreaStyleModel.isEmpty() && hoverAreaStyleModel.parentModel.isEmpty();\n      hoverPolygonIgnore = hoverPolygonIgnore && polygonIgnore;\n      polygon.ignore = polygonIgnore;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: color,\n        opacity: 0.7\n      }));\n      polygon.hoverStyle = hoverAreaStyleModel.getAreaStyle();\n      var itemStyle = itemModel.getModel('itemStyle').getItemStyle(['color']);\n      var itemHoverStyle = itemModel.getModel('emphasis.itemStyle').getItemStyle();\n      var labelModel = itemModel.getModel('label');\n      var labelHoverModel = itemModel.getModel('emphasis.label');\n      symbolGroup.eachChild(function (symbolPath) {\n        symbolPath.setStyle(itemStyle);\n        symbolPath.hoverStyle = zrUtil.clone(itemHoverStyle);\n        var defaultText = data.get(data.dimensions[symbolPath.__dimIdx], idx);\n        (defaultText == null || isNaN(defaultText)) && (defaultText = '');\n        graphic.setLabelStyle(symbolPath.style, symbolPath.hoverStyle, labelModel, labelHoverModel, {\n          labelFetcher: data.hostModel,\n          labelDataIndex: idx,\n          labelDimIndex: symbolPath.__dimIdx,\n          defaultText: defaultText,\n          autoColor: color,\n          isRectText: true\n        });\n      });\n\n      itemGroup.highDownOnUpdate = function (fromState, toState) {\n        polygon.attr('ignore', toState === 'emphasis' ? hoverPolygonIgnore : polygonIgnore);\n      };\n\n      graphic.setHoverStyle(itemGroup);\n    });\n    this._data = data;\n  },\n  remove: function () {\n    this.group.removeAll();\n    this._data = null;\n  },\n  dispose: function () {}\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Backward compat for radar chart in 2\nfunction _default(option) {\n  var polarOptArr = option.polar;\n\n  if (polarOptArr) {\n    if (!zrUtil.isArray(polarOptArr)) {\n      polarOptArr = [polarOptArr];\n    }\n\n    var polarNotRadar = [];\n    zrUtil.each(polarOptArr, function (polarOpt, idx) {\n      if (polarOpt.indicator) {\n        if (polarOpt.type && !polarOpt.shape) {\n          polarOpt.shape = polarOpt.type;\n        }\n\n        option.radar = option.radar || [];\n\n        if (!zrUtil.isArray(option.radar)) {\n          option.radar = [option.radar];\n        }\n\n        option.radar.push(polarOpt);\n      } else {\n        polarNotRadar.push(polarOpt);\n      }\n    });\n    option.polar = polarNotRadar;\n  }\n\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'radar' && seriesOpt.polarIndex) {\n      seriesOpt.radarIndex = seriesOpt.polarIndex;\n    }\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  ecModel.eachSeriesByType('radar', function (seriesModel) {\n    var data = seriesModel.getData();\n    var points = [];\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (!coordSys) {\n      return;\n    }\n\n    var axes = coordSys.getIndicatorAxes();\n    zrUtil.each(axes, function (axis, axisIndex) {\n      data.each(data.mapDimension(axes[axisIndex].dim), function (val, dataIndex) {\n        points[dataIndex] = points[dataIndex] || [];\n        var point = coordSys.dataToPoint(val, axisIndex);\n        points[dataIndex][axisIndex] = isValidPoint(point) ? point : getValueMissingPoint(coordSys);\n      });\n    }); // Close polygon\n\n    data.each(function (idx) {\n      // TODO\n      // Is it appropriate to connect to the next data when some data is missing?\n      // Or, should trade it like `connectNull` in line chart?\n      var firstPoint = zrUtil.find(points[idx], function (point) {\n        return isValidPoint(point);\n      }) || getValueMissingPoint(coordSys); // Copy the first actual point to the end of the array\n\n      points[idx].push(firstPoint.slice());\n      data.setItemLayout(idx, points[idx]);\n    });\n  });\n}\n\nfunction isValidPoint(point) {\n  return !isNaN(point[0]) && !isNaN(point[1]);\n}\n\nfunction getValueMissingPoint(coordSys) {\n  // It is error-prone to input [NaN, NaN] into polygon, polygon.\n  // (probably cause problem when refreshing or animating)\n  return [coordSys.cx, coordSys.cy];\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./scatter/ScatterSeries\");\n\nrequire(\"./scatter/ScatterView\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar layoutPoints = require(\"../layout/points\");\n\nrequire(\"../component/gridSimple\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import * as zrUtil from 'zrender/src/core/util';\n// In case developer forget to include grid component\necharts.registerVisual(visualSymbol('scatter', 'circle'));\necharts.registerLayout(layoutPoints('scatter')); // echarts.registerProcessor(function (ecModel, api) {\n//     ecModel.eachSeriesByType('scatter', function (seriesModel) {\n//         var data = seriesModel.getData();\n//         var coordSys = seriesModel.coordinateSystem;\n//         if (coordSys.type !== 'geo') {\n//             return;\n//         }\n//         var startPt = coordSys.pointToData([0, 0]);\n//         var endPt = coordSys.pointToData([api.getWidth(), api.getHeight()]);\n//         var dims = zrUtil.map(coordSys.dimensions, function (dim) {\n//             return data.mapDimension(dim);\n//         });\n//         var range = {};\n//         range[dims[0]] = [Math.min(startPt[0], endPt[0]), Math.max(startPt[0], endPt[0])];\n//         range[dims[1]] = [Math.min(startPt[1], endPt[1]), Math.max(startPt[1], endPt[1])];\n//         data.selectRange(range);\n//     });\n// });","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = SeriesModel.extend({\n  type: 'series.scatter',\n  dependencies: ['grid', 'polar', 'geo', 'singleAxis', 'calendar'],\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(this.getSource(), this);\n  },\n  brushSelector: 'point',\n  getProgressive: function () {\n    var progressive = this.option.progressive;\n\n    if (progressive == null) {\n      // PENDING\n      return this.option.large ? 5e3 : this.get('progressive');\n    }\n\n    return progressive;\n  },\n  getProgressiveThreshold: function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n\n    if (progressiveThreshold == null) {\n      // PENDING\n      return this.option.large ? 1e4 : this.get('progressiveThreshold');\n    }\n\n    return progressiveThreshold;\n  },\n  defaultOption: {\n    coordinateSystem: 'cartesian2d',\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // symbol: null,        // \n    symbolSize: 10,\n    // symbolSize * 2\n    // symbolRotate: null,  // \n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    // cursor: null,\n    // label: {\n    // show: false\n    // distance: 5,\n    // formatter: Tooltip.formatter\n    // position: 'top''right'\n    //           'inside'|'left'|'right'|'top'|'bottom'\n    // TEXTSTYLE\n    // },\n    itemStyle: {\n      opacity: 0.8 // color: \n\n    },\n    // If clip the overflow graphics\n    // Works on cartesian / polar series\n    clip: true // progressive: null\n\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar SymbolDraw = require(\"../helper/SymbolDraw\");\n\nvar LargeSymbolDraw = require(\"../helper/LargeSymbolDraw\");\n\nvar pointsLayout = require(\"../../layout/points\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\necharts.extendChartView({\n  type: 'scatter',\n  render: function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.updateData(data, {\n      // TODO\n      // If this parameter should be a shape or a bounding volume\n      // shape will be more general.\n      // But bounding volume like bounding rect will be much faster in the contain calculation\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = true;\n  },\n  incrementalPrepareRender: function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.incrementalPrepareUpdate(data);\n    this._finished = false;\n  },\n  incrementalRender: function (taskParams, seriesModel, ecModel) {\n    this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\n      clipShape: this._getClipShape(seriesModel)\n    });\n\n    this._finished = taskParams.end === seriesModel.getData().count();\n  },\n  updateTransform: function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData(); // Must mark group dirty and make sure the incremental layer will be cleared\n    // PENDING\n\n    this.group.dirty();\n\n    if (!this._finished || data.count() > 1e4 || !this._symbolDraw.isPersistent()) {\n      return {\n        update: true\n      };\n    } else {\n      var res = pointsLayout().reset(seriesModel);\n\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count()\n        }, data);\n      }\n\n      this._symbolDraw.updateLayout(data);\n    }\n  },\n  _getClipShape: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  },\n  _updateSymbolDraw: function (data, seriesModel) {\n    var symbolDraw = this._symbolDraw;\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n\n    if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\n      symbolDraw && symbolDraw.remove();\n      symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\n      this._isLargeDraw = isLargeDraw;\n      this.group.removeAll();\n    }\n\n    this.group.add(symbolDraw.group);\n    return symbolDraw;\n  },\n  remove: function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n    this._symbolDraw = null;\n  },\n  dispose: function () {}\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"../coord/cartesian/AxisModel\");\n\nrequire(\"./axis/CartesianAxisView\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar retrieve = _util.retrieve;\nvar defaults = _util.defaults;\nvar extend = _util.extend;\nvar each = _util.each;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _number = require(\"../../util/number\");\n\nvar isRadianAroundZero = _number.isRadianAroundZero;\nvar remRadian = _number.remRadian;\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar matrixUtil = require(\"zrender/lib/core/matrix\");\n\nvar _vector = require(\"zrender/lib/core/vector\");\n\nvar v2ApplyTransform = _vector.applyTransform;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar shouldShowAllLabels = _axisHelper.shouldShowAllLabels;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI = Math.PI;\n/**\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n * for example: (0, 0) ------------> (0, 50)\n *\n * nameDirection or tickDirection or labelDirection is 1 means tick\n * or label is below the standard axis, whereas is -1 means above\n * the standard axis. labelOffset means offset between label and axis,\n * which is useful when 'onZero', where axisLabel is in the grid and\n * label in outside grid.\n *\n * Tips: like always,\n * positive rotation represents anticlockwise, and negative rotation\n * represents clockwise.\n * The direction of position coordinate is the same as the direction\n * of screen coordinate.\n *\n * Do not need to consider axis 'inverse', which is auto processed by\n * axis extent.\n *\n * @param {module:zrender/container/Group} group\n * @param {Object} axisModel\n * @param {Object} opt Standard axis parameters.\n * @param {Array.<number>} opt.position [x, y]\n * @param {number} opt.rotation by radian\n * @param {number} [opt.nameDirection=1] 1 or -1 Used when nameLocation is 'middle' or 'center'.\n * @param {number} [opt.tickDirection=1] 1 or -1\n * @param {number} [opt.labelDirection=1] 1 or -1\n * @param {number} [opt.labelOffset=0] Usefull when onZero.\n * @param {string} [opt.axisLabelShow] default get from axisModel.\n * @param {string} [opt.axisName] default get from axisModel.\n * @param {number} [opt.axisNameAvailableWidth]\n * @param {number} [opt.labelRotate] by degree, default get from axisModel.\n * @param {number} [opt.strokeContainThreshold] Default label interval when label\n * @param {number} [opt.nameTruncateMaxWidth]\n */\n\nvar AxisBuilder = function (axisModel, opt) {\n  /**\n   * @readOnly\n   */\n  this.opt = opt;\n  /**\n   * @readOnly\n   */\n\n  this.axisModel = axisModel; // Default value\n\n  defaults(opt, {\n    labelOffset: 0,\n    nameDirection: 1,\n    tickDirection: 1,\n    labelDirection: 1,\n    silent: true\n  });\n  /**\n   * @readOnly\n   */\n\n  this.group = new graphic.Group(); // FIXME Not use a seperate text group?\n\n  var dumbGroup = new graphic.Group({\n    position: opt.position.slice(),\n    rotation: opt.rotation\n  }); // this.group.add(dumbGroup);\n  // this._dumbGroup = dumbGroup;\n\n  dumbGroup.updateTransform();\n  this._transform = dumbGroup.transform;\n  this._dumbGroup = dumbGroup;\n};\n\nAxisBuilder.prototype = {\n  constructor: AxisBuilder,\n  hasBuilder: function (name) {\n    return !!builders[name];\n  },\n  add: function (name) {\n    builders[name].call(this);\n  },\n  getGroup: function () {\n    return this.group;\n  }\n};\nvar builders = {\n  /**\n   * @private\n   */\n  axisLine: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n\n    if (!axisModel.get('axisLine.show')) {\n      return;\n    }\n\n    var extent = this.axisModel.axis.getExtent();\n    var matrix = this._transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel('axisLine.lineStyle').getLineStyle());\n    this.group.add(new graphic.Line({\n      // Id for animation\n      anid: 'line',\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    }));\n    var arrows = axisModel.get('axisLine.symbol');\n    var arrowSize = axisModel.get('axisLine.symbolSize');\n    var arrowOffset = axisModel.get('axisLine.symbolOffset') || 0;\n\n    if (typeof arrowOffset === 'number') {\n      arrowOffset = [arrowOffset, arrowOffset];\n    }\n\n    if (arrows != null) {\n      if (typeof arrows === 'string') {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n\n      if (typeof arrowSize === 'string' || typeof arrowSize === 'number') {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n\n      var symbolWidth = arrowSize[0];\n      var symbolHeight = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth / 2, -symbolHeight / 2, symbolWidth, symbolHeight, lineStyle.stroke, true); // Calculate arrow position with offset\n\n          var r = point.r + point.offset;\n          var pos = [pt1[0] + r * Math.cos(opt.rotation), pt1[1] - r * Math.sin(opt.rotation)];\n          symbol.attr({\n            rotation: point.rotate,\n            position: pos,\n            silent: true,\n            z2: 11\n          });\n          this.group.add(symbol);\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @private\n   */\n  axisTickLabel: function () {\n    var axisModel = this.axisModel;\n    var opt = this.opt;\n    var tickEls = buildAxisTick(this, axisModel, opt);\n    var labelEls = buildAxisLabel(this, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, tickEls);\n  },\n\n  /**\n   * @private\n   */\n  axisName: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n\n    if (!name) {\n      return;\n    }\n\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = this.axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // 'middle'\n    // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n\n    var axisNameAvailableWidth;\n\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth); // FIXME\n    // truncate rich text? (consider performance)\n\n    var truncatedText = ellipsis != null && maxWidth != null ? formatUtil.truncateText(name, maxWidth, textFont, ellipsis, {\n      minChar: 2,\n      placeholder: truncateOpt.placeholder\n    }) : name;\n    var tooltipOpt = axisModel.get('tooltip', true);\n    var mainType = axisModel.mainType;\n    var formatterParams = {\n      componentType: mainType,\n      name: name,\n      $vars: ['name']\n    };\n    formatterParams[mainType + 'Index'] = axisModel.componentIndex;\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'name',\n      __fullText: name,\n      __truncatedText: truncatedText,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: isLabelSilent(axisModel),\n      z2: 1,\n      tooltip: tooltipOpt && tooltipOpt.show ? extend({\n        content: name,\n        formatter: function () {\n          return name;\n        },\n        formatterParams: formatterParams\n      }, tooltipOpt) : null\n    });\n    graphic.setTextStyle(textEl.style, textStyleModel, {\n      text: truncatedText,\n      textFont: textFont,\n      textFill: textStyleModel.getTextColor() || axisModel.get('axisLine.lineStyle.color'),\n      textAlign: textStyleModel.get('align') || labelLayout.textAlign,\n      textVerticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n    });\n\n    if (axisModel.get('triggerEvent')) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisName';\n      textEl.eventData.name = name;\n    } // FIXME\n\n\n    this._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    this.group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\n\nvar makeAxisEventDataBase = AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n  var eventData = {\n    componentType: axisModel.mainType,\n    componentIndex: axisModel.componentIndex\n  };\n  eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n  return eventData;\n};\n/**\n * @public\n * @static\n * @param {Object} opt\n * @param {number} axisRotation in radian\n * @param {number} textRotation in radian\n * @param {number} direction\n * @return {Object} {\n *  rotation, // according to axis\n *  textAlign,\n *  textVerticalAlign\n * }\n */\n\n\nvar innerTextLayout = AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n  var rotationDiff = remRadian(textRotation - axisRotation);\n  var textAlign;\n  var textVerticalAlign;\n\n  if (isRadianAroundZero(rotationDiff)) {\n    // Label is parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI)) {\n    // Label is inverse parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff > 0 && rotationDiff < PI) {\n      textAlign = direction > 0 ? 'right' : 'left';\n    } else {\n      textAlign = direction > 0 ? 'left' : 'right';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n};\n\nfunction endTextLayout(opt, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - opt.rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nvar isLabelSilent = AxisBuilder.isLabelSilent = function (axisModel) {\n  var tooltipOpt = axisModel.get('tooltip');\n  return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n  || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n};\n\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  } // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n\n\n  var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n  var showMaxLabel = axisModel.get('axisLabel.showMaxLabel'); // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\n\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\n\nfunction isTwoLabelOverlapped(current, next, labelLayout) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n\n  if (!firstRect || !nextRect) {\n    return;\n  } // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\n\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\n\nfunction buildAxisTick(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n\n  if (!axisModel.get('axisTick.show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var tickModel = axisModel.getModel('axisTick');\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickLen = tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var pt1 = [];\n  var pt2 = [];\n  var matrix = axisBuilder._transform;\n  var tickEls = [];\n\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = opt.tickDirection * tickLen;\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    } // Tick line, Not use group transform to have better line draw\n\n\n    var tickEl = new graphic.Line({\n      // Id for animation\n      anid: 'tick_' + ticksCoords[i].tickValue,\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: defaults(lineStyleModel.getLineStyle(), {\n        stroke: axisModel.get('axisLine.lineStyle.color')\n      }),\n      z2: 2,\n      silent: true\n    });\n    axisBuilder.group.add(tickEl);\n    tickEls.push(tickEl);\n  }\n\n  return tickEls;\n}\n\nfunction buildAxisLabel(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get('axisLabel.show'));\n\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels(); // Special label rotate.\n\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n\n    if (rawCategoryData && rawCategoryData[tickValue] && rawCategoryData[tickValue].textStyle) {\n      itemLabelModel = new Model(rawCategoryData[tickValue].textStyle, labelModel, axisModel.ecModel);\n    }\n\n    var textColor = itemLabelModel.getTextColor() || axisModel.get('axisLine.lineStyle.color');\n    var tickCoord = axis.dataToCoord(tickValue);\n    var pos = [tickCoord, opt.labelOffset + opt.labelDirection * labelMargin];\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'label_' + tickValue,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10\n    });\n    graphic.setTextStyle(textEl.style, itemLabelModel, {\n      text: formattedLabel,\n      textAlign: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n      textVerticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n      textFill: typeof textColor === 'function' ? textColor( // (1) In category axis with data zoom, tick is not the original\n      // index of axis.data. So tick should not be exposed to user\n      // in category axis.\n      // (2) Compatible with previous version, which always use formatted label as\n      // input. But in interval scale the formatted label is like '223,445', which\n      // maked user repalce ','. So we modify it to return original val but remain\n      // it as 'string' to avoid error in replacing.\n      axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n    }); // Pack data for mouse event\n\n    if (triggerEvent) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisLabel';\n      textEl.eventData.value = rawLabel;\n    } // FIXME\n\n\n    axisBuilder._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    axisBuilder.group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\n\nvar _default = AxisBuilder;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar axisPointerModelHelper = require(\"../axisPointer/modelHelper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Base class of AxisView.\n */\nvar AxisView = echarts.extendComponentView({\n  type: 'axis',\n\n  /**\n   * @private\n   */\n  _axisPointer: null,\n\n  /**\n   * @protected\n   * @type {string}\n   */\n  axisPointerClass: null,\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    AxisView.superApply(this, 'render', arguments);\n    updateAxisPointer(this, axisModel, ecModel, api, payload, true);\n  },\n\n  /**\n   * Action handler.\n   * @public\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/model/Global} ecModel\n   * @param {module:echarts/ExtensionAPI} api\n   * @param {Object} payload\n   */\n  updateAxisPointer: function (axisModel, ecModel, api, payload, force) {\n    updateAxisPointer(this, axisModel, ecModel, api, payload, false);\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n    AxisView.superApply(this, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    disposeAxisPointer(this, api);\n    AxisView.superApply(this, 'dispose', arguments);\n  }\n});\n\nfunction updateAxisPointer(axisView, axisModel, ecModel, api, payload, forceRender) {\n  var Clazz = AxisView.getAxisPointerClass(axisView.axisPointerClass);\n\n  if (!Clazz) {\n    return;\n  }\n\n  var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n  axisPointerModel ? (axisView._axisPointer || (axisView._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : disposeAxisPointer(axisView, api);\n}\n\nfunction disposeAxisPointer(axisView, ecModel, api) {\n  var axisPointer = axisView._axisPointer;\n  axisPointer && axisPointer.dispose(ecModel, api);\n  axisView._axisPointer = null;\n}\n\nvar axisPointerClazz = [];\n\nAxisView.registerAxisPointerClass = function (type, clazz) {\n  axisPointerClazz[type] = clazz;\n};\n\nAxisView.getAxisPointerClass = function (type) {\n  return type && axisPointerClazz[type];\n};\n\nvar _default = AxisView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar AxisBuilder = require(\"./AxisBuilder\");\n\nvar AxisView = require(\"./AxisView\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine']; // function getAlignWithLabel(model, axisModel) {\n//     var alignWithLabel = model.get('alignWithLabel');\n//     if (alignWithLabel === 'auto') {\n//         alignWithLabel = axisModel.get('axisTick.alignWithLabel');\n//     }\n//     return alignWithLabel;\n// }\n\nvar CartesianAxisView = AxisView.extend({\n  type: 'cartesianAxis',\n  axisPointerClass: 'CartesianAxisPointer',\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get(name + '.show')) {\n        this['_' + name](axisModel, gridModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    CartesianAxisView.superCall(this, 'render', axisModel, ecModel, api, payload);\n  },\n  remove: function () {\n    this._splitAreaColors = null;\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitLine: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = []; // Simple optimization\n    // Batching the lines if color are the same\n\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n\n      this._axisGroup.add(new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        subPixelOptimize: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitArea: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitAreaModel = axisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitAreaModel,\n      clamp: true\n    });\n\n    if (!ticksCoords.length) {\n      return;\n    } // For Making appropriate splitArea animation, the color and anid\n    // should be corresponding to previous one if possible.\n\n\n    var areaColorsLen = areaColors.length;\n    var lastSplitAreaColors = this._splitAreaColors;\n    var newSplitAreaColors = zrUtil.createHashMap();\n    var colorIndex = 0;\n\n    if (lastSplitAreaColors) {\n      for (var i = 0; i < ticksCoords.length; i++) {\n        var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n        if (cIndex != null) {\n          colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n          break;\n        }\n      }\n    }\n\n    var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n    var areaStyle = areaStyleModel.getAreaStyle();\n    areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n    for (var i = 1; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n      var x;\n      var y;\n      var width;\n      var height;\n\n      if (axis.isHorizontal()) {\n        x = prev;\n        y = gridRect.y;\n        width = tickCoord - x;\n        height = gridRect.height;\n        prev = x + width;\n      } else {\n        x = gridRect.x;\n        y = prev;\n        width = gridRect.width;\n        height = tickCoord - y;\n        prev = y + height;\n      }\n\n      var tickValue = ticksCoords[i - 1].tickValue;\n      tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n\n      this._axisGroup.add(new graphic.Rect({\n        anid: tickValue != null ? 'area_' + tickValue : null,\n        shape: {\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        },\n        style: zrUtil.defaults({\n          fill: areaColors[colorIndex]\n        }, areaStyle),\n        silent: true\n      }));\n\n      colorIndex = (colorIndex + 1) % areaColorsLen;\n    }\n\n    this._splitAreaColors = newSplitAreaColors;\n  }\n});\nCartesianAxisView.extend({\n  type: 'xAxis'\n});\nCartesianAxisView.extend({\n  type: 'yAxis'\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisPointerModelHelper = require(\"./axisPointer/modelHelper\");\n\nvar axisTrigger = require(\"./axisPointer/axisTrigger\");\n\nrequire(\"./axisPointer/AxisPointerModel\");\n\nrequire(\"./axisPointer/AxisPointerView\");\n\nrequire(\"./axisPointer/CartesianAxisPointer\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// CartesianAxisPointer is not supposed to be required here. But consider\n// echarts.simple.js and online build tooltip, which only require gridSimple,\n// CartesianAxisPointer should be able to required somewhere.\necharts.registerPreprocessor(function (option) {\n  // Always has a global axisPointerModel for default setting.\n  if (option) {\n    (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n    var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n    // is not set, remain null/undefined, otherwise it will\n    // override existent link setting.\n\n    if (link && !zrUtil.isArray(link)) {\n      option.axisPointer.link = [link];\n    }\n  }\n}); // This process should proformed after coordinate systems created\n// and series data processed. So put it on statistic processing stage.\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n  // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n  // allAxesInfo should be updated when setOption performed.\n  ecModel.getComponent('axisPointer').coordSysAxesInfo = axisPointerModelHelper.collect(ecModel, api);\n}); // Broadcast to all views.\n\necharts.registerAction({\n  type: 'updateAxisPointer',\n  event: 'updateAxisPointer',\n  update: ':updateAxisPointer'\n}, axisTrigger);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerModel = echarts.extendComponentModel({\n  type: 'axisPointer',\n  coordSysAxesInfo: null,\n  defaultOption: {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: null,\n    // set default in AxisPonterView.js\n    zlevel: 0,\n    z: 50,\n    type: 'line',\n    // 'line' 'shadow' 'cross' 'none'.\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    // Init value depends on whether handle is used.\n    // [group0, group1, ...]\n    // Each group can be: {\n    //      mapper: function () {},\n    //      singleTooltip: 'multiple',  // 'multiple' or 'single'\n    //      xAxisId: ...,\n    //      yAxisName: ...,\n    //      angleAxisIndex: ...\n    // }\n    // mapper: can be ignored.\n    //      input: {axisInfo, value}\n    //      output: {axisInfo, value}\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      type: 'solid'\n    },\n    shadowStyle: {\n      color: 'rgba(150,150,150,0.3)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      // string | Function\n      precision: 'auto',\n      // Or a number like 0, 1, 2 ...\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      // default: axis line color\n      borderColor: null,\n      borderWidth: 0,\n      shadowBlur: 3,\n      shadowColor: '#aaa' // Considering applicability, common style should\n      // better not have shadowOffset.\n      // shadowOffsetX: 0,\n      // shadowOffsetY: 2\n\n    },\n    handle: {\n      show: false,\n\n      /* eslint-disable */\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      // jshint ignore:line\n\n      /* eslint-enable */\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  }\n});\nvar _default = AxisPointerModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar globalListener = require(\"./globalListener\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerView = echarts.extendComponentView({\n  type: 'axisPointer',\n  render: function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    globalListener.unregister(api.getZr(), 'axisPointer');\n    AxisPointerView.superApply(this._model, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n    AxisPointerView.superApply(this._model, 'dispose', arguments);\n  }\n});\nvar _default = AxisPointerView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar clazzUtil = require(\"../../util/clazz\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar axisPointerModelHelper = require(\"./modelHelper\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar throttleUtil = require(\"../../util/throttle\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n * Implemenents {module:echarts/component/axis/IAxisPointer}.\n */\n\nfunction BaseAxisPointer() {}\n\nBaseAxisPointer.prototype = {\n  /**\n   * @private\n   */\n  _group: null,\n\n  /**\n   * @private\n   */\n  _lastGraphicKey: null,\n\n  /**\n   * @private\n   */\n  _handle: null,\n\n  /**\n   * @private\n   */\n  _dragging: false,\n\n  /**\n   * @private\n   */\n  _lastValue: null,\n\n  /**\n   * @private\n   */\n  _lastStatus: null,\n\n  /**\n   * @private\n   */\n  _payloadInfo: null,\n\n  /**\n   * In px, arbitrary value. Do not set too small,\n   * no animation is ok for most cases.\n   * @protected\n   */\n  animationThreshold: 15,\n\n  /**\n   * @implement\n   */\n  render: function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps, axisPointerModel);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  },\n\n  /**\n   * @implement\n   */\n  remove: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @implement\n   */\n  dispose: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @protected\n   */\n  determineAnimation: function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  },\n\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  },\n\n  /**\n   * @protected\n   */\n  createPointerEl: function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  createLabelEl: function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Rect(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updatePointerEl: function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updateLabelEl: function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        shape: elOption.label.shape,\n        position: elOption.label.position\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderHandle: function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    var includeStyles = ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n    handle.setStyle(handleModel.getItemStyle(null, includeStyles)); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.attr('scale', [handleSize[0] / 2, handleSize[1] / 2]);\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  },\n\n  /**\n   * @private\n   */\n  _moveHandleToValue: function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragMove: function (dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  },\n\n  /**\n   * Throttled method.\n   * @private\n   */\n  _doDispatchAxisPointer: function () {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragEnd: function (moveAnimation) {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  },\n\n  /**\n   * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {number} value\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0}\n   */\n  getHandleTransform: null,\n\n  /**\n   * * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {Object} transform {position, rotation}\n   * @param {Array.<number>} delta [dx, dy]\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0, cursorPoint: [x, y]}\n   */\n  updateHandleTransform: null,\n\n  /**\n   * @private\n   */\n  clear: function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n  },\n\n  /**\n   * @protected\n   */\n  doClear: function () {// Implemented by sub-class if necessary.\n  },\n\n  /**\n   * @protected\n   * @param {Array.<number>} xy\n   * @param {Array.<number>} wh\n   * @param {number} [xDimIndex=0] or 1\n   */\n  buildLabel: function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  }\n};\nBaseAxisPointer.prototype.constructor = BaseAxisPointer;\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals = equals && propsEqual(lastProps[key], item);\n    });\n    return !!equals;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get('label.show') ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    position: trans.position.slice(),\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nclazzUtil.enableClassExtend(BaseAxisPointer);\nvar _default = BaseAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BaseAxisPointer = require(\"./BaseAxisPointer\");\n\nvar viewHelper = require(\"./viewHelper\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\nvar AxisView = require(\"../axis/AxisView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar CartesianAxisPointer = BaseAxisPointer.extend({\n  /**\n   * @override\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  },\n\n  /**\n   * @override\n   */\n  getHandleTransform: function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    });\n    layoutInfo.labelMargin = axisPointerModel.get('handle.margin');\n    return {\n      position: viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo),\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  },\n\n  /**\n   * @override\n   */\n  updateHandleTransform: function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = transform.position;\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      position: currPosition,\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  }\n});\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nAxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\nvar _default = CartesianAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar modelHelper = require(\"./modelHelper\");\n\nvar findPointFromSeries = require(\"./findPointFromSeries\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry;\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @param {Object} coordSysAxesInfo\n * @param {Object} payload\n * @param {string} [payload.currTrigger] 'click' | 'mousemove' | 'leave'\n * @param {Array.<number>} [payload.x] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Array.<number>} [payload.y] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Object} [payload.seriesIndex] finder, optional, restrict target axes.\n * @param {Object} [payload.dataIndex] finder, restrict target axes.\n * @param {Object} [payload.axesInfo] finder, restrict target axes.\n *        [{\n *          axisDim: 'x'|'y'|'angle'|...,\n *          axisIndex: ...,\n *          value: ...\n *        }, ...]\n * @param {Function} [payload.dispatchAction]\n * @param {Object} [payload.tooltipOption]\n * @param {Object|Array.<number>|Function} [payload.position] Tooltip position,\n *        which can be specified in dispatchAction\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n * @return {Object} content of event obj for echarts.connect.\n */\n\nfunction _default(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputFinder = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputFinder);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputFinder);\n  });\n  updateModelActually(showValueMap, axesInfo, outputFinder);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputFinder;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, dontSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By defualt use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    zrUtil.extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!dontSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch, outputFinder); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimension(dim, true);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get('label.precision'),\n      formatter: axisPointerModel.get('label.formatter')\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputFinder) {\n  var outputAxesInfo = outputFinder.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n        // If hide, value still need to be set, consider\n        // click legend to toggle axis blank.\n        !axisInfo.useHandle && (option.status = 'hide');\n      } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  zrUtil.each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  zrUtil.each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param {module:echarts/model/Global} ecModel\n * @return {Object} {point: [x, y], el: ...} point Will not be null.\n */\nfunction _default(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n      return data.mapDimension(dim);\n    }), dataIndex, true)) || [];\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nfunction register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\nfunction unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}\n\nexports.register = register;\nexports.unregister = unregister;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\n\nfunction collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\n\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = []; // Collect axes info.\n\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n    // for user. So we enable seting tooltip on coordSys model.\n\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n    if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get('axisPointer.type') === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get('axisPointer.axis'));\n\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    } // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n\n\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var key = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n      var axisInfo = result.axesInfo[key] = {\n        key: key,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: []\n      };\n      axesInfoInCoordSys[key] = axisInfo;\n      result.seriesInvolved |= involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[key] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\n\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var volatileOption = {};\n  each(['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'], function (field) {\n    volatileOption[field] = zrUtil.clone(tooltipAxisPointerModel.get(field));\n  }); // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n  // Only these properties can be overrided from tooltip to axisPointer.\n\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n\n  var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n  labelOption.show == null && (labelOption.show = false);\n\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get('label.show');\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && zrUtil.defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\n\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get('tooltip.trigger', true);\n    var seriesTooltipShow = seriesModel.get('tooltip.show', true);\n\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get('axisPointer.show', true) === false) {\n      return;\n    }\n\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  }, this);\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\n\n\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\n\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || zrUtil.isArray(linkPropValue) && zrUtil.indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\n\nfunction fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n\n  if (!axisInfo) {\n    return;\n  }\n\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n  if (value != null) {\n    value = scale.parse(value);\n  }\n\n  var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n\n  if ( // Pick a value on axis when initializing.\n  value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n\n  option.value = value;\n\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\n\nfunction getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\n\nfunction getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\n\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get('handle.show');\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\n\n\nfunction makeKey(model) {\n  return model.type + '||' + model.id;\n}\n\nexports.collect = collect;\nexports.fixValue = fixValue;\nexports.getAxisInfo = getAxisInfo;\nexports.getAxisPointerModel = getAxisPointerModel;\nexports.makeKey = makeKey;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar AxisBuilder = require(\"../axis/AxisBuilder\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Model} axisPointerModel\n */\nfunction buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\n\nfunction buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get('label.precision'),\n    formatter: axisPointerModel.get('label.formatter')\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get('axisLine.lineStyle.color');\n  }\n\n  elOption.label = {\n    shape: {\n      x: 0,\n      y: 0,\n      width: width,\n      height: height,\n      r: labelModel.get('borderRadius')\n    },\n    position: position.slice(),\n    // TODO: rich\n    style: {\n      text: text,\n      textFont: font,\n      textFill: labelModel.getTextColor(),\n      textPosition: 'inside',\n      textPadding: paddings,\n      fill: bgColor,\n      stroke: labelModel.get('borderColor') || 'transparent',\n      lineWidth: labelModel.get('borderWidth') || 0,\n      shadowBlur: labelModel.get('shadowBlur'),\n      shadowColor: labelModel.get('shadowColor'),\n      shadowOffsetX: labelModel.get('shadowOffsetX'),\n      shadowOffsetY: labelModel.get('shadowOffsetY')\n    },\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n/**\n * @param {number} value\n * @param {module:echarts/coord/Axis} axis\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} opt\n * @param {Array.<Object>} seriesDataIndices\n * @param {number|string} opt.precision 'auto' or a number\n * @param {string|Function} opt.formatter label formatter\n */\n\n\nfunction getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel( // If `precision` is set, width can be fixed (like '12.00500'), which\n  // helps to debounce when when moving label.\n  value, {\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params = {\n      value: axisHelper.getAxisRawValue(axis, value),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params);\n    }\n  }\n\n  return text;\n}\n/**\n * @param {module:echarts/coord/Axis} axis\n * @param {number} value\n * @param {Object} layoutInfo {\n *  rotation, position, labelOffset, labelDirection, labelMargin\n * }\n */\n\n\nfunction getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\n\nfunction buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get('label.margin');\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\n/**\n * @param {Array.<number>} p1\n * @param {Array.<number>} p2\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\n/**\n * @param {Array.<number>} xy\n * @param {Array.<number>} wh\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\n\nfunction makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}\n\nexports.buildElStyle = buildElStyle;\nexports.buildLabelElOption = buildLabelElOption;\nexports.getValueLabel = getValueLabel;\nexports.getTransformedPosition = getTransformedPosition;\nexports.buildCartesianSingleLabelElOption = buildCartesianSingleLabelElOption;\nexports.makeLineShape = makeLineShape;\nexports.makeRectShape = makeRectShape;\nexports.makeSectorShape = makeSectorShape;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../util/graphic\");\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./axis\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid view\necharts.extendComponentView({\n  type: 'grid',\n  render: function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new graphic.Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: zrUtil.defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  }\n});\necharts.registerPreprocessor(function (option) {\n  // Only create grid when need\n  if (option.xAxis && option.yAxis && !option.grid) {\n    option.grid = {};\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar RoamController = require(\"./RoamController\");\n\nvar roamHelper = require(\"../../component/helper/roamHelper\");\n\nvar _cursorHelper = require(\"../../component/helper/cursorHelper\");\n\nvar onIrrelevantElement = _cursorHelper.onIrrelevantElement;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar geoSourceManager = require(\"../../coord/geo/geoSourceManager\");\n\nvar _component = require(\"../../util/component\");\n\nvar getUID = _component.getUID;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction getFixedItemStyle(model) {\n  var itemStyle = model.getItemStyle();\n  var areaColor = model.get('areaColor'); // If user want the color not to be changed when hover,\n  // they should both set areaColor and color to be null.\n\n  if (areaColor != null) {\n    itemStyle.fill = areaColor;\n  }\n\n  return itemStyle;\n}\n\nfunction updateMapSelectHandler(mapDraw, mapOrGeoModel, regionsGroup, api, fromView) {\n  regionsGroup.off('click');\n  regionsGroup.off('mousedown');\n\n  if (mapOrGeoModel.get('selectedMode')) {\n    regionsGroup.on('mousedown', function () {\n      mapDraw._mouseDownFlag = true;\n    });\n    regionsGroup.on('click', function (e) {\n      if (!mapDraw._mouseDownFlag) {\n        return;\n      }\n\n      mapDraw._mouseDownFlag = false;\n      var el = e.target;\n\n      while (!el.__regions) {\n        el = el.parent;\n      }\n\n      if (!el) {\n        return;\n      }\n\n      var action = {\n        type: (mapOrGeoModel.mainType === 'geo' ? 'geo' : 'map') + 'ToggleSelect',\n        batch: zrUtil.map(el.__regions, function (region) {\n          return {\n            name: region.name,\n            from: fromView.uid\n          };\n        })\n      };\n      action[mapOrGeoModel.mainType + 'Id'] = mapOrGeoModel.id;\n      api.dispatchAction(action);\n      updateMapSelected(mapOrGeoModel, regionsGroup);\n    });\n  }\n}\n\nfunction updateMapSelected(mapOrGeoModel, regionsGroup) {\n  // FIXME\n  regionsGroup.eachChild(function (otherRegionEl) {\n    zrUtil.each(otherRegionEl.__regions, function (region) {\n      otherRegionEl.trigger(mapOrGeoModel.isSelected(region.name) ? 'emphasis' : 'normal');\n    });\n  });\n}\n/**\n * @alias module:echarts/component/helper/MapDraw\n * @param {module:echarts/ExtensionAPI} api\n * @param {boolean} updateGroup\n */\n\n\nfunction MapDraw(api, updateGroup) {\n  var group = new graphic.Group();\n  /**\n   * @type {string}\n   * @private\n   */\n\n  this.uid = getUID('ec_map_draw');\n  /**\n   * @type {module:echarts/component/helper/RoamController}\n   * @private\n   */\n\n  this._controller = new RoamController(api.getZr());\n  /**\n   * @type {Object} {target, zoom, zoomLimit}\n   * @private\n   */\n\n  this._controllerHost = {\n    target: updateGroup ? group : null\n  };\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n\n  this.group = group;\n  /**\n   * @type {boolean}\n   * @private\n   */\n\n  this._updateGroup = updateGroup;\n  /**\n   * This flag is used to make sure that only one among\n   * `pan`, `zoom`, `click` can occurs, otherwise 'selected'\n   * action may be triggered when `pan`, which is unexpected.\n   * @type {booelan}\n   */\n\n  this._mouseDownFlag;\n  /**\n   * @type {string}\n   */\n\n  this._mapName;\n  /**\n   * @type {boolean}\n   */\n\n  this._initialized;\n  /**\n   * @type {module:zrender/container/Group}\n   */\n\n  group.add(this._regionsGroup = new graphic.Group());\n  /**\n   * @type {module:zrender/container/Group}\n   */\n\n  group.add(this._backgroundGroup = new graphic.Group());\n}\n\nMapDraw.prototype = {\n  constructor: MapDraw,\n  draw: function (mapOrGeoModel, ecModel, api, fromView, payload) {\n    var isGeo = mapOrGeoModel.mainType === 'geo'; // Map series has data. GEO model that controlled by map series\n    // will be assigned with map data. Other GEO model has no data.\n\n    var data = mapOrGeoModel.getData && mapOrGeoModel.getData();\n    isGeo && ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'map'\n    }, function (mapSeries) {\n      if (!data && mapSeries.getHostGeoModel() === mapOrGeoModel) {\n        data = mapSeries.getData();\n      }\n    });\n    var geo = mapOrGeoModel.coordinateSystem;\n\n    this._updateBackground(geo);\n\n    var regionsGroup = this._regionsGroup;\n    var group = this.group;\n\n    if (geo._roamTransformable.transform) {\n      group.transform = geo._roamTransformable.transform.slice();\n      group.decomposeTransform();\n    }\n\n    var scale = geo._rawTransformable.scale;\n    var position = geo._rawTransformable.position;\n    regionsGroup.removeAll();\n    var itemStyleAccessPath = ['itemStyle'];\n    var hoverItemStyleAccessPath = ['emphasis', 'itemStyle'];\n    var labelAccessPath = ['label'];\n    var hoverLabelAccessPath = ['emphasis', 'label'];\n    var nameMap = zrUtil.createHashMap();\n    zrUtil.each(geo.regions, function (region) {\n      // Consider in GeoJson properties.name may be duplicated, for example,\n      // there is multiple region named \"United Kindom\" or \"France\" (so many\n      // colonies). And it is not appropriate to merge them in geo, which\n      // will make them share the same label and bring trouble in label\n      // location calculation.\n      var regionGroup = nameMap.get(region.name) || nameMap.set(region.name, new graphic.Group());\n      var compoundPath = new graphic.CompoundPath({\n        segmentIgnoreThreshold: 1,\n        shape: {\n          paths: []\n        }\n      });\n      regionGroup.add(compoundPath);\n      var regionModel = mapOrGeoModel.getRegionModel(region.name) || mapOrGeoModel;\n      var itemStyleModel = regionModel.getModel(itemStyleAccessPath);\n      var hoverItemStyleModel = regionModel.getModel(hoverItemStyleAccessPath);\n      var itemStyle = getFixedItemStyle(itemStyleModel);\n      var hoverItemStyle = getFixedItemStyle(hoverItemStyleModel);\n      var labelModel = regionModel.getModel(labelAccessPath);\n      var hoverLabelModel = regionModel.getModel(hoverLabelAccessPath);\n      var dataIdx; // Use the itemStyle in data if has data\n\n      if (data) {\n        dataIdx = data.indexOfName(region.name); // Only visual color of each item will be used. It can be encoded by dataRange\n        // But visual color of series is used in symbol drawing\n        //\n        // Visual color for each series is for the symbol draw\n\n        var visualColor = data.getItemVisual(dataIdx, 'color', true);\n\n        if (visualColor) {\n          itemStyle.fill = visualColor;\n        }\n      }\n\n      var transformPoint = function (point) {\n        return [point[0] * scale[0] + position[0], point[1] * scale[1] + position[1]];\n      };\n\n      zrUtil.each(region.geometries, function (geometry) {\n        if (geometry.type !== 'polygon') {\n          return;\n        }\n\n        var points = [];\n\n        for (var i = 0; i < geometry.exterior.length; ++i) {\n          points.push(transformPoint(geometry.exterior[i]));\n        }\n\n        compoundPath.shape.paths.push(new graphic.Polygon({\n          segmentIgnoreThreshold: 1,\n          shape: {\n            points: points\n          }\n        }));\n\n        for (var i = 0; i < (geometry.interiors ? geometry.interiors.length : 0); ++i) {\n          var interior = geometry.interiors[i];\n          var points = [];\n\n          for (var j = 0; j < interior.length; ++j) {\n            points.push(transformPoint(interior[j]));\n          }\n\n          compoundPath.shape.paths.push(new graphic.Polygon({\n            segmentIgnoreThreshold: 1,\n            shape: {\n              points: points\n            }\n          }));\n        }\n      });\n      compoundPath.setStyle(itemStyle);\n      compoundPath.style.strokeNoScale = true;\n      compoundPath.culling = true; // Label\n\n      var showLabel = labelModel.get('show');\n      var hoverShowLabel = hoverLabelModel.get('show');\n      var isDataNaN = data && isNaN(data.get(data.mapDimension('value'), dataIdx));\n      var itemLayout = data && data.getItemLayout(dataIdx); // In the following cases label will be drawn\n      // 1. In map series and data value is NaN\n      // 2. In geo component\n      // 4. Region has no series legendSymbol, which will be add a showLabel flag in mapSymbolLayout\n\n      if (isGeo || isDataNaN && (showLabel || hoverShowLabel) || itemLayout && itemLayout.showLabel) {\n        var query = !isGeo ? dataIdx : region.name;\n        var labelFetcher; // Consider dataIdx not found.\n\n        if (!data || dataIdx >= 0) {\n          labelFetcher = mapOrGeoModel;\n        }\n\n        var textEl = new graphic.Text({\n          position: transformPoint(region.center.slice()),\n          // FIXME\n          // label rotation is not support yet in geo or regions of series-map\n          // that has no data. The rotation will be effected by this `scale`.\n          // So needed to change to RectText?\n          scale: [1 / group.scale[0], 1 / group.scale[1]],\n          z2: 10,\n          silent: true\n        });\n        graphic.setLabelStyle(textEl.style, textEl.hoverStyle = {}, labelModel, hoverLabelModel, {\n          labelFetcher: labelFetcher,\n          labelDataIndex: query,\n          defaultText: region.name,\n          useInsideStyle: false\n        }, {\n          textAlign: 'center',\n          textVerticalAlign: 'middle'\n        });\n        regionGroup.add(textEl);\n      } // setItemGraphicEl, setHoverStyle after all polygons and labels\n      // are added to the rigionGroup\n\n\n      if (data) {\n        data.setItemGraphicEl(dataIdx, regionGroup);\n      } else {\n        var regionModel = mapOrGeoModel.getRegionModel(region.name); // Package custom mouse event for geo component\n\n        compoundPath.eventData = {\n          componentType: 'geo',\n          componentIndex: mapOrGeoModel.componentIndex,\n          geoIndex: mapOrGeoModel.componentIndex,\n          name: region.name,\n          region: regionModel && regionModel.option || {}\n        };\n      }\n\n      var groupRegions = regionGroup.__regions || (regionGroup.__regions = []);\n      groupRegions.push(region);\n      regionGroup.highDownSilentOnTouch = !!mapOrGeoModel.get('selectedMode');\n      graphic.setHoverStyle(regionGroup, hoverItemStyle);\n      regionsGroup.add(regionGroup);\n    });\n\n    this._updateController(mapOrGeoModel, ecModel, api);\n\n    updateMapSelectHandler(this, mapOrGeoModel, regionsGroup, api, fromView);\n    updateMapSelected(mapOrGeoModel, regionsGroup);\n  },\n  remove: function () {\n    this._regionsGroup.removeAll();\n\n    this._backgroundGroup.removeAll();\n\n    this._controller.dispose();\n\n    this._mapName && geoSourceManager.removeGraphic(this._mapName, this.uid);\n    this._mapName = null;\n    this._controllerHost = {};\n  },\n  _updateBackground: function (geo) {\n    var mapName = geo.map;\n\n    if (this._mapName !== mapName) {\n      zrUtil.each(geoSourceManager.makeGraphic(mapName, this.uid), function (root) {\n        this._backgroundGroup.add(root);\n      }, this);\n    }\n\n    this._mapName = mapName;\n  },\n  _updateController: function (mapOrGeoModel, ecModel, api) {\n    var geo = mapOrGeoModel.coordinateSystem;\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    controllerHost.zoomLimit = mapOrGeoModel.get('scaleLimit');\n    controllerHost.zoom = geo.getZoom(); // roamType is will be set default true if it is null\n\n    controller.enable(mapOrGeoModel.get('roam') || false);\n    var mainType = mapOrGeoModel.mainType;\n\n    function makeActionBase() {\n      var action = {\n        type: 'geoRoam',\n        componentType: mainType\n      };\n      action[mainType + 'Id'] = mapOrGeoModel.id;\n      return action;\n    }\n\n    controller.off('pan').on('pan', function (e) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        dx: e.dx,\n        dy: e.dy\n      }));\n    }, this);\n    controller.off('zoom').on('zoom', function (e) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      }));\n\n      if (this._updateGroup) {\n        var scale = this.group.scale;\n\n        this._regionsGroup.traverse(function (el) {\n          if (el.type === 'text') {\n            el.attr('scale', [1 / scale[0], 1 / scale[1]]);\n          }\n        });\n      }\n    }, this);\n    controller.setPointerChecker(function (e, x, y) {\n      return geo.getViewRectAfterRoam().contain(x, y) && !onIrrelevantElement(e, api, mapOrGeoModel);\n    });\n  }\n};\nvar _default = MapDraw;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Eventful = require(\"zrender/lib/mixin/Eventful\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar interactionMutex = require(\"./interactionMutex\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @alias module:echarts/component/helper/RoamController\n * @constructor\n * @mixin {module:zrender/mixin/Eventful}\n *\n * @param {module:zrender/zrender~ZRender} zr\n */\nfunction RoamController(zr) {\n  /**\n   * @type {Function}\n   */\n  this.pointerChecker;\n  /**\n   * @type {module:zrender}\n   */\n\n  this._zr = zr;\n  /**\n   * @type {Object}\n   */\n\n  this._opt = {}; // Avoid two roamController bind the same handler\n\n  var bind = zrUtil.bind;\n  var mousedownHandler = bind(mousedown, this);\n  var mousemoveHandler = bind(mousemove, this);\n  var mouseupHandler = bind(mouseup, this);\n  var mousewheelHandler = bind(mousewheel, this);\n  var pinchHandler = bind(pinch, this);\n  Eventful.call(this);\n  /**\n   * @param {Function} pointerChecker\n   *                   input: x, y\n   *                   output: boolean\n   */\n\n  this.setPointerChecker = function (pointerChecker) {\n    this.pointerChecker = pointerChecker;\n  };\n  /**\n   * Notice: only enable needed types. For example, if 'zoom'\n   * is not needed, 'zoom' should not be enabled, otherwise\n   * default mousewheel behaviour (scroll page) will be disabled.\n   *\n   * @param  {boolean|string} [controlType=true] Specify the control type,\n   *                          which can be null/undefined or true/false\n   *                          or 'pan/move' or 'zoom'/'scale'\n   * @param {Object} [opt]\n   * @param {Object} [opt.zoomOnMouseWheel=true] The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n   * @param {Object} [opt.moveOnMouseMove=true] The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n   * @param {Object} [opt.moveOnMouseWheel=false] The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n   * @param {Object} [opt.preventDefaultMouseMove=true] When pan.\n   */\n\n\n  this.enable = function (controlType, opt) {\n    // Disable previous first\n    this.disable();\n    this._opt = zrUtil.defaults(zrUtil.clone(opt) || {}, {\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      // By default, wheel do not trigger move.\n      moveOnMouseWheel: false,\n      preventDefaultMouseMove: true\n    });\n\n    if (controlType == null) {\n      controlType = true;\n    }\n\n    if (controlType === true || controlType === 'move' || controlType === 'pan') {\n      zr.on('mousedown', mousedownHandler);\n      zr.on('mousemove', mousemoveHandler);\n      zr.on('mouseup', mouseupHandler);\n    }\n\n    if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n      zr.on('mousewheel', mousewheelHandler);\n      zr.on('pinch', pinchHandler);\n    }\n  };\n\n  this.disable = function () {\n    zr.off('mousedown', mousedownHandler);\n    zr.off('mousemove', mousemoveHandler);\n    zr.off('mouseup', mouseupHandler);\n    zr.off('mousewheel', mousewheelHandler);\n    zr.off('pinch', pinchHandler);\n  };\n\n  this.dispose = this.disable;\n\n  this.isDragging = function () {\n    return this._dragging;\n  };\n\n  this.isPinching = function () {\n    return this._pinching;\n  };\n}\n\nzrUtil.mixin(RoamController, Eventful);\n\nfunction mousedown(e) {\n  if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e) || e.target && e.target.draggable) {\n    return;\n  }\n\n  var x = e.offsetX;\n  var y = e.offsetY; // Only check on mosedown, but not mousemove.\n  // Mouse can be out of target when mouse moving.\n\n  if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n    this._x = x;\n    this._y = y;\n    this._dragging = true;\n  }\n}\n\nfunction mousemove(e) {\n  if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt) || e.gestureEvent === 'pinch' || interactionMutex.isTaken(this._zr, 'globalPan')) {\n    return;\n  }\n\n  var x = e.offsetX;\n  var y = e.offsetY;\n  var oldX = this._x;\n  var oldY = this._y;\n  var dx = x - oldX;\n  var dy = y - oldY;\n  this._x = x;\n  this._y = y;\n  this._opt.preventDefaultMouseMove && eventTool.stop(e.event);\n  trigger(this, 'pan', 'moveOnMouseMove', e, {\n    dx: dx,\n    dy: dy,\n    oldX: oldX,\n    oldY: oldY,\n    newX: x,\n    newY: y\n  });\n}\n\nfunction mouseup(e) {\n  if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n    this._dragging = false;\n  }\n}\n\nfunction mousewheel(e) {\n  var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n  var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n  var wheelDelta = e.wheelDelta;\n  var absWheelDeltaDelta = Math.abs(wheelDelta);\n  var originX = e.offsetX;\n  var originY = e.offsetY; // wheelDelta maybe -0 in chrome mac.\n\n  if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n    return;\n  } // If both `shouldZoom` and `shouldMove` is true, trigger\n  // their event both, and the final behavior is determined\n  // by event listener themselves.\n\n\n  if (shouldZoom) {\n    // Convenience:\n    // Mac and VM Windows on Mac: scroll up: zoom out.\n    // Windows: scroll up: zoom in.\n    // FIXME: Should do more test in different environment.\n    // wheelDelta is too complicated in difference nvironment\n    // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n    // although it has been normallized by zrender.\n    // wheelDelta of mouse wheel is bigger than touch pad.\n    var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n    var scale = wheelDelta > 0 ? factor : 1 / factor;\n    checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\n      scale: scale,\n      originX: originX,\n      originY: originY\n    });\n  }\n\n  if (shouldMove) {\n    // FIXME: Should do more test in different environment.\n    var absDelta = Math.abs(wheelDelta); // wheelDelta of mouse wheel is bigger than touch pad.\n\n    var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n    checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\n      scrollDelta: scrollDelta,\n      originX: originX,\n      originY: originY\n    });\n  }\n}\n\nfunction pinch(e) {\n  if (interactionMutex.isTaken(this._zr, 'globalPan')) {\n    return;\n  }\n\n  var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n  checkPointerAndTrigger(this, 'zoom', null, e, {\n    scale: scale,\n    originX: e.pinchX,\n    originY: e.pinchY\n  });\n}\n\nfunction checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  if (controller.pointerChecker && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\n    // When mouse is out of roamController rect,\n    // default befavoius should not be be disabled, otherwise\n    // page sliding is disabled, contrary to expectation.\n    eventTool.stop(e.event);\n    trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n  }\n}\n\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = zrUtil.bind(isAvailableBehavior, null, behaviorToCheck, e);\n  controller.trigger(eventName, contollerEvent);\n} // settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n\n\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!zrUtil.isString(setting) || e.event[setting + 'Key']);\n}\n\nvar _default = RoamController;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nfunction onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES[model.mainType] && coordSys && coordSys.model !== targetCoordSysModel;\n}\n\nexports.onIrrelevantElement = onIrrelevantElement;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ATTR = '\\0_ec_interaction_mutex';\n\nfunction take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\n\nfunction release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\n\nfunction isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\n\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n\n\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, function () {});\nexports.take = take;\nexports.release = release;\nexports.isTaken = isTaken;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\nvar layoutBox = _layout.box;\nvar positionElement = _layout.positionElement;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\nfunction layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\n\nfunction makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  var rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}\n\nexports.layout = layout;\nexports.makeBackground = makeBackground;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * For geo and graph.\n *\n * @param {Object} controllerHost\n * @param {module:zrender/Element} controllerHost.target\n */\nfunction updateViewOnPan(controllerHost, dx, dy) {\n  var target = controllerHost.target;\n  var pos = target.position;\n  pos[0] += dx;\n  pos[1] += dy;\n  target.dirty();\n}\n/**\n * For geo and graph.\n *\n * @param {Object} controllerHost\n * @param {module:zrender/Element} controllerHost.target\n * @param {number} controllerHost.zoom\n * @param {number} controllerHost.zoomLimit like: {min: 1, max: 2}\n */\n\n\nfunction updateViewOnZoom(controllerHost, zoomDelta, zoomX, zoomY) {\n  var target = controllerHost.target;\n  var zoomLimit = controllerHost.zoomLimit;\n  var pos = target.position;\n  var scale = target.scale;\n  var newZoom = controllerHost.zoom = controllerHost.zoom || 1;\n  newZoom *= zoomDelta;\n\n  if (zoomLimit) {\n    var zoomMin = zoomLimit.min || 0;\n    var zoomMax = zoomLimit.max || Infinity;\n    newZoom = Math.max(Math.min(zoomMax, newZoom), zoomMin);\n  }\n\n  var zoomScale = newZoom / controllerHost.zoom;\n  controllerHost.zoom = newZoom; // Keep the mouse center when scaling\n\n  pos[0] -= (zoomX - pos[0]) * (zoomScale - 1);\n  pos[1] -= (zoomY - pos[1]) * (zoomScale - 1);\n  scale[0] *= zoomScale;\n  scale[1] *= zoomScale;\n  target.dirty();\n}\n\nexports.updateViewOnPan = updateViewOnPan;\nexports.updateViewOnZoom = updateViewOnZoom;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Data selectable mixin for chart series.\n * To eanble data select, option of series must have `selectedMode`.\n * And each data item will use `selected` to toggle itself selected status\n */\nvar _default = {\n  /**\n   * @param {Array.<Object>} targetList [{name, value, selected}, ...]\n   *        If targetList is an array, it should like [{name: ..., value: ...}, ...].\n   *        If targetList is a \"List\", it must have coordDim: 'value' dimension and name.\n   */\n  updateSelectedMap: function (targetList) {\n    this._targetList = zrUtil.isArray(targetList) ? targetList.slice() : [];\n    this._selectTargetMap = zrUtil.reduce(targetList || [], function (targetMap, target) {\n      targetMap.set(target.name, target);\n      return targetMap;\n    }, zrUtil.createHashMap());\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  // PENGING If selectedMode is null ?\n  select: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      this._selectTargetMap.each(function (target) {\n        target.selected = false;\n      });\n    }\n\n    target && (target.selected = true);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  unSelect: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name); // var selectedMode = this.get('selectedMode');\n    // selectedMode !== 'single' && target && (target.selected = false);\n\n    target && (target.selected = false);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  toggleSelected: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n\n    if (target != null) {\n      this[target.selected ? 'unSelect' : 'select'](name, id);\n      return target.selected;\n    }\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  isSelected: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    return target && target.selected;\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./legend/LegendModel\");\n\nrequire(\"./legend/legendAction\");\n\nrequire(\"./legend/LegendView\");\n\nvar legendFilter = require(\"./legend/legendFilter\");\n\nvar Component = require(\"../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Do not contain scrollable legend, for sake of file size.\n// Series Filter\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\nComponent.registerSubTypeDefaulter('legend', function () {\n  // Default 'plain' when no type specified.\n  return 'plain';\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _model = require(\"../../util/model\");\n\nvar isNameSpecified = _model.isNameSpecified;\n\nvar lang = require(\"../../lang\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar langSelector = lang.legend.selector;\nvar defaultSelectorOption = {\n  all: {\n    type: 'all',\n    title: zrUtil.clone(langSelector.all)\n  },\n  inverse: {\n    type: 'inverse',\n    title: zrUtil.clone(langSelector.inverse)\n  }\n};\nvar LegendModel = echarts.extendComponentModel({\n  type: 'legend.plain',\n  dependencies: ['series'],\n  layoutMode: {\n    type: 'box',\n    // legend.width/height are maxWidth/maxHeight actually,\n    // whereas realy width/height is calculated by its content.\n    // (Setting {left: 10, right: 10} does not make sense).\n    // So consider the case:\n    // `setOption({legend: {left: 10});`\n    // then `setOption({legend: {right: 10});`\n    // The previous `left` should be cleared by setting `ignoreSize`.\n    ignoreSize: true\n  },\n  init: function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n\n    this._updateSelector(option);\n  },\n  mergeOption: function (option) {\n    LegendModel.superCall(this, 'mergeOption', option);\n\n    this._updateSelector(option);\n  },\n  _updateSelector: function (option) {\n    var selector = option.selector;\n\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, defaultSelectorOption[item.type]);\n      });\n    }\n  },\n  optionUpdated: function () {\n    this._updateData(this.ecModel);\n\n    var legendData = this._data; // If selectedMode is single, try to select one\n\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false; // If has any selected in option.selected\n\n      for (var i = 0; i < legendData.length; i++) {\n        var name = legendData[i].get('name');\n\n        if (this.isSelected(name)) {\n          // Force to unselect others\n          this.select(name);\n          hasSelected = true;\n          break;\n        }\n      } // Try select the first if selectedMode is single\n\n\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  },\n  _updateData: function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n\n      if (seriesModel.legendDataProvider) {\n        var data = seriesModel.legendDataProvider();\n        var names = data.mapArray(data.getName);\n\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n\n    this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n    // which is convinient for user preparing option.\n\n    var rawData = this.get('data') || potentialData;\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (typeof dataItem === 'string' || typeof dataItem === 'number') {\n        dataItem = {\n          name: dataItem\n        };\n      }\n\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n\n    this._data = legendData;\n  },\n\n  /**\n   * @return {Array.<module:echarts/model/Model>}\n   */\n  getData: function () {\n    return this._data;\n  },\n\n  /**\n   * @param {string} name\n   */\n  select: function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n\n    selected[name] = true;\n  },\n\n  /**\n   * @param {string} name\n   */\n  unSelect: function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  },\n\n  /**\n   * @param {string} name\n   */\n  toggleSelected: function (name) {\n    var selected = this.option.selected; // Default is true\n\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  },\n  allSelect: function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  },\n  inverseSelect: function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true); // Initially, default value is true\n\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n\n      selected[name] = !selected[name];\n    });\n  },\n\n  /**\n   * @param {string} name\n   */\n  isSelected: function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  },\n  getOrient: function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  },\n  defaultOption: {\n    // \n    zlevel: 0,\n    // \n    z: 4,\n    show: true,\n    // \n    // 'horizontal' | 'vertical'\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    // \n    // 'auto' | 'left' | 'right'\n    //  'auto',  x \n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    // \n    borderColor: '#ccc',\n    borderRadius: 0,\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // itempx10\n    // \n    itemGap: 10,\n    // the width of legend symbol\n    itemWidth: 25,\n    // the height of legend symbol\n    itemHeight: 14,\n    // the color of unselected legend symbol\n    inactiveColor: '#ccc',\n    // the borderColor of unselected legend symbol\n    inactiveBorderColor: '#ccc',\n    itemStyle: {\n      // the default borderWidth of legend symbol\n      borderWidth: 0\n    },\n    textStyle: {\n      // \n      color: '#333'\n    },\n    // formatter: '',\n    // \n    selectedMode: true,\n    // LEGEND.SELECTED\n    // selected: null,\n    // legend.dataitem\n    // data: [],\n    // Usage:\n    // selector: [{type: 'all or inverse', title: xxx}]\n    // or\n    // selector: true\n    // or\n    // selector: ['all', 'inverse']\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: ' sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    // Value can be 'start' or 'end'\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    // Tooltip \n    tooltip: {\n      show: false\n    }\n  }\n});\nvar _default = LegendModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _listComponent = require(\"../helper/listComponent\");\n\nvar makeBackground = _listComponent.makeBackground;\n\nvar layoutUtil = require(\"../../util/layout\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar _default = echarts.extendComponentView({\n  type: 'legend.plain',\n  newlineDisabled: false,\n\n  /**\n   * @override\n   */\n  init: function () {\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n    this.group.add(this._contentGroup = new Group());\n    /**\n     * @private\n     * @type {module:zrender/Element}\n     */\n\n    this._backgroundEl;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this.group.add(this._selectorGroup = new Group());\n    /**\n     * If first rendering, `contentGroup.position` is [0, 0], which\n     * does not make sense and may cause unexepcted animation if adopted.\n     * @private\n     * @type {boolean}\n     */\n\n    this._isFirstRender = true;\n  },\n\n  /**\n   * @protected\n   */\n  getContentGroup: function () {\n    return this._contentGroup;\n  },\n\n  /**\n   * @protected\n   */\n  getSelectorGroup: function () {\n    return this._selectorGroup;\n  },\n\n  /**\n   * @override\n   */\n  render: function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    }\n\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.attr('position', [layoutRect.x - mainRect.x, layoutRect.y - mainRect.y]); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  },\n\n  /**\n   * @protected\n   */\n  resetInner: function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  },\n\n  /**\n   * @protected\n   */\n  renderInner: function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (itemModel, dataIndex) {\n      var name = itemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        contentGroup.add(new Group({\n          newline: true\n        }));\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Series legend\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var color = data.getVisual('color');\n        var borderColor = data.getVisual('borderColor'); // If color is a callback function\n\n        if (typeof color === 'function') {\n          // Use the first data\n          color = color(seriesModel.getDataParams(0));\n        } // If borderColor is a callback function\n\n\n        if (typeof borderColor === 'function') {\n          // Use the first data\n          borderColor = borderColor(seriesModel.getDataParams(0));\n        } // Using rect symbol defaultly\n\n\n        var legendSymbolType = data.getVisual('legendSymbol') || 'roundRect';\n        var symbolType = data.getVisual('symbol');\n\n        var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, api)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Data legend of pie, funnel\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendDataProvider) {\n            var data = seriesModel.legendDataProvider();\n            var idx = data.indexOfName(name);\n\n            if (idx < 0) {\n              return;\n            }\n\n            var color = data.getItemVisual(idx, 'color');\n            var borderColor = data.getItemVisual(idx, 'borderColor');\n            var legendSymbolType = 'roundRect';\n\n            var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, null, itemAlign, color, borderColor, selectMode); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, name, api)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n    }, this);\n\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  },\n  _createSelector: function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function (selectorItem) {\n      createSelectorButton(selectorItem);\n    });\n\n    function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel('emphasis.selectorLabel');\n      graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, emphasisLabelModel, {\n        defaultText: selectorItem.title,\n        isRectText: false\n      });\n      graphic.setHoverStyle(labelText);\n    }\n  },\n  _createItem: function (name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode) {\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var inactiveColor = legendModel.get('inactiveColor');\n    var inactiveBorderColor = legendModel.get('inactiveBorderColor');\n    var symbolKeepAspect = legendModel.get('symbolKeepAspect');\n    var legendModelItemStyle = legendModel.getModel('itemStyle');\n    var isSelected = legendModel.isSelected(name);\n    var itemGroup = new Group();\n    var textStyleModel = itemModel.getModel('textStyle');\n    var itemIcon = itemModel.get('icon');\n    var tooltipModel = itemModel.getModel('tooltip');\n    var legendGlobalTooltipModel = tooltipModel.parentModel; // Use user given icon first\n\n    legendSymbolType = itemIcon || legendSymbolType;\n    var legendSymbol = createSymbol(legendSymbolType, 0, 0, itemWidth, itemHeight, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n    symbolKeepAspect == null ? true : symbolKeepAspect);\n    itemGroup.add(setSymbolStyle(legendSymbol, legendSymbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected)); // Compose symbols\n    // PENDING\n\n    if (!itemIcon && symbolType // At least show one symbol, can't be all none\n    && (symbolType !== legendSymbolType || symbolType === 'none')) {\n      var size = itemHeight * 0.8;\n\n      if (symbolType === 'none') {\n        symbolType = 'circle';\n      }\n\n      var legendSymbolCenter = createSymbol(symbolType, (itemWidth - size) / 2, (itemHeight - size) / 2, size, size, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n      symbolKeepAspect == null ? true : symbolKeepAspect); // Put symbol in the center\n\n      itemGroup.add(setSymbolStyle(legendSymbolCenter, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (typeof formatter === 'string' && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (typeof formatter === 'function') {\n      content = formatter(name);\n    }\n\n    itemGroup.add(new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        textFill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        textAlign: textAlign,\n        textVerticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true,\n      tooltip: tooltipModel.get('show') ? zrUtil.extend({\n        content: name,\n        // Defaul formatter\n        formatter: legendGlobalTooltipModel.get('formatter', true) || function () {\n          return name;\n        },\n        formatterParams: {\n          componentType: 'legend',\n          legendIndex: legendModel.componentIndex,\n          name: name,\n          $vars: ['name']\n        }\n      }, tooltipModel.option) : null\n    });\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    graphic.setHoverStyle(itemGroup);\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  },\n\n  /**\n   * @protected\n   */\n  layoutInner: function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      } //Always align selector to content as 'middle'\n\n\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.attr('position', selectorPos);\n      contentGroup.attr('position', contentPos);\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.attr('position', contentPos);\n      return this.group.getBoundingRect();\n    }\n  },\n\n  /**\n   * @protected\n   */\n  remove: function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  }\n});\n\nfunction setSymbolStyle(symbol, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected) {\n  var itemStyle;\n\n  if (symbolType !== 'line' && symbolType.indexOf('empty') < 0) {\n    itemStyle = legendModelItemStyle.getItemStyle();\n    symbol.style.stroke = borderColor;\n\n    if (!isSelected) {\n      itemStyle.stroke = inactiveBorderColor;\n    }\n  } else {\n    itemStyle = legendModelItemStyle.getItemStyle(['borderWidth', 'borderColor']);\n  }\n\n  return symbol.setStyle(itemStyle);\n}\n\nfunction dispatchSelectAction(name, api) {\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: name\n  });\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var selectedMap = {};\n  var isToggleSelect = methodName === 'toggleSelected';\n  var isSelected; // Update all legend components\n\n  ecModel.eachComponent('legend', function (legendModel) {\n    if (isToggleSelect && isSelected != null) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n    } else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n      isSelected = legendModel.isSelected(payload.name);\n    }\n\n    var legendData = legendModel.getData();\n    zrUtil.each(legendData, function (model) {\n      var name = model.get('name'); // Wrap element\n\n      if (name === '\\n' || name === '') {\n        return;\n      }\n\n      var isItemSelected = legendModel.isSelected(name);\n\n      if (selectedMap.hasOwnProperty(name)) {\n        // Unselected if any legend is unselected\n        selectedMap[name] = selectedMap[name] && isItemSelected;\n      } else {\n        selectedMap[name] = isItemSelected;\n      }\n    });\n  }); // Return the event explicitly\n\n  return methodName === 'allSelect' || methodName === 'inverseSelect' ? {\n    selected: selectedMap\n  } : {\n    name: payload.name,\n    selected: selectedMap\n  };\n}\n/**\n * @event legendToggleSelect\n * @type {Object}\n * @property {string} type 'legendToggleSelect'\n * @property {string} [from]\n * @property {string} name Series name or data item name\n */\n\n\necharts.registerAction('legendToggleSelect', 'legendselectchanged', zrUtil.curry(legendSelectActionHandler, 'toggleSelected'));\necharts.registerAction('legendAllSelect', 'legendselectall', zrUtil.curry(legendSelectActionHandler, 'allSelect'));\necharts.registerAction('legendInverseSelect', 'legendinverseselect', zrUtil.curry(legendSelectActionHandler, 'inverseSelect'));\n/**\n * @event legendSelect\n * @type {Object}\n * @property {string} type 'legendSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendSelect', 'legendselected', zrUtil.curry(legendSelectActionHandler, 'select'));\n/**\n * @event legendUnSelect\n * @type {Object}\n * @property {string} type 'legendUnSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendUnSelect', 'legendunselected', zrUtil.curry(legendSelectActionHandler, 'unSelect'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"../coord/radar/Radar\");\n\nrequire(\"../coord/radar/RadarModel\");\n\nrequire(\"./radar/RadarView\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar AxisBuilder = require(\"../axis/AxisBuilder\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\n\nvar _default = echarts.extendComponentView({\n  type: 'radar',\n  render: function (radarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n\n    this._buildAxes(radarModel);\n\n    this._buildSplitLineAndArea(radarModel);\n  },\n  _buildAxes: function (radarModel) {\n    var radar = radarModel.coordinateSystem;\n    var indicatorAxes = radar.getIndicatorAxes();\n    var axisBuilders = zrUtil.map(indicatorAxes, function (indicatorAxis) {\n      var axisBuilder = new AxisBuilder(indicatorAxis.model, {\n        position: [radar.cx, radar.cy],\n        rotation: indicatorAxis.angle,\n        labelDirection: -1,\n        tickDirection: -1,\n        nameDirection: 1\n      });\n      return axisBuilder;\n    });\n    zrUtil.each(axisBuilders, function (axisBuilder) {\n      zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n      this.group.add(axisBuilder.getGroup());\n    }, this);\n  },\n  _buildSplitLineAndArea: function (radarModel) {\n    var radar = radarModel.coordinateSystem;\n    var indicatorAxes = radar.getIndicatorAxes();\n\n    if (!indicatorAxes.length) {\n      return;\n    }\n\n    var shape = radarModel.get('shape');\n    var splitLineModel = radarModel.getModel('splitLine');\n    var splitAreaModel = radarModel.getModel('splitArea');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var showSplitLine = splitLineModel.get('show');\n    var showSplitArea = splitAreaModel.get('show');\n    var splitLineColors = lineStyleModel.get('color');\n    var splitAreaColors = areaStyleModel.get('color');\n    splitLineColors = zrUtil.isArray(splitLineColors) ? splitLineColors : [splitLineColors];\n    splitAreaColors = zrUtil.isArray(splitAreaColors) ? splitAreaColors : [splitAreaColors];\n    var splitLines = [];\n    var splitAreas = [];\n\n    function getColorIndex(areaOrLine, areaOrLineColorList, idx) {\n      var colorIndex = idx % areaOrLineColorList.length;\n      areaOrLine[colorIndex] = areaOrLine[colorIndex] || [];\n      return colorIndex;\n    }\n\n    if (shape === 'circle') {\n      var ticksRadius = indicatorAxes[0].getTicksCoords();\n      var cx = radar.cx;\n      var cy = radar.cy;\n\n      for (var i = 0; i < ticksRadius.length; i++) {\n        if (showSplitLine) {\n          var colorIndex = getColorIndex(splitLines, splitLineColors, i);\n          splitLines[colorIndex].push(new graphic.Circle({\n            shape: {\n              cx: cx,\n              cy: cy,\n              r: ticksRadius[i].coord\n            }\n          }));\n        }\n\n        if (showSplitArea && i < ticksRadius.length - 1) {\n          var colorIndex = getColorIndex(splitAreas, splitAreaColors, i);\n          splitAreas[colorIndex].push(new graphic.Ring({\n            shape: {\n              cx: cx,\n              cy: cy,\n              r0: ticksRadius[i].coord,\n              r: ticksRadius[i + 1].coord\n            }\n          }));\n        }\n      }\n    } // Polyyon\n    else {\n        var realSplitNumber;\n        var axesTicksPoints = zrUtil.map(indicatorAxes, function (indicatorAxis, idx) {\n          var ticksCoords = indicatorAxis.getTicksCoords();\n          realSplitNumber = realSplitNumber == null ? ticksCoords.length - 1 : Math.min(ticksCoords.length - 1, realSplitNumber);\n          return zrUtil.map(ticksCoords, function (tickCoord) {\n            return radar.coordToPoint(tickCoord.coord, idx);\n          });\n        });\n        var prevPoints = [];\n\n        for (var i = 0; i <= realSplitNumber; i++) {\n          var points = [];\n\n          for (var j = 0; j < indicatorAxes.length; j++) {\n            points.push(axesTicksPoints[j][i]);\n          } // Close\n\n\n          if (points[0]) {\n            points.push(points[0].slice());\n          } else {}\n\n          if (showSplitLine) {\n            var colorIndex = getColorIndex(splitLines, splitLineColors, i);\n            splitLines[colorIndex].push(new graphic.Polyline({\n              shape: {\n                points: points\n              }\n            }));\n          }\n\n          if (showSplitArea && prevPoints) {\n            var colorIndex = getColorIndex(splitAreas, splitAreaColors, i - 1);\n            splitAreas[colorIndex].push(new graphic.Polygon({\n              shape: {\n                points: points.concat(prevPoints)\n              }\n            }));\n          }\n\n          prevPoints = points.slice().reverse();\n        }\n      }\n\n    var lineStyle = lineStyleModel.getLineStyle();\n    var areaStyle = areaStyleModel.getAreaStyle(); // Add splitArea before splitLine\n\n    zrUtil.each(splitAreas, function (splitAreas, idx) {\n      this.group.add(graphic.mergePath(splitAreas, {\n        style: zrUtil.defaults({\n          stroke: 'none',\n          fill: splitAreaColors[idx % splitAreaColors.length]\n        }, areaStyle),\n        silent: true\n      }));\n    }, this);\n    zrUtil.each(splitLines, function (splitLines, idx) {\n      this.group.add(graphic.mergePath(splitLines, {\n        style: zrUtil.defaults({\n          fill: 'none',\n          stroke: splitLineColors[idx % splitLineColors.length]\n        }, lineStyle),\n        silent: true\n      }));\n    }, this);\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar echarts = require(\"../echarts\");\n\nvar graphic = require(\"../util/graphic\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Model\necharts.extendComponentModel({\n  type: 'title',\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n  defaultOption: {\n    // \n    zlevel: 0,\n    // \n    z: 6,\n    show: true,\n    text: '',\n    // \n    // link: null,\n    // self | blank\n    target: 'blank',\n    subtext: '',\n    // \n    // sublink: null,\n    // self | blank\n    subtarget: 'blank',\n    // 'center'  'left'  'right'\n    //  {number}xpx\n    left: 0,\n    // 'top'  'bottom'  'center'\n    //  {number}ypx\n    top: 0,\n    // \n    // 'auto' | 'left' | 'right' | 'center'\n    //  left \n    // textAlign: null\n    //\n    // \n    // 'auto' | 'top' | 'bottom' | 'middle'\n    //  top \n    // textVerticalAlign: null\n    // textBaseline: null // The same as textVerticalAlign.\n    backgroundColor: 'rgba(0,0,0,0)',\n    // \n    borderColor: '#ccc',\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // px10\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bolder',\n      color: '#333'\n    },\n    subtextStyle: {\n      color: '#aaa'\n    }\n  }\n}); // View\n\necharts.extendComponentView({\n  type: 'title',\n  render: function (titleModel, ecModel, api) {\n    this.group.removeAll();\n\n    if (!titleModel.get('show')) {\n      return;\n    }\n\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: titleModel.get('text'),\n        textFill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: graphic.setTextStyle({}, subtextStyleModel, {\n        text: subText,\n        textFill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        textVerticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n\n    if (link) {\n      textEl.on('click', function () {\n        window.open(link, '_' + titleModel.get('target'));\n      });\n    }\n\n    if (sublink) {\n      subTextEl.on('click', function () {\n        window.open(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n\n    textEl.eventData = subTextEl.eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding')); // Adjust text align based on position\n\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right');\n\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      } // Adjust layout by text align\n\n\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom');\n\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n\n    group.attr('position', [layoutRect.x, layoutRect.y]);\n    var alignStyle = {\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle); // Render background\n    // Get groupRect again because textAlign has been changed\n\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./axisPointer\");\n\nrequire(\"./tooltip/TooltipModel\");\n\nrequire(\"./tooltip/TooltipView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Better way to pack data in graphic element\n\n/**\n * @action\n * @property {string} type\n * @property {number} seriesIndex\n * @property {number} dataIndex\n * @property {number} [x]\n * @property {number} [y]\n */\necharts.registerAction({\n  type: 'showTip',\n  event: 'showTip',\n  update: 'tooltip:manuallyShowTip'\n}, // noop\nfunction () {});\necharts.registerAction({\n  type: 'hideTip',\n  event: 'hideTip',\n  update: 'tooltip:manuallyHideTip'\n}, // noop\nfunction () {});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar eventUtil = require(\"zrender/lib/core/event\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar formatUtil = require(\"../../util/format\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar toCamelCase = formatUtil.toCamelCase;\nvar vendors = ['', '-webkit-', '-moz-', '-o-'];\nvar gCssText = 'position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;';\n/**\n * @param {number} duration\n * @return {string}\n * @inner\n */\n\nfunction assembleTransition(duration) {\n  var transitionCurve = 'cubic-bezier(0.23, 1, 0.32, 1)';\n  var transitionText = 'left ' + duration + 's ' + transitionCurve + ',' + 'top ' + duration + 's ' + transitionCurve;\n  return zrUtil.map(vendors, function (vendorPrefix) {\n    return vendorPrefix + 'transition:' + transitionText;\n  }).join(';');\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n/**\n * @param {Object} tooltipModel\n * @return {string}\n * @inner\n */\n\n\nfunction assembleCssText(tooltipModel) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = tooltipModel.get('padding'); // Animation transition. Do not animate when transitionDuration is 0.\n\n  transitionDuration && cssText.push(assembleTransition(transitionDuration));\n\n  if (backgroundColor) {\n    if (env.canvasSupported) {\n      cssText.push('background-Color:' + backgroundColor);\n    } else {\n      // for ie\n      cssText.push('background-Color:#' + zrColor.toHex(backgroundColor));\n      cssText.push('filter:alpha(opacity=70)');\n    }\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + formatUtil.normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n}\n/**\n * @alias module:echarts/component/tooltip/TooltipContent\n * @constructor\n */\n\n\nfunction TooltipContent(container, api) {\n  if (env.wxa) {\n    return null;\n  }\n\n  var el = document.createElement('div');\n  var zr = this._zr = api.getZr();\n  this.el = el;\n  this._x = api.getWidth() / 2;\n  this._y = api.getHeight() / 2;\n  container.appendChild(el);\n  this._container = container;\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout; // FIXME\n  // Is it needed to trigger zr event manually if\n  // the browser do not support `pointer-events: none`.\n\n  var self = this;\n\n  el.onmouseenter = function () {\n    // clear the timeout in hideLater and keep showing tooltip\n    if (self._enterable) {\n      clearTimeout(self._hideTimeout);\n      self._show = true;\n    }\n\n    self._inContent = true;\n  };\n\n  el.onmousemove = function (e) {\n    e = e || window.event;\n\n    if (!self._enterable) {\n      // `pointer-events: none` is set to tooltip content div\n      // if `enterable` is set as `false`, and `el.onmousemove`\n      // can not be triggered. But in browser that do not\n      // support `pointer-events`, we need to do this:\n      // Try trigger zrender event to avoid mouse\n      // in and out shape too frequently\n      var handler = zr.handler;\n      eventUtil.normalizeEvent(container, e, true);\n      handler.dispatch('mousemove', e);\n    }\n  };\n\n  el.onmouseleave = function () {\n    if (self._enterable) {\n      if (self._show) {\n        self.hideLater(self._hideDelay);\n      }\n    }\n\n    self._inContent = false;\n  };\n}\n\nTooltipContent.prototype = {\n  constructor: TooltipContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var stl = container.currentStyle || document.defaultView.getComputedStyle(container);\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && stl.position !== 'absolute') {\n      domStyle.position = 'relative';\n    } // Hide the tooltip\n    // PENDING\n    // this.hide();\n\n  },\n  show: function (tooltipModel) {\n    clearTimeout(this._hideTimeout);\n    var el = this.el;\n    el.style.cssText = gCssText + assembleCssText(tooltipModel) // Because of the reason described in:\n    // http://stackoverflow.com/questions/21125587/css3-transition-not-working-in-chrome-anymore\n    // we should set initial value to `left` and `top`.\n    + ';left:' + this._x + 'px;top:' + this._y + 'px;' + (tooltipModel.get('extraCssText') || '');\n    el.style.display = el.innerHTML ? 'block' : 'none'; // If mouse occsionally move over the tooltip, a mouseout event will be\n    // triggered by canvas, and cuase some unexpectable result like dragging\n    // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n    // it. Although it is not suppored by IE8~IE10, fortunately it is a rare\n    // scenario.\n\n    el.style.pointerEvents = this._enterable ? 'auto' : 'none';\n    this._show = true;\n  },\n  setContent: function (content) {\n    this.el.innerHTML = content == null ? '' : content;\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var el = this.el;\n    return [el.clientWidth, el.clientHeight];\n  },\n  moveTo: function (x, y) {\n    // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n    var zr = this._zr;\n    var viewportRootOffset;\n\n    if (zr && zr.painter && (viewportRootOffset = zr.painter.getViewportRootOffset())) {\n      x += viewportRootOffset.offsetLeft;\n      y += viewportRootOffset.offsetTop;\n    }\n\n    var style = this.el.style;\n    style.left = x + 'px';\n    style.top = y + 'px';\n    this._x = x;\n    this._y = y;\n  },\n  hide: function () {\n    this.el.style.display = 'none';\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  getOuterSize: function () {\n    var width = this.el.clientWidth;\n    var height = this.el.clientHeight; // Consider browser compatibility.\n    // IE8 does not support getComputedStyle.\n\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      var stl = document.defaultView.getComputedStyle(this.el);\n\n      if (stl) {\n        width += parseInt(stl.borderLeftWidth, 10) + parseInt(stl.borderRightWidth, 10);\n        height += parseInt(stl.borderTopWidth, 10) + parseInt(stl.borderBottomWidth, 10);\n      }\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n};\nvar _default = TooltipContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendComponentModel({\n  type: 'tooltip',\n  dependencies: ['axisPointer'],\n  defaultOption: {\n    zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    // 'single' | 'multipleByCoordSys'\n    renderMode: 'auto',\n    // 'auto' | 'html' | 'richText'\n    // 'auto': use html by default, and use non-html if `document` is not defined\n    // 'html': use html for tooltip\n    // 'richText': use canvas, svg, and etc. for tooltip\n    //  {Array} | {Function}\n    // position: null\n    // Consider triggered from axisPointer handle, verticalAlign should be 'middle'\n    // align: null,\n    // verticalAlign: null,\n    //  content  viewRect  false \n    confine: false,\n    // {string}Template  {Function}\n    // formatter: null\n    showDelay: 0,\n    // ms\n    hideDelay: 100,\n    // s\n    transitionDuration: 0.4,\n    enterable: false,\n    // 0.7\n    backgroundColor: 'rgba(50,50,50,0.7)',\n    // \n    borderColor: '#333',\n    // px4\n    borderRadius: 4,\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // Extra css text\n    extraCssText: '',\n    // \n    axisPointer: {\n      // \n      // 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // type  line  tooltip line \n      //  'x' | 'y' | 'angle' | 'radius' | 'auto'\n      //  'auto' category  x \n      //  angle \n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {} // lineStyle and shadowStyle should not be specified here,\n        // otherwise it will always override those styles on option.axisPointer.\n\n      }\n    },\n    textStyle: {\n      color: '#fff',\n      fontSize: 14\n    }\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import Group from 'zrender/src/container/Group';\n\n/**\n * @alias module:echarts/component/tooltip/TooltipRichContent\n * @constructor\n */\nfunction TooltipRichContent(api) {\n  this._zr = api.getZr();\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout;\n}\n\nTooltipRichContent.prototype = {\n  constructor: TooltipRichContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {// noop\n  },\n  show: function (tooltipModel) {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.attr('show', true);\n    this._show = true;\n  },\n\n  /**\n   * Set tooltip content\n   *\n   * @param {string} content rich text string of content\n   * @param {Object} markerRich rich text style\n   * @param {Object} tooltipModel tooltip model\n   */\n  setContent: function (content, markerRich, tooltipModel) {\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var markers = {};\n    var text = content;\n    var prefix = '{marker';\n    var suffix = '|}';\n    var startId = text.indexOf(prefix);\n\n    while (startId >= 0) {\n      var endId = text.indexOf(suffix);\n      var name = text.substr(startId + prefix.length, endId - startId - prefix.length);\n\n      if (name.indexOf('sub') > -1) {\n        markers['marker' + name] = {\n          textWidth: 4,\n          textHeight: 4,\n          textBorderRadius: 2,\n          textBackgroundColor: markerRich[name],\n          // TODO: textOffset is not implemented for rich text\n          textOffset: [3, 0]\n        };\n      } else {\n        markers['marker' + name] = {\n          textWidth: 10,\n          textHeight: 10,\n          textBorderRadius: 5,\n          textBackgroundColor: markerRich[name]\n        };\n      }\n\n      text = text.substr(endId + 1);\n      startId = text.indexOf('{marker');\n    }\n\n    this.el = new Text({\n      style: {\n        rich: markers,\n        text: content,\n        textLineHeight: 20,\n        textBackgroundColor: tooltipModel.get('backgroundColor'),\n        textBorderRadius: tooltipModel.get('borderRadius'),\n        textFill: tooltipModel.get('textStyle.color'),\n        textPadding: tooltipModel.get('padding')\n      },\n      z: tooltipModel.get('z')\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var bounding = this.el.getBoundingRect();\n    return [bounding.width, bounding.height];\n  },\n  moveTo: function (x, y) {\n    if (this.el) {\n      this.el.attr('position', [x, y]);\n    }\n  },\n  hide: function () {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  getOuterSize: function () {\n    var size = this.getSize();\n    return {\n      width: size[0],\n      height: size[1]\n    };\n  }\n};\nvar _default = TooltipRichContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar TooltipContent = require(\"./TooltipContent\");\n\nvar TooltipRichContent = require(\"./TooltipRichContent\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar findPointFromSeries = require(\"../axisPointer/findPointFromSeries\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar Model = require(\"../../model/Model\");\n\nvar globalListener = require(\"../axisPointer/globalListener\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar axisPointerViewHelper = require(\"../axisPointer/viewHelper\");\n\nvar _model = require(\"../../util/model\");\n\nvar getTooltipRenderMode = _model.getTooltipRenderMode;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar parsePercent = numberUtil.parsePercent;\nvar proxyRect = new graphic.Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar _default = echarts.extendComponentView({\n  type: 'tooltip',\n  init: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = tooltipModel.get('renderMode');\n    this._renderMode = getTooltipRenderMode(renderMode);\n    var tooltipContent;\n\n    if (this._renderMode === 'html') {\n      tooltipContent = new TooltipContent(api.getDom(), api);\n      this._newLine = '<br/>';\n    } else {\n      tooltipContent = new TooltipRichContent(api);\n      this._newLine = '\\n';\n    }\n\n    this._tooltipContent = tooltipContent;\n  },\n  render: function (tooltipModel, ecModel, api) {\n    if (env.node) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    /**\n     * @private\n     * @type {module:echarts/component/tooltip/TooltipModel}\n     */\n\n    this._tooltipModel = tooltipModel;\n    /**\n     * @private\n     * @type {module:echarts/model/Global}\n     */\n\n    this._ecModel = ecModel;\n    /**\n     * @private\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this._api = api;\n    /**\n     * Should be cleaned when render.\n     * @private\n     * @type {Array.<Array.<Object>>}\n     */\n\n    this._lastDataByCoordSys = null;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update();\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow();\n  },\n  _initGlobalListener: function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  },\n  _keepShow: function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api; // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && tooltipModel.get('triggerOn') !== 'none') {\n      var self = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self._lastX,\n          y: self._lastY\n        });\n      });\n    }\n  },\n\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  manuallyShowTip: function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n\n    if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.position = [payload.x, payload.y];\n      el.update();\n      el.tooltip = payload.tooltip; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        event: {},\n        dataByCoordSys: payload.dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          position: payload.position,\n          target: pointInfo.el,\n          event: {}\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target,\n        event: {}\n      }, dispatchAction);\n    }\n  },\n  manuallyHideTip: function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  },\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  _manuallyAxisShowTip: function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model, tooltipModel]);\n\n    if (tooltipModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  },\n  _tryShow: function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } // Always show item tooltip if mouse is on the element with dataIndex\n    else if (el && el.dataIndex != null) {\n        this._lastDataByCoordSys = null;\n\n        this._showSeriesItemTooltip(e, el, dispatchAction);\n      } // Tooltip provided directly. Like legend.\n      else if (el && el.tooltip) {\n          this._lastDataByCoordSys = null;\n\n          this._showComponentItemTooltip(e, el, dispatchAction);\n        } else {\n          this._lastDataByCoordSys = null;\n\n          this._hide(dispatchAction);\n        }\n  },\n  _showOrMove: function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easyer to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = zrUtil.bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  },\n  _showAxisTooltip: function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleDefaultHTML = [];\n    var singleParamsList = [];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption, globalTooltipModel]);\n    var renderMode = this._renderMode;\n    var newLine = this._newLine;\n    var markers = {};\n    each(dataByCoordSys, function (itemCoordSys) {\n      // var coordParamList = [];\n      // var coordDefaultHTML = [];\n      // var coordTooltipModel = buildTooltipModel([\n      //     e.tooltipOption,\n      //     itemCoordSys.tooltipOption,\n      //     ecModel.getComponent(itemCoordSys.coordSysMainType, itemCoordSys.coordSysIndex),\n      //     globalTooltipModel\n      // ]);\n      // var displayMode = coordTooltipModel.get('displayMode');\n      // var paramsList = displayMode === 'single' ? singleParamsList : [];\n      each(itemCoordSys.dataByAxis, function (item) {\n        var axisModel = ecModel.getComponent(item.axisDim + 'Axis', item.axisIndex);\n        var axisValue = item.value;\n        var seriesDefaultHTML = [];\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var valueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, item.seriesDataIndices, item.valueLabelOpt);\n        zrUtil.each(item.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var dataParams = series && series.getDataParams(dataIndex);\n          dataParams.axisDim = item.axisDim;\n          dataParams.axisIndex = item.axisIndex;\n          dataParams.axisType = item.axisType;\n          dataParams.axisId = item.axisId;\n          dataParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, axisValue);\n          dataParams.axisValueLabel = valueLabel;\n\n          if (dataParams) {\n            singleParamsList.push(dataParams);\n            var seriesTooltip = series.formatTooltip(dataIndex, true, null, renderMode);\n            var html;\n\n            if (zrUtil.isObject(seriesTooltip)) {\n              html = seriesTooltip.html;\n              var newMarkers = seriesTooltip.markers;\n              zrUtil.merge(markers, newMarkers);\n            } else {\n              html = seriesTooltip;\n            }\n\n            seriesDefaultHTML.push(html);\n          }\n        }); // Default tooltip content\n        // FIXME\n        // (1) shold be the first data which has name?\n        // (2) themeRiver, firstDataIndex is array, and first line is unnecessary.\n\n        var firstLine = valueLabel;\n\n        if (renderMode !== 'html') {\n          singleDefaultHTML.push(seriesDefaultHTML.join(newLine));\n        } else {\n          singleDefaultHTML.push((firstLine ? formatUtil.encodeHTML(firstLine) + newLine : '') + seriesDefaultHTML.join(newLine));\n        }\n      });\n    }, this); // In most case, the second axis is shown upper than the first one.\n\n    singleDefaultHTML.reverse();\n    singleDefaultHTML = singleDefaultHTML.join(this._newLine + this._newLine);\n    var positionExpr = e.position;\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, singleParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, singleDefaultHTML, singleParamsList, Math.random(), point[0], point[1], positionExpr, undefined, markers);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  },\n  _showSeriesItemTooltip: function (e, el, dispatchAction) {\n    var ecModel = this._ecModel; // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = el.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = el.dataModel || seriesModel;\n    var dataIndex = el.dataIndex;\n    var dataType = el.dataType;\n    var data = dataModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model, this._tooltipModel]);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var seriesTooltip = dataModel.formatTooltip(dataIndex, false, dataType, this._renderMode);\n    var defaultHtml;\n    var markers;\n\n    if (zrUtil.isObject(seriesTooltip)) {\n      defaultHtml = seriesTooltip.html;\n      markers = seriesTooltip.markers;\n    } else {\n      defaultHtml = seriesTooltip;\n      markers = null;\n    }\n\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, defaultHtml, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markers);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  },\n  _showComponentItemTooltip: function (e, el, dispatchAction) {\n    var tooltipOpt = el.tooltip;\n\n    if (typeof tooltipOpt === 'string') {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var subTooltipModel = new Model(tooltipOpt, this._tooltipModel, this._ecModel);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on cooridinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      this._showTooltipContent(subTooltipModel, defaultHtml, subTooltipModel.get('formatterParams') || {}, asyncTicket, e.offsetX, e.offsetY, e.position, el);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  },\n  _showTooltipContent: function (tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markers) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    if (formatter && typeof formatter === 'string') {\n      html = formatUtil.formatTpl(formatter, params, true);\n    } else if (typeof formatter === 'function') {\n      var callback = bind(function (cbTicket, html) {\n        if (cbTicket === this._ticket) {\n          tooltipContent.setContent(html, markers, tooltipModel);\n\n          this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n        }\n      }, this);\n      this._ticket = asyncTicket;\n      html = formatter(params, asyncTicket, callback);\n    }\n\n    tooltipContent.setContent(html, markers, tooltipModel);\n    tooltipContent.show(tooltipModel);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  },\n\n  /**\n   * @param  {string|Function|Array.<number>|Object} positionExpr\n   * @param  {number} x Mouse x\n   * @param  {number} y Mouse y\n   * @param  {boolean} confine Whether confine tooltip content in view rect.\n   * @param  {Object|<Array.<Object>} params\n   * @param  {module:zrender/Element} el target element\n   * @param  {module:echarts/ExtensionAPI} api\n   * @return {Array.<number>}\n   */\n  _updatePosition: function (tooltipModel, positionExpr, x, y, content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (typeof positionExpr === 'function') {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (zrUtil.isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (zrUtil.isObject(positionExpr)) {\n      positionExpr.width = contentSize[0];\n      positionExpr.height = contentSize[1];\n      var layoutRect = layoutUtil.getLayoutRect(positionExpr, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (typeof positionExpr === 'string' && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize);\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (tooltipModel.get('confine')) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  },\n  // FIXME\n  // Should we remove this but leave this to user?\n  _updateContentNotChangedOnAxis: function (dataByCoordSys) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || {};\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged &= lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged &= lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged &= lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    return !!contentNotChanged;\n  },\n  _hide: function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  },\n  dispose: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    this._tooltipContent.hide();\n\n    globalListener.unregister('itemTooltip', api);\n  }\n});\n/**\n * @param {Array.<Object|module:echarts/model/Model>} modelCascade\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade) {\n  var resultModel = modelCascade.pop();\n\n  while (modelCascade.length) {\n    var tooltipOpt = modelCascade.pop();\n\n    if (tooltipOpt) {\n      if (Model.isInstance(tooltipOpt)) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (typeof tooltipOpt === 'string') {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      resultModel = new Model(tooltipOpt, resultModel, resultModel.ecModel);\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n\n  if (gapH != null) {\n    if (x + width + gapH > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var gap = 5;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - gap;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + gap;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar vector = require(\"zrender/lib/core/vector\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar Transformable = require(\"zrender/lib/mixin/Transformable\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Simple view coordinate system\n * Mapping given x, y to transformd view x, y\n */\nvar v2ApplyTransform = vector.applyTransform; // Dummy transform node\n\nfunction TransformDummy() {\n  Transformable.call(this);\n}\n\nzrUtil.mixin(TransformDummy, Transformable);\n\nfunction View(name) {\n  /**\n   * @type {string}\n   */\n  this.name = name;\n  /**\n   * @type {Object}\n   */\n\n  this.zoomLimit;\n  Transformable.call(this);\n  this._roamTransformable = new TransformDummy();\n  this._rawTransformable = new TransformDummy();\n  this._center;\n  this._zoom;\n}\n\nView.prototype = {\n  constructor: View,\n  type: 'view',\n\n  /**\n   * @param {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['x', 'y'],\n\n  /**\n   * Set bounding rect\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  // PENDING to getRect\n  setBoundingRect: function (x, y, width, height) {\n    this._rect = new BoundingRect(x, y, width, height);\n    return this._rect;\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  // PENDING to getRect\n  getBoundingRect: function () {\n    return this._rect;\n  },\n\n  /**\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  setViewRect: function (x, y, width, height) {\n    this.transformTo(x, y, width, height);\n    this._viewRect = new BoundingRect(x, y, width, height);\n  },\n\n  /**\n   * Transformed to particular position and size\n   * @param {number} x\n   * @param {number} y\n   * @param {number} width\n   * @param {number} height\n   */\n  transformTo: function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var rawTransform = this._rawTransformable;\n    rawTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    rawTransform.decomposeTransform();\n\n    this._updateTransform();\n  },\n\n  /**\n   * Set center of view\n   * @param {Array.<number>} [centerCoord]\n   */\n  setCenter: function (centerCoord) {\n    if (!centerCoord) {\n      return;\n    }\n\n    this._center = centerCoord;\n\n    this._updateCenterAndZoom();\n  },\n\n  /**\n   * @param {number} zoom\n   */\n  setZoom: function (zoom) {\n    zoom = zoom || 1;\n    var zoomLimit = this.zoomLimit;\n\n    if (zoomLimit) {\n      if (zoomLimit.max != null) {\n        zoom = Math.min(zoomLimit.max, zoom);\n      }\n\n      if (zoomLimit.min != null) {\n        zoom = Math.max(zoomLimit.min, zoom);\n      }\n    }\n\n    this._zoom = zoom;\n\n    this._updateCenterAndZoom();\n  },\n\n  /**\n   * Get default center without roam\n   */\n  getDefaultCenter: function () {\n    // Rect before any transform\n    var rawRect = this.getBoundingRect();\n    var cx = rawRect.x + rawRect.width / 2;\n    var cy = rawRect.y + rawRect.height / 2;\n    return [cx, cy];\n  },\n  getCenter: function () {\n    return this._center || this.getDefaultCenter();\n  },\n  getZoom: function () {\n    return this._zoom || 1;\n  },\n\n  /**\n   * @return {Array.<number}\n   */\n  getRoamTransform: function () {\n    return this._roamTransformable.getLocalTransform();\n  },\n\n  /**\n   * Remove roam\n   */\n  _updateCenterAndZoom: function () {\n    // Must update after view transform updated\n    var rawTransformMatrix = this._rawTransformable.getLocalTransform();\n\n    var roamTransform = this._roamTransformable;\n    var defaultCenter = this.getDefaultCenter();\n    var center = this.getCenter();\n    var zoom = this.getZoom();\n    center = vector.applyTransform([], center, rawTransformMatrix);\n    defaultCenter = vector.applyTransform([], defaultCenter, rawTransformMatrix);\n    roamTransform.origin = center;\n    roamTransform.position = [defaultCenter[0] - center[0], defaultCenter[1] - center[1]];\n    roamTransform.scale = [zoom, zoom];\n\n    this._updateTransform();\n  },\n\n  /**\n   * Update transform from roam and mapLocation\n   * @private\n   */\n  _updateTransform: function () {\n    var roamTransformable = this._roamTransformable;\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.parent = roamTransformable;\n    roamTransformable.updateTransform();\n    rawTransformable.updateTransform();\n    matrix.copy(this.transform || (this.transform = []), rawTransformable.transform || matrix.create());\n    this._rawTransform = rawTransformable.getLocalTransform();\n    this.invTransform = this.invTransform || [];\n    matrix.invert(this.invTransform, this.transform);\n    this.decomposeTransform();\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getViewRect: function () {\n    return this._viewRect;\n  },\n\n  /**\n   * Get view rect after roam transform\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getViewRectAfterRoam: function () {\n    var rect = this.getBoundingRect().clone();\n    rect.applyTransform(this.transform);\n    return rect;\n  },\n\n  /**\n   * Convert a single (lon, lat) data item to (x, y) point.\n   * @param {Array.<number>} data\n   * @param {boolean} noRoam\n   * @param {Array.<number>} [out]\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, noRoam, out) {\n    var transform = noRoam ? this._rawTransform : this.transform;\n    out = out || [];\n    return transform ? v2ApplyTransform(out, data, transform) : vector.copy(out, data);\n  },\n\n  /**\n   * Convert a (x, y) point to (lon, lat) data\n   * @param {Array.<number>} point\n   * @return {Array.<number>}\n   */\n  pointToData: function (point) {\n    var invTransform = this.invTransform;\n    return invTransform ? v2ApplyTransform([], point, invTransform) : [point[0], point[1]];\n  },\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  convertToPixel: zrUtil.curry(doConvert, 'dataToPoint'),\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  convertFromPixel: zrUtil.curry(doConvert, 'pointToData'),\n\n  /**\n   * @implements\n   * see {module:echarts/CoodinateSystem}\n   */\n  containPoint: function (point) {\n    return this.getViewRectAfterRoam().contain(point[0], point[1]);\n  }\n  /**\n   * @return {number}\n   */\n  // getScalarScale: function () {\n  //     // Use determinant square root of transform to mutiply scalar\n  //     var m = this.transform;\n  //     var det = Math.sqrt(Math.abs(m[0] * m[3] - m[2] * m[1]));\n  //     return det;\n  // }\n\n};\nzrUtil.mixin(View, Transformable);\n\nfunction doConvert(methodName, ecModel, finder, value) {\n  var seriesModel = finder.seriesModel;\n  var coordSys = seriesModel ? seriesModel.coordinateSystem : null; // e.g., graph.\n\n  return coordSys === this ? coordSys[methodName](value) : null;\n}\n\nvar _default = View;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar defaultOption = {\n  show: true,\n  zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By defualt auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#333',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      color: ['#ccc'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.3)', 'rgba(200,200,200,0.3)']\n    }\n  }\n};\nvar axisDefault = {};\naxisDefault.categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  // Only usefull in the case like: category is\n  // ['2012-01-01', '2012-01-02', ...], where the input\n  // data has been ensured not duplicate and is large data.\n  // null means \"auto\":\n  // if axis.data provided, do not deduplication,\n  // else do deduplication.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\naxisDefault.valueAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For value axis, [GAP, GAP], where\n  // `GAP` can be an absolute pixel number (like `35`), or percent (like `'30%'`)\n  boundaryGap: [0, 0],\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  // Min value of the axis. can be:\n  // + a number\n  // + 'dataMin': use the min value in data.\n  // + null/undefined: auto decide min value (consider pretty look and boundaryGap).\n  // min: null,\n  // Max value of the axis. can be:\n  // + a number\n  // + 'dataMax': use the max value in data.\n  // + null/undefined: auto decide max value (consider pretty look and boundaryGap).\n  // max: null,\n  // Readonly prop, specifies start value of the range when using data zoom.\n  // rangeStart: null\n  // Readonly prop, specifies end value of the range when using data zoom.\n  // rangeEnd: null\n  // Optional value can be:\n  // + `false`: always include value 0.\n  // + `true`: the extent do not consider value 0.\n  // scale: false,\n  // AxisTick and axisLabel and splitLine are caculated based on splitNumber.\n  splitNumber: 5 // Interval specifies the span of the ticks is mandatorily.\n  // interval: null\n  // Specify min interval when auto calculate tick interval.\n  // minInterval: null\n  // Specify max interval when auto calculate tick interval.\n  // maxInterval: null\n\n}, defaultOption);\naxisDefault.timeAxis = zrUtil.defaults({\n  scale: true,\n  min: 'dataMin',\n  max: 'dataMax'\n}, axisDefault.valueAxis);\naxisDefault.logAxis = zrUtil.defaults({\n  scale: true,\n  logBase: 10\n}, axisDefault.valueAxis);\nvar _default = axisDefault;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisDefault = require(\"./axisDefault\");\n\nvar ComponentModel = require(\"../model/Component\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutParams = _layout.getLayoutParams;\nvar mergeLayoutParam = _layout.mergeLayoutParam;\n\nvar OrdinalMeta = require(\"../data/OrdinalMeta\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME axisType is fixed ?\nvar AXIS_TYPES = ['value', 'category', 'time', 'log'];\n/**\n * Generate sub axis model class\n * @param {string} axisName 'x' 'y' 'radius' 'angle' 'parallel'\n * @param {module:echarts/model/Component} BaseAxisModelClass\n * @param {Function} axisTypeDefaulter\n * @param {Object} [extraDefaultOption]\n */\n\nfunction _default(axisName, BaseAxisModelClass, axisTypeDefaulter, extraDefaultOption) {\n  zrUtil.each(AXIS_TYPES, function (axisType) {\n    BaseAxisModelClass.extend({\n      /**\n       * @readOnly\n       */\n      type: axisName + 'Axis.' + axisType,\n      mergeDefaultAndTheme: function (option, ecModel) {\n        var layoutMode = this.layoutMode;\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        zrUtil.merge(option, themeModel.get(axisType + 'Axis'));\n        zrUtil.merge(option, this.getDefaultOption());\n        option.type = axisTypeDefaulter(axisName, option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      },\n\n      /**\n       * @override\n       */\n      optionUpdated: function () {\n        var thisOption = this.option;\n\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      },\n\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n      getCategories: function (rawData) {\n        var option = this.option; // FIXME\n        // warning if called before all of 'getInitailData' finished.\n\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n\n          return this.__ordinalMeta.categories;\n        }\n      },\n      getOrdinalMeta: function () {\n        return this.__ordinalMeta;\n      },\n      defaultOption: zrUtil.mergeAll([{}, axisDefault[axisType + 'Axis'], extraDefaultOption], true)\n    });\n  });\n  ComponentModel.registerSubTypeDefaulter(axisName + 'Axis', zrUtil.curry(axisTypeDefaulter, axisName));\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../Axis\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Extend axis 2d\n * @constructor module:echarts/coord/cartesian/Axis2D\n * @extends {module:echarts/coord/cartesian/Axis}\n * @param {string} dim\n * @param {*} scale\n * @param {Array.<number>} coordExtent\n * @param {string} axisType\n * @param {string} position\n */\nvar Axis2D = function (dim, scale, coordExtent, axisType, position) {\n  Axis.call(this, dim, scale, coordExtent);\n  /**\n   * Axis type\n   *  - 'category'\n   *  - 'value'\n   *  - 'time'\n   *  - 'log'\n   * @type {string}\n   */\n\n  this.type = axisType || 'value';\n  /**\n   * Axis position\n   *  - 'top'\n   *  - 'bottom'\n   *  - 'left'\n   *  - 'right'\n   */\n\n  this.position = position || 'bottom';\n};\n\nAxis2D.prototype = {\n  constructor: Axis2D,\n\n  /**\n   * Index of axis, can be used as key\n   */\n  index: 0,\n\n  /**\n   * Implemented in <module:echarts/coord/cartesian/Grid>.\n   * @return {Array.<module:echarts/coord/cartesian/Axis2D>}\n   *         If not on zero of other axis, return null/undefined.\n   *         If no axes, return an empty array.\n   */\n  getAxesOnZeroOf: null,\n\n  /**\n   * Axis model\n   * @param {module:echarts/coord/cartesian/AxisModel}\n   */\n  model: null,\n  isHorizontal: function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  },\n\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n  getGlobalExtent: function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  },\n  getOtherAxis: function () {\n    this.grid.getOtherAxis();\n  },\n\n  /**\n   * @override\n   */\n  pointToData: function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  },\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var localCoord = axis.toLocalCoord(80);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toLocalCoord: null,\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var globalCoord = axis.toLocalCoord(40);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toGlobalCoord: null\n};\nzrUtil.inherits(Axis2D, Axis);\nvar _default = Axis2D;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\nvar axisModelCreator = require(\"../axisModelCreator\");\n\nvar axisModelCommonMixin = require(\"../axisModelCommonMixin\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisModel = ComponentModel.extend({\n  type: 'cartesian2dAxis',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Axis2D}\n   */\n  axis: null,\n\n  /**\n   * @override\n   */\n  init: function () {\n    AxisModel.superApply(this, 'init', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function () {\n    AxisModel.superApply(this, 'mergeOption', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  restoreData: function () {\n    AxisModel.superApply(this, 'restoreData', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   * @return {module:echarts/model/Component}\n   */\n  getCoordSysModel: function () {\n    return this.ecModel.queryComponents({\n      mainType: 'grid',\n      index: this.option.gridIndex,\n      id: this.option.gridId\n    })[0];\n  }\n});\n\nfunction getAxisType(axisDim, option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}\n\nzrUtil.merge(AxisModel.prototype, axisModelCommonMixin);\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  // Offset is for multiple axis on the same position\n  offset: 0\n};\naxisModelCreator('x', AxisModel, getAxisType, extraOption);\naxisModelCreator('y', AxisModel, getAxisType, extraOption);\nvar _default = AxisModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Cartesian coordinate system\n * @module  echarts/coord/Cartesian\n *\n */\nfunction dimAxisMapper(dim) {\n  return this._axes[dim];\n}\n/**\n * @alias module:echarts/coord/Cartesian\n * @constructor\n */\n\n\nvar Cartesian = function (name) {\n  this._axes = {};\n  this._dimList = [];\n  /**\n   * @type {string}\n   */\n\n  this.name = name || '';\n};\n\nCartesian.prototype = {\n  constructor: Cartesian,\n  type: 'cartesian',\n\n  /**\n   * Get axis\n   * @param  {number|string} dim\n   * @return {module:echarts/coord/Cartesian~Axis}\n   */\n  getAxis: function (dim) {\n    return this._axes[dim];\n  },\n\n  /**\n   * Get axes list\n   * @return {Array.<module:echarts/coord/Cartesian~Axis>}\n   */\n  getAxes: function () {\n    return zrUtil.map(this._dimList, dimAxisMapper, this);\n  },\n\n  /**\n   * Get axes list by given scale type\n   */\n  getAxesByScale: function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  },\n\n  /**\n   * Add axis\n   * @param {module:echarts/coord/Cartesian.Axis}\n   */\n  addAxis: function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  },\n\n  /**\n   * Convert data to coord in nd space\n   * @param {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  dataToCoord: function (val) {\n    return this._dataCoordConvert(val, 'dataToCoord');\n  },\n\n  /**\n   * Convert coord in nd space to data\n   * @param  {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  coordToData: function (val) {\n    return this._dataCoordConvert(val, 'coordToData');\n  },\n  _dataCoordConvert: function (input, method) {\n    var dimList = this._dimList;\n    var output = input instanceof Array ? [] : {};\n\n    for (var i = 0; i < dimList.length; i++) {\n      var dim = dimList[i];\n      var axis = this._axes[dim];\n      output[dim] = axis[method](input[dim]);\n    }\n\n    return output;\n  }\n};\nvar _default = Cartesian;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar Cartesian = require(\"./Cartesian\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction Cartesian2D(name) {\n  Cartesian.call(this, name);\n}\n\nCartesian2D.prototype = {\n  constructor: Cartesian2D,\n  type: 'cartesian2d',\n\n  /**\n   * @type {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['x', 'y'],\n\n  /**\n   * Base axis will be used on stacking.\n   *\n   * @return {module:echarts/coord/cartesian/Axis2D}\n   */\n  getBaseAxis: function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  },\n\n  /**\n   * If contain point\n   * @param {Array.<number>} point\n   * @return {boolean}\n   */\n  containPoint: function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  },\n\n  /**\n   * If contain data\n   * @param {Array.<number>} data\n   * @return {boolean}\n   */\n  containData: function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, reserved, out) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out = out || [];\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(data[0]));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(data[1]));\n    return out;\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  clampData: function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  },\n\n  /**\n   * @param {Array.<number>} point\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  pointToData: function (point, out) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out = out || [];\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]));\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]));\n    return out;\n  },\n\n  /**\n   * Get other axis\n   * @param {module:echarts/coord/cartesian/Axis2D} axis\n   */\n  getOtherAxis: function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  },\n\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   * @return {BoundingRect}\n   */\n  getArea: function () {\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]);\n    var y = Math.min(yExtent[0], yExtent[1]);\n    var width = Math.max(xExtent[0], xExtent[1]) - x;\n    var height = Math.max(yExtent[0], yExtent[1]) - y;\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n  }\n};\nzrUtil.inherits(Cartesian2D, Cartesian);\nvar _default = Cartesian2D;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isObject = _util.isObject;\nvar each = _util.each;\nvar map = _util.map;\nvar indexOf = _util.indexOf;\nvar retrieve = _util.retrieve;\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar createScaleByModel = _axisHelper.createScaleByModel;\nvar ifAxisCrossZero = _axisHelper.ifAxisCrossZero;\nvar niceScaleExtent = _axisHelper.niceScaleExtent;\nvar estimateLabelUnionRect = _axisHelper.estimateLabelUnionRect;\n\nvar Cartesian2D = require(\"./Cartesian2D\");\n\nvar Axis2D = require(\"./Axis2D\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar getStackedDimension = _dataStackHelper.getStackedDimension;\n\nrequire(\"./GridModel\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\n// Depends on GridModel, AxisModel, which performs preprocess.\n\n/**\n * Check if the axis is used in the specified grid\n * @inner\n */\nfunction isAxisUsedInTheGrid(axisModel, gridModel, ecModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction Grid(gridModel, ecModel, api) {\n  /**\n   * @type {Object.<string, module:echarts/coord/cartesian/Cartesian2D>}\n   * @private\n   */\n  this._coordsMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Cartesian>}\n   * @private\n   */\n\n  this._coordsList = [];\n  /**\n   * @type {Object.<string, Array.<module:echarts/coord/cartesian/Axis2D>>}\n   * @private\n   */\n\n  this._axesMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Axis2D>}\n   * @private\n   */\n\n  this._axesList = [];\n\n  this._initCartesian(gridModel, ecModel, api);\n\n  this.model = gridModel;\n}\n\nvar gridProto = Grid.prototype;\ngridProto.type = 'grid';\ngridProto.axisPointerEnabled = true;\n\ngridProto.getRect = function () {\n  return this._rect;\n};\n\ngridProto.update = function (ecModel, api) {\n  var axesMap = this._axesMap;\n\n  this._updateScale(ecModel, this.model);\n\n  each(axesMap.x, function (xAxis) {\n    niceScaleExtent(xAxis.scale, xAxis.model);\n  });\n  each(axesMap.y, function (yAxis) {\n    niceScaleExtent(yAxis.scale, yAxis.model);\n  }); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n  var onZeroRecords = {};\n  each(axesMap.x, function (xAxis) {\n    fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n  });\n  each(axesMap.y, function (yAxis) {\n    fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n  }); // Resize again if containLabel is enabled\n  // FIXME It may cause getting wrong grid size in data processing stage\n\n  this.resize(this.model, api);\n};\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis, onZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  }; // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n\n\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get('axisLine.onZero');\n  var onZeroAxisIndex = axisModel.get('axisLine.onZeroAxisIndex');\n\n  if (!onZero) {\n    return;\n  } // If target axis is specified.\n\n\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\n\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\n/**\n * Resize the grid\n * @param {module:echarts/coord/cartesian/GridModel} gridModel\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\ngridProto.resize = function (gridModel, api, ignoreContainLabel) {\n  var gridRect = getLayoutRect(gridModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n  this._rect = gridRect;\n  var axesList = this._axesList;\n  adjustAxes(); // Minus label size\n\n  if (!ignoreContainLabel && gridModel.get('containLabel')) {\n    each(axesList, function (axis) {\n      if (!axis.model.get('axisLabel.inside')) {\n        var labelUnionRect = estimateLabelUnionRect(axis);\n\n        if (labelUnionRect) {\n          var dim = axis.isHorizontal() ? 'height' : 'width';\n          var margin = axis.model.get('axisLabel.margin');\n          gridRect[dim] -= labelUnionRect[dim] + margin;\n\n          if (axis.position === 'top') {\n            gridRect.y += labelUnionRect.height + margin;\n          } else if (axis.position === 'left') {\n            gridRect.x += labelUnionRect.width + margin;\n          }\n        }\n      }\n    });\n    adjustAxes();\n  }\n\n  function adjustAxes() {\n    each(axesList, function (axis) {\n      var isHorizontal = axis.isHorizontal();\n      var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n      var idx = axis.inverse ? 1 : 0;\n      axis.setExtent(extent[idx], extent[1 - idx]);\n      updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n    });\n  }\n};\n/**\n * @param {string} axisType\n * @param {number} [axisIndex]\n */\n\n\ngridProto.getAxis = function (axisType, axisIndex) {\n  var axesMapOnDim = this._axesMap[axisType];\n\n  if (axesMapOnDim != null) {\n    if (axisIndex == null) {\n      // Find first axis\n      for (var name in axesMapOnDim) {\n        if (axesMapOnDim.hasOwnProperty(name)) {\n          return axesMapOnDim[name];\n        }\n      }\n    }\n\n    return axesMapOnDim[axisIndex];\n  }\n};\n/**\n * @return {Array.<module:echarts/coord/Axis>}\n */\n\n\ngridProto.getAxes = function () {\n  return this._axesList.slice();\n};\n/**\n * Usage:\n *      grid.getCartesian(xAxisIndex, yAxisIndex);\n *      grid.getCartesian(xAxisIndex);\n *      grid.getCartesian(null, yAxisIndex);\n *      grid.getCartesian({xAxisIndex: ..., yAxisIndex: ...});\n *\n * @param {number|Object} [xAxisIndex]\n * @param {number} [yAxisIndex]\n */\n\n\ngridProto.getCartesian = function (xAxisIndex, yAxisIndex) {\n  if (xAxisIndex != null && yAxisIndex != null) {\n    var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n    return this._coordsMap[key];\n  }\n\n  if (isObject(xAxisIndex)) {\n    yAxisIndex = xAxisIndex.yAxisIndex;\n    xAxisIndex = xAxisIndex.xAxisIndex;\n  } // When only xAxisIndex or yAxisIndex given, find its first cartesian.\n\n\n  for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n    if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n      return coordList[i];\n    }\n  }\n};\n\ngridProto.getCartesians = function () {\n  return this._coordsList.slice();\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertToPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertFromPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n};\n/**\n * @inner\n */\n\n\ngridProto._findConvertTarget = function (ecModel, finder) {\n  var seriesModel = finder.seriesModel;\n  var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis')[0];\n  var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis')[0];\n  var gridModel = finder.gridModel;\n  var coordsList = this._coordsList;\n  var cartesian;\n  var axis;\n\n  if (seriesModel) {\n    cartesian = seriesModel.coordinateSystem;\n    indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n  } else if (xAxisModel && yAxisModel) {\n    cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  } else if (xAxisModel) {\n    axis = this.getAxis('x', xAxisModel.componentIndex);\n  } else if (yAxisModel) {\n    axis = this.getAxis('y', yAxisModel.componentIndex);\n  } // Lowest priority.\n  else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n\n  return {\n    cartesian: cartesian,\n    axis: axis\n  };\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.containPoint = function (point) {\n  var coord = this._coordsList[0];\n\n  if (coord) {\n    return coord.containPoint(point);\n  }\n};\n/**\n * Initialize cartesian coordinate systems\n * @private\n */\n\n\ngridProto._initCartesian = function (gridModel, ecModel, api) {\n  var axisPositionUsed = {\n    left: false,\n    right: false,\n    top: false,\n    bottom: false\n  };\n  var axesMap = {\n    x: {},\n    y: {}\n  };\n  var axesCount = {\n    x: 0,\n    y: 0\n  }; /// Create axis\n\n  ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n  ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n  if (!axesCount.x || !axesCount.y) {\n    // Roll back when there no either x or y axis\n    this._axesMap = {};\n    this._axesList = [];\n    return;\n  }\n\n  this._axesMap = axesMap; /// Create cartesian2d\n\n  each(axesMap.x, function (xAxis, xAxisIndex) {\n    each(axesMap.y, function (yAxis, yAxisIndex) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      var cartesian = new Cartesian2D(key);\n      cartesian.grid = this;\n      cartesian.model = gridModel;\n      this._coordsMap[key] = cartesian;\n\n      this._coordsList.push(cartesian);\n\n      cartesian.addAxis(xAxis);\n      cartesian.addAxis(yAxis);\n    }, this);\n  }, this);\n\n  function createAxisCreator(axisType) {\n    return function (axisModel, idx) {\n      if (!isAxisUsedInTheGrid(axisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var axisPosition = axisModel.get('position');\n\n      if (axisType === 'x') {\n        // Fix position\n        if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n          // Default bottom of X\n          axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n        }\n      } else {\n        // Fix position\n        if (axisPosition !== 'left' && axisPosition !== 'right') {\n          // Default left of Y\n          axisPosition = axisPositionUsed.left ? 'right' : 'left';\n        }\n      }\n\n      axisPositionUsed[axisPosition] = true;\n      var axis = new Axis2D(axisType, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n      var isCategory = axis.type === 'category';\n      axis.onBand = isCategory && axisModel.get('boundaryGap');\n      axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n      axisModel.axis = axis; // Inject axisModel into axis\n\n      axis.model = axisModel; // Inject grid info axis\n\n      axis.grid = this; // Index of axis, can be used as key\n\n      axis.index = idx;\n\n      this._axesList.push(axis);\n\n      axesMap[axisType][idx] = axis;\n      axesCount[axisType]++;\n    };\n  }\n};\n/**\n * Update cartesian properties from series\n * @param  {module:echarts/model/Option} option\n * @private\n */\n\n\ngridProto._updateScale = function (ecModel, gridModel) {\n  // Reset scale\n  each(this._axesList, function (axis) {\n    axis.scale.setExtent(Infinity, -Infinity);\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (isCartesian2D(seriesModel)) {\n      var axesModels = findAxesModels(seriesModel, ecModel);\n      var xAxisModel = axesModels[0];\n      var yAxisModel = axesModels[1];\n\n      if (!isAxisUsedInTheGrid(xAxisModel, gridModel, ecModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      var data = seriesModel.getData();\n      var xAxis = cartesian.getAxis('x');\n      var yAxis = cartesian.getAxis('y');\n\n      if (data.type === 'list') {\n        unionExtent(data, xAxis, seriesModel);\n        unionExtent(data, yAxis, seriesModel);\n      }\n    }\n  }, this);\n\n  function unionExtent(data, axis, seriesModel) {\n    each(data.mapDimension(axis.dim, true), function (dim) {\n      axis.scale.unionExtentFromData( // For example, the extent of the orginal dimension\n      // is [0.1, 0.5], the extent of the `stackResultDimension`\n      // is [7, 9], the final extent should not include [0.1, 0.5].\n      data, getStackedDimension(data, dim));\n    });\n  }\n};\n/**\n * @param {string} [dim] 'x' or 'y' or 'auto' or null/undefined\n * @return {Object} {baseAxes: [], otherAxes: []}\n */\n\n\ngridProto.getTooltipAxes = function (dim) {\n  var baseAxes = [];\n  var otherAxes = [];\n  each(this.getCartesians(), function (cartesian) {\n    var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n    var otherAxis = cartesian.getOtherAxis(baseAxis);\n    indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n    indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n  });\n  return {\n    baseAxes: baseAxes,\n    otherAxes: otherAxes\n  };\n};\n/**\n * @inner\n */\n\n\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nvar axesTypes = ['xAxis', 'yAxis'];\n/**\n * @inner\n */\n\nfunction findAxesModels(seriesModel, ecModel) {\n  return map(axesTypes, function (axisType) {\n    var axisModel = seriesModel.getReferringComponents(axisType)[0];\n    return axisModel;\n  });\n}\n/**\n * @inner\n */\n\n\nfunction isCartesian2D(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\n\nGrid.create = function (ecModel, api) {\n  var grids = [];\n  ecModel.eachComponent('grid', function (gridModel, idx) {\n    var grid = new Grid(gridModel, ecModel, api);\n    grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n    // should be performed in create stage.\n\n    grid.resize(gridModel, api, true);\n    gridModel.coordinateSystem = grid;\n    grids.push(grid);\n  }); // Inject the coordinateSystems into seriesModel\n\n  ecModel.eachSeries(function (seriesModel) {\n    if (!isCartesian2D(seriesModel)) {\n      return;\n    }\n\n    var axesModels = findAxesModels(seriesModel, ecModel);\n    var xAxisModel = axesModels[0];\n    var yAxisModel = axesModels[1];\n    var gridModel = xAxisModel.getCoordSysModel();\n    var grid = gridModel.coordinateSystem;\n    seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  });\n  return grids;\n}; // For deciding which dimensions to use when creating list data\n\n\nGrid.dimensions = Grid.prototype.dimensions = Cartesian2D.prototype.dimensions;\nCoordinateSystem.register('cartesian2d', Grid);\nvar _default = Grid;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./AxisModel\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid \n//  Cartesian2D \nvar _default = ComponentModel.extend({\n  type: 'grid',\n  dependencies: ['xAxis', 'yAxis'],\n  layoutMode: 'box',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Grid}\n   */\n  coordinateSystem: null,\n  defaultOption: {\n    show: false,\n    zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 60,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Can only be called after coordinate system creation stage.\n * (Can be called before coordinate system update stage).\n *\n * @param {Object} opt {labelInside}\n * @return {Object} {\n *  position, rotation, labelDirection, labelOffset,\n *  tickDirection, labelRotate, z2\n * }\n */\nfunction layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  } // Axis position\n\n\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n\n  if (axisModel.get('axisTick.inside')) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get('axisLabel.inside'))) {\n    layout.labelDirection = -layout.labelDirection;\n  } // Special label rotation\n\n\n  var labelRotate = axisModel.get('axisLabel.rotate');\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // Over splitLine and splitArea\n\n  layout.z2 = 1;\n  return layout;\n}\n\nexports.layout = layout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar View = require(\"../View\");\n\nvar geoSourceManager = require(\"./geoSourceManager\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * [Geo description]\n * For backward compatibility, the orginal interface:\n * `name, map, geoJson, specialAreas, nameMap` is kept.\n *\n * @param {string|Object} name\n * @param {string} map Map type\n *        Specify the positioned areas by left, top, width, height\n * @param {Object.<string, string>} [nameMap]\n *        Specify name alias\n * @param {boolean} [invertLongitute=true]\n */\nfunction Geo(name, map, nameMap, invertLongitute) {\n  View.call(this, name);\n  /**\n   * Map type\n   * @type {string}\n   */\n\n  this.map = map;\n  var source = geoSourceManager.load(map, nameMap);\n  this._nameCoordMap = source.nameCoordMap;\n  this._regionsMap = source.regionsMap;\n  this._invertLongitute = invertLongitute == null ? true : invertLongitute;\n  /**\n   * @readOnly\n   */\n\n  this.regions = source.regions;\n  /**\n   * @type {module:zrender/src/core/BoundingRect}\n   */\n\n  this._rect = source.boundingRect;\n}\n\nGeo.prototype = {\n  constructor: Geo,\n  type: 'geo',\n\n  /**\n   * @param {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['lng', 'lat'],\n\n  /**\n   * If contain given lng,lat coord\n   * @param {Array.<number>}\n   * @readOnly\n   */\n  containCoord: function (coord) {\n    var regions = this.regions;\n\n    for (var i = 0; i < regions.length; i++) {\n      if (regions[i].contain(coord)) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /**\n   * @override\n   */\n  transformTo: function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var invertLongitute = this._invertLongitute;\n    rect = rect.clone();\n\n    if (invertLongitute) {\n      // Longitute is inverted\n      rect.y = -rect.y - rect.height;\n    }\n\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    rawTransformable.decomposeTransform();\n\n    if (invertLongitute) {\n      var scale = rawTransformable.scale;\n      scale[1] = -scale[1];\n    }\n\n    rawTransformable.updateTransform();\n\n    this._updateTransform();\n  },\n\n  /**\n   * @param {string} name\n   * @return {module:echarts/coord/geo/Region}\n   */\n  getRegion: function (name) {\n    return this._regionsMap.get(name);\n  },\n  getRegionByCoord: function (coord) {\n    var regions = this.regions;\n\n    for (var i = 0; i < regions.length; i++) {\n      if (regions[i].contain(coord)) {\n        return regions[i];\n      }\n    }\n  },\n\n  /**\n   * Add geoCoord for indexing by name\n   * @param {string} name\n   * @param {Array.<number>} geoCoord\n   */\n  addGeoCoord: function (name, geoCoord) {\n    this._nameCoordMap.set(name, geoCoord);\n  },\n\n  /**\n   * Get geoCoord by name\n   * @param {string} name\n   * @return {Array.<number>}\n   */\n  getGeoCoord: function (name) {\n    return this._nameCoordMap.get(name);\n  },\n\n  /**\n   * @override\n   */\n  getBoundingRect: function () {\n    return this._rect;\n  },\n\n  /**\n   * @param {string|Array.<number>} data\n   * @param {boolean} noRoam\n   * @param {Array.<number>} [out]\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, noRoam, out) {\n    if (typeof data === 'string') {\n      // Map area name to geoCoord\n      data = this.getGeoCoord(data);\n    }\n\n    if (data) {\n      return View.prototype.dataToPoint.call(this, data, noRoam, out);\n    }\n  },\n\n  /**\n   * @override\n   */\n  convertToPixel: zrUtil.curry(doConvert, 'dataToPoint'),\n\n  /**\n   * @override\n   */\n  convertFromPixel: zrUtil.curry(doConvert, 'pointToData')\n};\nzrUtil.mixin(Geo, View);\n\nfunction doConvert(methodName, ecModel, finder, value) {\n  var geoModel = finder.geoModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = geoModel ? geoModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem // For map.\n  || (seriesModel.getReferringComponents('geo')[0] || {}).coordinateSystem : null;\n  return coordSys === this ? coordSys[methodName](value) : null;\n}\n\nvar _default = Geo;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Fix for \n// var Region = require('../Region');\n// var zrUtil = require('zrender/src/core/util');\n// var geoCoord = [126, 25];\nvar points = [[[123.45165252685547, 25.73527164402261], [123.49731445312499, 25.73527164402261], [123.49731445312499, 25.750734064600884], [123.45165252685547, 25.750734064600884], [123.45165252685547, 25.73527164402261]]];\n\nfunction _default(mapType, region) {\n  if (mapType === 'china' && region.name === '') {\n    region.geometries.push({\n      type: 'polygon',\n      exterior: points[0]\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar geoCoordMap = {\n  'Russia': [100, 60],\n  'United States': [-99, 38],\n  'United States of America': [-99, 38]\n};\n\nfunction _default(mapType, region) {\n  if (mapType === 'world') {\n    var geoCoord = geoCoordMap[region.name];\n\n    if (geoCoord) {\n      var cp = region.center;\n      cp[0] = geoCoord[0];\n      cp[1] = geoCoord[1];\n    }\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Region = require(\"../Region\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Fix for \nvar geoCoord = [126, 25];\nvar points = [[[0, 3.5], [7, 11.2], [15, 11.9], [30, 7], [42, 0.7], [52, 0.7], [56, 7.7], [59, 0.7], [64, 0.7], [64, 0], [5, 0], [0, 3.5]], [[13, 16.1], [19, 14.7], [16, 21.7], [11, 23.1], [13, 16.1]], [[12, 32.2], [14, 38.5], [15, 38.5], [13, 32.2], [12, 32.2]], [[16, 47.6], [12, 53.2], [13, 53.2], [18, 47.6], [16, 47.6]], [[6, 64.4], [8, 70], [9, 70], [8, 64.4], [6, 64.4]], [[23, 82.6], [29, 79.8], [30, 79.8], [25, 82.6], [23, 82.6]], [[37, 70.7], [43, 62.3], [44, 62.3], [39, 70.7], [37, 70.7]], [[48, 51.1], [51, 45.5], [53, 45.5], [50, 51.1], [48, 51.1]], [[51, 35], [51, 28.7], [53, 28.7], [53, 35], [51, 35]], [[52, 22.4], [55, 17.5], [56, 17.5], [53, 22.4], [52, 22.4]], [[58, 12.6], [62, 7], [63, 7], [60, 12.6], [58, 12.6]], [[0, 3.5], [0, 93.1], [64, 93.1], [64, 0], [63, 0], [63, 92.4], [1, 92.4], [1, 3.5], [0, 3.5]]];\n\nfor (var i = 0; i < points.length; i++) {\n  for (var k = 0; k < points[i].length; k++) {\n    points[i][k][0] /= 10.5;\n    points[i][k][1] /= -10.5 / 0.75;\n    points[i][k][0] += geoCoord[0];\n    points[i][k][1] += geoCoord[1];\n  }\n}\n\nfunction _default(mapType, regions) {\n  if (mapType === 'china') {\n    regions.push(new Region('', zrUtil.map(points, function (exterior) {\n      return {\n        type: 'polygon',\n        exterior: exterior\n      };\n    }), geoCoord));\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar coordsOffsetMap = {\n  '': [32, 80],\n  // \n  '': [0, -10],\n  '': [10, 5],\n  '': [-10, 10],\n  //'': [-10, 0],\n  '': [5, 5]\n};\n\nfunction _default(mapType, region) {\n  if (mapType === 'china') {\n    var coordFix = coordsOffsetMap[region.name];\n\n    if (coordFix) {\n      var cp = region.center;\n      cp[0] += coordFix[0] / 10.5;\n      cp[1] += -coordFix[1] / (10.5 / 0.75);\n    }\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Geo = require(\"./Geo\");\n\nvar layout = require(\"../../util/layout\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar geoSourceManager = require(\"./geoSourceManager\");\n\nvar mapDataStorage = require(\"./mapDataStorage\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Resize method bound to the geo\n * @param {module:echarts/coord/geo/GeoModel|module:echarts/chart/map/MapModel} geoModel\n * @param {module:echarts/ExtensionAPI} api\n */\nfunction resizeGeo(geoModel, api) {\n  var boundingCoords = geoModel.get('boundingCoords');\n\n  if (boundingCoords != null) {\n    var leftTop = boundingCoords[0];\n    var rightBottom = boundingCoords[1];\n\n    if (isNaN(leftTop[0]) || isNaN(leftTop[1]) || isNaN(rightBottom[0]) || isNaN(rightBottom[1])) {} else {\n      this.setBoundingRect(leftTop[0], leftTop[1], rightBottom[0] - leftTop[0], rightBottom[1] - leftTop[1]);\n    }\n  }\n\n  var rect = this.getBoundingRect();\n  var boxLayoutOption;\n  var center = geoModel.get('layoutCenter');\n  var size = geoModel.get('layoutSize');\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  var aspect = rect.width / rect.height * this.aspectScale;\n  var useCenterAndSize = false;\n\n  if (center && size) {\n    center = [numberUtil.parsePercent(center[0], viewWidth), numberUtil.parsePercent(center[1], viewHeight)];\n    size = numberUtil.parsePercent(size, Math.min(viewWidth, viewHeight));\n\n    if (!isNaN(center[0]) && !isNaN(center[1]) && !isNaN(size)) {\n      useCenterAndSize = true;\n    } else {}\n  }\n\n  var viewRect;\n\n  if (useCenterAndSize) {\n    var viewRect = {};\n\n    if (aspect > 1) {\n      // Width is same with size\n      viewRect.width = size;\n      viewRect.height = size / aspect;\n    } else {\n      viewRect.height = size;\n      viewRect.width = size * aspect;\n    }\n\n    viewRect.y = center[1] - viewRect.height / 2;\n    viewRect.x = center[0] - viewRect.width / 2;\n  } else {\n    // Use left/top/width/height\n    boxLayoutOption = geoModel.getBoxLayoutParams(); // 0.75 rate\n\n    boxLayoutOption.aspect = aspect;\n    viewRect = layout.getLayoutRect(boxLayoutOption, {\n      width: viewWidth,\n      height: viewHeight\n    });\n  }\n\n  this.setViewRect(viewRect.x, viewRect.y, viewRect.width, viewRect.height);\n  this.setCenter(geoModel.get('center'));\n  this.setZoom(geoModel.get('zoom'));\n}\n/**\n * @param {module:echarts/coord/Geo} geo\n * @param {module:echarts/model/Model} model\n * @inner\n */\n\n\nfunction setGeoCoords(geo, model) {\n  zrUtil.each(model.get('geoCoord'), function (geoCoord, name) {\n    geo.addGeoCoord(name, geoCoord);\n  });\n}\n\nvar geoCreator = {\n  // For deciding which dimensions to use when creating list data\n  dimensions: Geo.prototype.dimensions,\n  create: function (ecModel, api) {\n    var geoList = []; // FIXME Create each time may be slow\n\n    ecModel.eachComponent('geo', function (geoModel, idx) {\n      var name = geoModel.get('map');\n      var aspectScale = geoModel.get('aspectScale');\n      var invertLongitute = true;\n      var mapRecords = mapDataStorage.retrieveMap(name);\n\n      if (mapRecords && mapRecords[0] && mapRecords[0].type === 'svg') {\n        aspectScale == null && (aspectScale = 1);\n        invertLongitute = false;\n      } else {\n        aspectScale == null && (aspectScale = 0.75);\n      }\n\n      var geo = new Geo(name + idx, name, geoModel.get('nameMap'), invertLongitute);\n      geo.aspectScale = aspectScale;\n      geo.zoomLimit = geoModel.get('scaleLimit');\n      geoList.push(geo);\n      setGeoCoords(geo, geoModel);\n      geoModel.coordinateSystem = geo;\n      geo.model = geoModel; // Inject resize method\n\n      geo.resize = resizeGeo;\n      geo.resize(geoModel, api);\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var coordSys = seriesModel.get('coordinateSystem');\n\n      if (coordSys === 'geo') {\n        var geoIndex = seriesModel.get('geoIndex') || 0;\n        seriesModel.coordinateSystem = geoList[geoIndex];\n      }\n    }); // If has map series\n\n    var mapModelGroupBySeries = {};\n    ecModel.eachSeriesByType('map', function (seriesModel) {\n      if (!seriesModel.getHostGeoModel()) {\n        var mapType = seriesModel.getMapType();\n        mapModelGroupBySeries[mapType] = mapModelGroupBySeries[mapType] || [];\n        mapModelGroupBySeries[mapType].push(seriesModel);\n      }\n    });\n    zrUtil.each(mapModelGroupBySeries, function (mapSeries, mapType) {\n      var nameMapList = zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('nameMap');\n      });\n      var geo = new Geo(mapType, mapType, zrUtil.mergeAll(nameMapList));\n      geo.zoomLimit = zrUtil.retrieve.apply(null, zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('scaleLimit');\n      }));\n      geoList.push(geo); // Inject resize method\n\n      geo.resize = resizeGeo;\n      geo.aspectScale = mapSeries[0].get('aspectScale');\n      geo.resize(mapSeries[0], api);\n      zrUtil.each(mapSeries, function (singleMapSeries) {\n        singleMapSeries.coordinateSystem = geo;\n        setGeoCoords(geo, singleMapSeries);\n      });\n    });\n    return geoList;\n  },\n\n  /**\n   * Fill given regions array\n   * @param  {Array.<Object>} originRegionArr\n   * @param  {string} mapName\n   * @param  {Object} [nameMap]\n   * @return {Array}\n   */\n  getFilledRegions: function (originRegionArr, mapName, nameMap) {\n    // Not use the original\n    var regionsArr = (originRegionArr || []).slice();\n    var dataNameMap = zrUtil.createHashMap();\n\n    for (var i = 0; i < regionsArr.length; i++) {\n      dataNameMap.set(regionsArr[i].name, regionsArr[i]);\n    }\n\n    var source = geoSourceManager.load(mapName, nameMap);\n    zrUtil.each(source.regions, function (region) {\n      var name = region.name;\n      !dataNameMap.get(name) && regionsArr.push({\n        name: name\n      });\n    });\n    return regionsArr;\n  }\n};\necharts.registerCoordinateSystem('geo', geoCreator);\nvar _default = geoCreator;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\n\nvar parseGeoJson = require(\"./parseGeoJson\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar fixNanhai = require(\"./fix/nanhai\");\n\nvar fixTextCoord = require(\"./fix/textCoord\");\n\nvar fixGeoCoord = require(\"./fix/geoCoord\");\n\nvar fixDiaoyuIsland = require(\"./fix/diaoyuIsland\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Built-in GEO fixer.\nvar inner = makeInner();\nvar _default = {\n  /**\n   * @param {string} mapName\n   * @param {Object} mapRecord {specialAreas, geoJSON}\n   * @return {Object} {regions, boundingRect}\n   */\n  load: function (mapName, mapRecord) {\n    var parsed = inner(mapRecord).parsed;\n\n    if (parsed) {\n      return parsed;\n    }\n\n    var specialAreas = mapRecord.specialAreas || {};\n    var geoJSON = mapRecord.geoJSON;\n    var regions; // https://jsperf.com/try-catch-performance-overhead\n\n    try {\n      regions = geoJSON ? parseGeoJson(geoJSON) : [];\n    } catch (e) {\n      throw new Error('Invalid geoJson format\\n' + e.message);\n    }\n\n    fixNanhai(mapName, regions);\n    each(regions, function (region) {\n      var regionName = region.name;\n      fixTextCoord(mapName, region);\n      fixGeoCoord(mapName, region);\n      fixDiaoyuIsland(mapName, region); // Some area like Alaska in USA map needs to be tansformed\n      // to look better\n\n      var specialArea = specialAreas[regionName];\n\n      if (specialArea) {\n        region.transformTo(specialArea.left, specialArea.top, specialArea.width, specialArea.height);\n      }\n    });\n    return inner(mapRecord).parsed = {\n      regions: regions,\n      boundingRect: getBoundingRect(regions)\n    };\n  }\n};\n\nfunction getBoundingRect(regions) {\n  var rect;\n\n  for (var i = 0; i < regions.length; i++) {\n    var regionRect = regions[i].getBoundingRect();\n    rect = rect || regionRect.clone();\n    rect.union(regionRect);\n  }\n\n  return rect;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _parseSVG = require(\"zrender/lib/tool/parseSVG\");\n\nvar parseSVG = _parseSVG.parseSVG;\nvar makeViewBoxTransform = _parseSVG.makeViewBoxTransform;\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nvar Rect = require(\"zrender/lib/graphic/shape/Rect\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar assert = _util.assert;\nvar createHashMap = _util.createHashMap;\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar _default = {\n  /**\n   * @param {string} mapName\n   * @param {Object} mapRecord {specialAreas, geoJSON}\n   * @return {Object} {root, boundingRect}\n   */\n  load: function (mapName, mapRecord) {\n    var originRoot = inner(mapRecord).originRoot;\n\n    if (originRoot) {\n      return {\n        root: originRoot,\n        boundingRect: inner(mapRecord).boundingRect\n      };\n    }\n\n    var graphic = buildGraphic(mapRecord);\n    inner(mapRecord).originRoot = graphic.root;\n    inner(mapRecord).boundingRect = graphic.boundingRect;\n    return graphic;\n  },\n  makeGraphic: function (mapName, mapRecord, hostKey) {\n    // For performance consideration (in large SVG), graphic only maked\n    // when necessary and reuse them according to hostKey.\n    var field = inner(mapRecord);\n    var rootMap = field.rootMap || (field.rootMap = createHashMap());\n    var root = rootMap.get(hostKey);\n\n    if (root) {\n      return root;\n    }\n\n    var originRoot = field.originRoot;\n    var boundingRect = field.boundingRect; // For performance, if originRoot is not used by a view,\n    // assign it to a view, but not reproduce graphic elements.\n\n    if (!field.originRootHostKey) {\n      field.originRootHostKey = hostKey;\n      root = originRoot;\n    } else {\n      root = buildGraphic(mapRecord, boundingRect).root;\n    }\n\n    return rootMap.set(hostKey, root);\n  },\n  removeGraphic: function (mapName, mapRecord, hostKey) {\n    var field = inner(mapRecord);\n    var rootMap = field.rootMap;\n    rootMap && rootMap.removeKey(hostKey);\n\n    if (hostKey === field.originRootHostKey) {\n      field.originRootHostKey = null;\n    }\n  }\n};\n\nfunction buildGraphic(mapRecord, boundingRect) {\n  var svgXML = mapRecord.svgXML;\n  var result;\n  var root;\n\n  try {\n    result = svgXML && parseSVG(svgXML, {\n      ignoreViewBox: true,\n      ignoreRootClip: true\n    }) || {};\n    root = result.root;\n    assert(root != null);\n  } catch (e) {\n    throw new Error('Invalid svg format\\n' + e.message);\n  }\n\n  var svgWidth = result.width;\n  var svgHeight = result.height;\n  var viewBoxRect = result.viewBoxRect;\n\n  if (!boundingRect) {\n    boundingRect = svgWidth == null || svgHeight == null ? // If svg width / height not specified, calculate\n    // bounding rect as the width / height\n    root.getBoundingRect() : new BoundingRect(0, 0, 0, 0);\n\n    if (svgWidth != null) {\n      boundingRect.width = svgWidth;\n    }\n\n    if (svgHeight != null) {\n      boundingRect.height = svgHeight;\n    }\n  }\n\n  if (viewBoxRect) {\n    var viewBoxTransform = makeViewBoxTransform(viewBoxRect, boundingRect.width, boundingRect.height);\n    var elRoot = root;\n    root = new Group();\n    root.add(elRoot);\n    elRoot.scale = viewBoxTransform.scale;\n    elRoot.position = viewBoxTransform.position;\n  }\n\n  root.setClipPath(new Rect({\n    shape: boundingRect.plain()\n  }));\n  return {\n    root: root,\n    boundingRect: boundingRect\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar createHashMap = _util.createHashMap;\n\nvar mapDataStorage = require(\"./mapDataStorage\");\n\nvar geoJSONLoader = require(\"./geoJSONLoader\");\n\nvar geoSVGLoader = require(\"./geoSVGLoader\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar loaders = {\n  geoJSON: geoJSONLoader,\n  svg: geoSVGLoader\n};\nvar _default = {\n  /**\n   * @param {string} mapName\n   * @param {Object} nameMap\n   * @return {Object} source {regions, regionsMap, nameCoordMap, boundingRect}\n   */\n  load: function (mapName, nameMap) {\n    var regions = [];\n    var regionsMap = createHashMap();\n    var nameCoordMap = createHashMap();\n    var boundingRect;\n    var mapRecords = retrieveMap(mapName);\n    each(mapRecords, function (record) {\n      var singleSource = loaders[record.type].load(mapName, record);\n      each(singleSource.regions, function (region) {\n        var regionName = region.name; // Try use the alias in geoNameMap\n\n        if (nameMap && nameMap.hasOwnProperty(regionName)) {\n          region = region.cloneShallow(regionName = nameMap[regionName]);\n        }\n\n        regions.push(region);\n        regionsMap.set(regionName, region);\n        nameCoordMap.set(regionName, region.center);\n      });\n      var rect = singleSource.boundingRect;\n\n      if (rect) {\n        boundingRect ? boundingRect.union(rect) : boundingRect = rect.clone();\n      }\n    });\n    return {\n      regions: regions,\n      regionsMap: regionsMap,\n      nameCoordMap: nameCoordMap,\n      // FIXME Always return new ?\n      boundingRect: boundingRect || new BoundingRect(0, 0, 0, 0)\n    };\n  },\n\n  /**\n   * @param {string} mapName\n   * @param {string} hostKey For cache.\n   * @return {Array.<module:zrender/Element>} Roots.\n   */\n  makeGraphic: makeInvoker('makeGraphic'),\n\n  /**\n   * @param {string} mapName\n   * @param {string} hostKey For cache.\n   */\n  removeGraphic: makeInvoker('removeGraphic')\n};\n\nfunction makeInvoker(methodName) {\n  return function (mapName, hostKey) {\n    var mapRecords = retrieveMap(mapName);\n    var results = [];\n    each(mapRecords, function (record) {\n      var method = loaders[record.type][methodName];\n      method && results.push(method(mapName, record, hostKey));\n    });\n    return results;\n  };\n}\n\nfunction mapNotExistsError(mapName) {}\n\nfunction retrieveMap(mapName) {\n  var mapRecords = mapDataStorage.retrieveMap(mapName) || [];\n  return mapRecords;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../Axis\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction IndicatorAxis(dim, scale, radiusExtent) {\n  Axis.call(this, dim, scale, radiusExtent);\n  /**\n   * Axis type\n   *  - 'category'\n   *  - 'value'\n   *  - 'time'\n   *  - 'log'\n   * @type {string}\n   */\n\n  this.type = 'value';\n  this.angle = 0;\n  /**\n   * Indicator name\n   * @type {string}\n   */\n\n  this.name = '';\n  /**\n   * @type {module:echarts/model/Model}\n   */\n\n  this.model;\n}\n\nzrUtil.inherits(IndicatorAxis, Axis);\nvar _default = IndicatorAxis;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar IndicatorAxis = require(\"./IndicatorAxis\");\n\nvar IntervalScale = require(\"../../scale/Interval\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar _axisHelper = require(\"../axisHelper\");\n\nvar getScaleExtent = _axisHelper.getScaleExtent;\nvar niceScaleExtent = _axisHelper.niceScaleExtent;\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nvar LogScale = require(\"../../scale/Log\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO clockwise\nfunction Radar(radarModel, ecModel, api) {\n  this._model = radarModel;\n  /**\n   * Radar dimensions\n   * @type {Array.<string>}\n   */\n\n  this.dimensions = [];\n  this._indicatorAxes = zrUtil.map(radarModel.getIndicatorModels(), function (indicatorModel, idx) {\n    var dim = 'indicator_' + idx;\n    var indicatorAxis = new IndicatorAxis(dim, indicatorModel.get('axisType') === 'log' ? new LogScale() : new IntervalScale());\n    indicatorAxis.name = indicatorModel.get('name'); // Inject model and axis\n\n    indicatorAxis.model = indicatorModel;\n    indicatorModel.axis = indicatorAxis;\n    this.dimensions.push(dim);\n    return indicatorAxis;\n  }, this);\n  this.resize(radarModel, api);\n  /**\n   * @type {number}\n   * @readOnly\n   */\n\n  this.cx;\n  /**\n   * @type {number}\n   * @readOnly\n   */\n\n  this.cy;\n  /**\n   * @type {number}\n   * @readOnly\n   */\n\n  this.r;\n  /**\n   * @type {number}\n   * @readOnly\n   */\n\n  this.r0;\n  /**\n   * @type {number}\n   * @readOnly\n   */\n\n  this.startAngle;\n}\n\nRadar.prototype.getIndicatorAxes = function () {\n  return this._indicatorAxes;\n};\n\nRadar.prototype.dataToPoint = function (value, indicatorIndex) {\n  var indicatorAxis = this._indicatorAxes[indicatorIndex];\n  return this.coordToPoint(indicatorAxis.dataToCoord(value), indicatorIndex);\n};\n\nRadar.prototype.coordToPoint = function (coord, indicatorIndex) {\n  var indicatorAxis = this._indicatorAxes[indicatorIndex];\n  var angle = indicatorAxis.angle;\n  var x = this.cx + coord * Math.cos(angle);\n  var y = this.cy - coord * Math.sin(angle);\n  return [x, y];\n};\n\nRadar.prototype.pointToData = function (pt) {\n  var dx = pt[0] - this.cx;\n  var dy = pt[1] - this.cy;\n  var radius = Math.sqrt(dx * dx + dy * dy);\n  dx /= radius;\n  dy /= radius;\n  var radian = Math.atan2(-dy, dx); // Find the closest angle\n  // FIXME index can calculated directly\n\n  var minRadianDiff = Infinity;\n  var closestAxis;\n  var closestAxisIdx = -1;\n\n  for (var i = 0; i < this._indicatorAxes.length; i++) {\n    var indicatorAxis = this._indicatorAxes[i];\n    var diff = Math.abs(radian - indicatorAxis.angle);\n\n    if (diff < minRadianDiff) {\n      closestAxis = indicatorAxis;\n      closestAxisIdx = i;\n      minRadianDiff = diff;\n    }\n  }\n\n  return [closestAxisIdx, +(closestAxis && closestAxis.coordToData(radius))];\n};\n\nRadar.prototype.resize = function (radarModel, api) {\n  var center = radarModel.get('center');\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  var viewSize = Math.min(viewWidth, viewHeight) / 2;\n  this.cx = numberUtil.parsePercent(center[0], viewWidth);\n  this.cy = numberUtil.parsePercent(center[1], viewHeight);\n  this.startAngle = radarModel.get('startAngle') * Math.PI / 180; // radius may be single value like `20`, `'80%'`, or array like `[10, '80%']`\n\n  var radius = radarModel.get('radius');\n\n  if (typeof radius === 'string' || typeof radius === 'number') {\n    radius = [0, radius];\n  }\n\n  this.r0 = numberUtil.parsePercent(radius[0], viewSize);\n  this.r = numberUtil.parsePercent(radius[1], viewSize);\n  zrUtil.each(this._indicatorAxes, function (indicatorAxis, idx) {\n    indicatorAxis.setExtent(this.r0, this.r);\n    var angle = this.startAngle + idx * Math.PI * 2 / this._indicatorAxes.length; // Normalize to [-PI, PI]\n\n    angle = Math.atan2(Math.sin(angle), Math.cos(angle));\n    indicatorAxis.angle = angle;\n  }, this);\n};\n\nRadar.prototype.update = function (ecModel, api) {\n  var indicatorAxes = this._indicatorAxes;\n  var radarModel = this._model;\n  zrUtil.each(indicatorAxes, function (indicatorAxis) {\n    indicatorAxis.scale.setExtent(Infinity, -Infinity);\n  });\n  ecModel.eachSeriesByType('radar', function (radarSeries, idx) {\n    if (radarSeries.get('coordinateSystem') !== 'radar' || ecModel.getComponent('radar', radarSeries.get('radarIndex')) !== radarModel) {\n      return;\n    }\n\n    var data = radarSeries.getData();\n    zrUtil.each(indicatorAxes, function (indicatorAxis) {\n      indicatorAxis.scale.unionExtentFromData(data, data.mapDimension(indicatorAxis.dim));\n    });\n  }, this);\n  var splitNumber = radarModel.get('splitNumber');\n\n  function increaseInterval(interval) {\n    var exp10 = Math.pow(10, Math.floor(Math.log(interval) / Math.LN10)); // Increase interval\n\n    var f = interval / exp10;\n\n    if (f === 2) {\n      f = 5;\n    } else {\n      // f is 2 or 5\n      f *= 2;\n    }\n\n    return f * exp10;\n  } // Force all the axis fixing the maxSplitNumber.\n\n\n  zrUtil.each(indicatorAxes, function (indicatorAxis, idx) {\n    var rawExtent = getScaleExtent(indicatorAxis.scale, indicatorAxis.model);\n    niceScaleExtent(indicatorAxis.scale, indicatorAxis.model);\n    var axisModel = indicatorAxis.model;\n    var scale = indicatorAxis.scale;\n    var fixedMin = axisModel.getMin();\n    var fixedMax = axisModel.getMax();\n    var interval = scale.getInterval();\n\n    if (fixedMin != null && fixedMax != null) {\n      // User set min, max, divide to get new interval\n      scale.setExtent(+fixedMin, +fixedMax);\n      scale.setInterval((fixedMax - fixedMin) / splitNumber);\n    } else if (fixedMin != null) {\n      var max; // User set min, expand extent on the other side\n\n      do {\n        max = fixedMin + interval * splitNumber;\n        scale.setExtent(+fixedMin, max); // Interval must been set after extent\n        // FIXME\n\n        scale.setInterval(interval);\n        interval = increaseInterval(interval);\n      } while (max < rawExtent[1] && isFinite(max) && isFinite(rawExtent[1]));\n    } else if (fixedMax != null) {\n      var min; // User set min, expand extent on the other side\n\n      do {\n        min = fixedMax - interval * splitNumber;\n        scale.setExtent(min, +fixedMax);\n        scale.setInterval(interval);\n        interval = increaseInterval(interval);\n      } while (min > rawExtent[0] && isFinite(min) && isFinite(rawExtent[0]));\n    } else {\n      var nicedSplitNumber = scale.getTicks().length - 1;\n\n      if (nicedSplitNumber > splitNumber) {\n        interval = increaseInterval(interval);\n      } // PENDING\n\n\n      var center = Math.round((rawExtent[0] + rawExtent[1]) / 2 / interval) * interval;\n      var halfSplitNumber = Math.round(splitNumber / 2);\n      scale.setExtent(numberUtil.round(center - halfSplitNumber * interval), numberUtil.round(center + (splitNumber - halfSplitNumber) * interval));\n      scale.setInterval(interval);\n    }\n  });\n};\n/**\n * Radar dimensions is based on the data\n * @type {Array}\n */\n\n\nRadar.dimensions = [];\n\nRadar.create = function (ecModel, api) {\n  var radarList = [];\n  ecModel.eachComponent('radar', function (radarModel) {\n    var radar = new Radar(radarModel, ecModel, api);\n    radarList.push(radar);\n    radarModel.coordinateSystem = radar;\n  });\n  ecModel.eachSeriesByType('radar', function (radarSeries) {\n    if (radarSeries.get('coordinateSystem') === 'radar') {\n      // Inject coordinate system\n      radarSeries.coordinateSystem = radarList[radarSeries.get('radarIndex') || 0];\n    }\n  });\n  return radarList;\n};\n\nCoordinateSystem.register('radar', Radar);\nvar _default = Radar;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisDefault = require(\"../axisDefault\");\n\nvar Model = require(\"../../model/Model\");\n\nvar axisModelCommonMixin = require(\"../axisModelCommonMixin\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar valueAxisDefault = axisDefault.valueAxis;\n\nfunction defaultsShow(opt, show) {\n  return zrUtil.defaults({\n    show: show\n  }, opt);\n}\n\nvar RadarModel = echarts.extendComponentModel({\n  type: 'radar',\n  optionUpdated: function () {\n    var boundaryGap = this.get('boundaryGap');\n    var splitNumber = this.get('splitNumber');\n    var scale = this.get('scale');\n    var axisLine = this.get('axisLine');\n    var axisTick = this.get('axisTick');\n    var axisType = this.get('axisType');\n    var axisLabel = this.get('axisLabel');\n    var nameTextStyle = this.get('name');\n    var showName = this.get('name.show');\n    var nameFormatter = this.get('name.formatter');\n    var nameGap = this.get('nameGap');\n    var triggerEvent = this.get('triggerEvent');\n    var indicatorModels = zrUtil.map(this.get('indicator') || [], function (indicatorOpt) {\n      // PENDING\n      if (indicatorOpt.max != null && indicatorOpt.max > 0 && !indicatorOpt.min) {\n        indicatorOpt.min = 0;\n      } else if (indicatorOpt.min != null && indicatorOpt.min < 0 && !indicatorOpt.max) {\n        indicatorOpt.max = 0;\n      }\n\n      var iNameTextStyle = nameTextStyle;\n\n      if (indicatorOpt.color != null) {\n        iNameTextStyle = zrUtil.defaults({\n          color: indicatorOpt.color\n        }, nameTextStyle);\n      } // Use same configuration\n\n\n      indicatorOpt = zrUtil.merge(zrUtil.clone(indicatorOpt), {\n        boundaryGap: boundaryGap,\n        splitNumber: splitNumber,\n        scale: scale,\n        axisLine: axisLine,\n        axisTick: axisTick,\n        axisType: axisType,\n        axisLabel: axisLabel,\n        // Compatible with 2 and use text\n        name: indicatorOpt.text,\n        nameLocation: 'end',\n        nameGap: nameGap,\n        // min: 0,\n        nameTextStyle: iNameTextStyle,\n        triggerEvent: triggerEvent\n      }, false);\n\n      if (!showName) {\n        indicatorOpt.name = '';\n      }\n\n      if (typeof nameFormatter === 'string') {\n        var indName = indicatorOpt.name;\n        indicatorOpt.name = nameFormatter.replace('{value}', indName != null ? indName : '');\n      } else if (typeof nameFormatter === 'function') {\n        indicatorOpt.name = nameFormatter(indicatorOpt.name, indicatorOpt);\n      }\n\n      var model = zrUtil.extend(new Model(indicatorOpt, null, this.ecModel), axisModelCommonMixin); // For triggerEvent.\n\n      model.mainType = 'radar';\n      model.componentIndex = this.componentIndex;\n      return model;\n    }, this);\n\n    this.getIndicatorModels = function () {\n      return indicatorModels;\n    };\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 0,\n    center: ['50%', '50%'],\n    radius: '75%',\n    startAngle: 90,\n    name: {\n      show: true // formatter: null\n      // textStyle: {}\n\n    },\n    boundaryGap: [0, 0],\n    splitNumber: 5,\n    nameGap: 15,\n    scale: false,\n    // Polygon or circle\n    shape: 'polygon',\n    axisLine: zrUtil.merge({\n      lineStyle: {\n        color: '#bbb'\n      }\n    }, valueAxisDefault.axisLine),\n    axisLabel: defaultsShow(valueAxisDefault.axisLabel, false),\n    axisTick: defaultsShow(valueAxisDefault.axisTick, false),\n    axisType: 'interval',\n    splitLine: defaultsShow(valueAxisDefault.splitLine, true),\n    splitArea: defaultsShow(valueAxisDefault.splitArea, true),\n    // {text, min, max}\n    indicator: []\n  }\n});\nvar _default = RadarModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar map = _util.map;\n\nvar createRenderPlanner = require(\"../chart/helper/createRenderPlanner\");\n\nvar _dataStackHelper = require(\"../data/helper/dataStackHelper\");\n\nvar isDimensionStacked = _dataStackHelper.isDimensionStacked;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var isLargeRender = pipelineContext.large;\n\n      if (!coordSys) {\n        return;\n      }\n\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n      if (isDimensionStacked(data, dims[0]\n      /*, dims[1]*/\n      )) {\n        dims[0] = stackResultDim;\n      }\n\n      if (isDimensionStacked(data, dims[1]\n      /*, dims[0]*/\n      )) {\n        dims[1] = stackResultDim;\n      }\n\n      function progress(params, data) {\n        var segCount = params.end - params.start;\n        var points = isLargeRender && new Float32Array(segCount * dimLen);\n\n        for (var i = params.start, offset = 0, tmpIn = [], tmpOut = []; i < params.end; i++) {\n          var point;\n\n          if (dimLen === 1) {\n            var x = data.get(dims[0], i);\n            point = !isNaN(x) && coordSys.dataToPoint(x, null, tmpOut);\n          } else {\n            var x = tmpIn[0] = data.get(dims[0], i);\n            var y = tmpIn[1] = data.get(dims[1], i); // Also {Array.<number>}, not undefined to avoid if...else... statement\n\n            point = !isNaN(x) && !isNaN(y) && coordSys.dataToPoint(tmpIn, null, tmpOut);\n          }\n\n          if (isLargeRender) {\n            points[offset++] = point ? point[0] : NaN;\n            points[offset++] = point ? point[1] : NaN;\n          } else {\n            data.setItemLayout(i, point && point.slice() || [NaN, NaN]);\n          }\n        }\n\n        isLargeRender && data.setLayout('symbolPoints', points);\n      }\n\n      return dimLen && {\n        progress: progress\n      };\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx); // If in any legend component the status is not selected.\n\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    } // Return NaN if count is 0\n\n\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(max) ? max : NaN;\n  },\n  min: function (frame) {\n    var min = Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\n\nvar indexSampler = function (frame, value) {\n  return Math.round(frame.length / 2);\n};\n\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    modifyOutputEnd: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem; // Only cartesian2d support down sampling\n\n      if (coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent(); // Coordinste system has been resized\n\n        var size = extent[1] - extent[0];\n        var rate = Math.round(data.count() / size);\n\n        if (rate > 1) {\n          var sampler;\n\n          if (typeof sampling === 'string') {\n            sampler = samplers[sampling];\n          } else if (typeof sampling === 'function') {\n            sampler = sampling;\n          }\n\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _graphic = require(\"../graphic\");\n\nvar extendShape = _graphic.extendShape;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Sausage: similar to sector, but have half circle on both sides\n * @public\n */\nvar _default = extendShape({\n  type: 'sausage',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r0: 0,\n    r: 0,\n    startAngle: 0,\n    endAngle: Math.PI * 2,\n    clockwise: true\n  },\n  buildPath: function (ctx, shape) {\n    var x = shape.cx;\n    var y = shape.cy;\n    var r0 = Math.max(shape.r0 || 0, 0);\n    var r = Math.max(shape.r, 0);\n    var dr = (r - r0) * 0.5;\n    var rCenter = r0 + dr;\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var unitStartX = Math.cos(startAngle);\n    var unitStartY = Math.sin(startAngle);\n    var unitEndX = Math.cos(endAngle);\n    var unitEndY = Math.sin(endAngle);\n    var lessThanCircle = clockwise ? endAngle - startAngle < Math.PI * 2 : startAngle - endAngle < Math.PI * 2;\n\n    if (lessThanCircle) {\n      ctx.moveTo(unitStartX * r0 + x, unitStartY * r0 + y);\n      ctx.arc(unitStartX * rCenter + x, unitStartY * rCenter + y, dr, -Math.PI + startAngle, startAngle, !clockwise);\n    }\n\n    ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    ctx.moveTo(unitEndX * r + x, unitEndY * r + y);\n    ctx.arc(unitEndX * rCenter + x, unitEndY * rCenter + y, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\n\n    if (r0 !== 0) {\n      ctx.arc(x, y, r0, endAngle, startAngle, clockwise);\n      ctx.moveTo(unitStartX * r0 + x, unitEndY * r0 + y);\n    }\n\n    ctx.closePath();\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Pick color from palette for each data item.\n// Applicable for charts that require applying color palette\n// in data level (like pie, funnel, chord).\nfunction _default(seriesType) {\n  return {\n    getTargetSeries: function (ecModel) {\n      // Pie and funnel may use diferrent scope\n      var paletteScope = {};\n      var seiresModelMap = createHashMap();\n      ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n        seriesModel.__paletteScope = paletteScope;\n        seiresModelMap.set(seriesModel.uid, seriesModel);\n      });\n      return seiresModelMap;\n    },\n    reset: function (seriesModel, ecModel) {\n      var dataAll = seriesModel.getRawData();\n      var idxMap = {};\n      var data = seriesModel.getData();\n      data.each(function (idx) {\n        var rawIdx = data.getRawIndex(idx);\n        idxMap[rawIdx] = idx;\n      });\n      dataAll.each(function (rawIdx) {\n        var filteredIdx = idxMap[rawIdx]; // If series.itemStyle.normal.color is a function. itemVisual may be encoded\n\n        var singleDataColor = filteredIdx != null && data.getItemVisual(filteredIdx, 'color', true);\n        var singleDataBorderColor = filteredIdx != null && data.getItemVisual(filteredIdx, 'borderColor', true);\n        var itemModel;\n\n        if (!singleDataColor || !singleDataBorderColor) {\n          // FIXME Performance\n          itemModel = dataAll.getItemModel(rawIdx);\n        }\n\n        if (!singleDataColor) {\n          var color = itemModel.get('itemStyle.color') || seriesModel.getColorFromPalette(dataAll.getName(rawIdx) || rawIdx + '', seriesModel.__paletteScope, dataAll.count()); // Legend may use the visual info in data before processed\n\n          dataAll.setItemVisual(rawIdx, 'color', color); // Data is not filtered\n\n          if (filteredIdx != null) {\n            data.setItemVisual(filteredIdx, 'color', color);\n          }\n        } else {\n          // Set data all color for legend\n          dataAll.setItemVisual(rawIdx, 'color', singleDataColor);\n        }\n\n        if (!singleDataBorderColor) {\n          var borderColor = itemModel.get('itemStyle.borderColor'); // Legend may use the visual info in data before processed\n\n          dataAll.setItemVisual(rawIdx, 'borderColor', borderColor); // Data is not filtered\n\n          if (filteredIdx != null) {\n            data.setItemVisual(filteredIdx, 'borderColor', borderColor);\n          }\n        } else {\n          // Set data all borderColor for legend\n          dataAll.setItemVisual(rawIdx, 'borderColor', singleDataBorderColor);\n        }\n      });\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isFunction = _util.isFunction;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType, defaultSymbolType, legendSymbol) {\n  // Encoding visual for all series include which is filtered for legend drawing\n  return {\n    seriesType: seriesType,\n    // For legend.\n    performRawSeries: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var symbolType = seriesModel.get('symbol');\n      var symbolSize = seriesModel.get('symbolSize');\n      var keepAspect = seriesModel.get('symbolKeepAspect');\n      var hasSymbolTypeCallback = isFunction(symbolType);\n      var hasSymbolSizeCallback = isFunction(symbolSize);\n      var hasCallback = hasSymbolTypeCallback || hasSymbolSizeCallback;\n      var seriesSymbol = !hasSymbolTypeCallback && symbolType ? symbolType : defaultSymbolType;\n      var seriesSymbolSize = !hasSymbolSizeCallback ? symbolSize : null;\n      data.setVisual({\n        legendSymbol: legendSymbol || seriesSymbol,\n        // If seting callback functions on `symbol` or `symbolSize`, for simplicity and avoiding\n        // to bring trouble, we do not pick a reuslt from one of its calling on data item here,\n        // but just use the default value. Callback on `symbol` or `symbolSize` is convenient in\n        // some cases but generally it is not recommanded.\n        symbol: seriesSymbol,\n        symbolSize: seriesSymbolSize,\n        symbolKeepAspect: keepAspect\n      }); // Only visible series has each data be visual encoded\n\n      if (ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      function dataEach(data, idx) {\n        if (hasCallback) {\n          var rawValue = seriesModel.getRawValue(idx);\n          var params = seriesModel.getDataParams(idx);\n          hasSymbolTypeCallback && data.setItemVisual(idx, 'symbol', symbolType(rawValue, params));\n          hasSymbolSizeCallback && data.setItemVisual(idx, 'symbolSize', symbolSize(rawValue, params));\n        }\n\n        if (data.hasItemOption) {\n          var itemModel = data.getItemModel(idx);\n          var itemSymbolType = itemModel.getShallow('symbol', true);\n          var itemSymbolSize = itemModel.getShallow('symbolSize', true);\n          var itemSymbolKeepAspect = itemModel.getShallow('symbolKeepAspect', true); // If has item symbol\n\n          if (itemSymbolType != null) {\n            data.setItemVisual(idx, 'symbol', itemSymbolType);\n          }\n\n          if (itemSymbolSize != null) {\n            // PENDING Transform symbolSize ?\n            data.setItemVisual(idx, 'symbolSize', itemSymbolSize);\n          }\n\n          if (itemSymbolKeepAspect != null) {\n            data.setItemVisual(idx, 'symbolKeepAspect', itemSymbolKeepAspect);\n          }\n        }\n      }\n\n      return {\n        dataEach: data.hasItemOption || hasCallback ? dataEach : null\n      };\n    }\n  };\n}\n\nmodule.exports = _default;"],"sourceRoot":""}